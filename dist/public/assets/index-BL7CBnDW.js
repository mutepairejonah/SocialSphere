function uI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function hS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zp={exports:{}},Yc={};var _E;function hI(){if(_E)return Yc;_E=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Yc.Fragment=e,Yc.jsx=t,Yc.jsxs=t,Yc}var yE;function dI(){return yE||(yE=1,Zp.exports=hI()),Zp.exports}var T=dI(),eg={exports:{}},$c={},tg={exports:{}},ng={};var vE;function fI(){return vE||(vE=1,(function(n){function e(z,ie){var ne=z.length;z.push(ie);e:for(;0<ne;){var Ne=ne-1>>>1,ke=z[Ne];if(0<a(ke,ie))z[Ne]=ie,z[ne]=ke,ne=Ne;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ie=z[0],ne=z.pop();if(ne!==ie){z[0]=ne;e:for(var Ne=0,ke=z.length,D=ke>>>1;Ne<D;){var X=2*(Ne+1)-1,Q=z[X],se=X+1,he=z[se];if(0>a(Q,ne))se<ke&&0>a(he,Q)?(z[Ne]=he,z[se]=ne,Ne=se):(z[Ne]=Q,z[X]=ne,Ne=X);else if(se<ke&&0>a(he,ne))z[Ne]=he,z[se]=ne,Ne=se;else break e}}return ie}function a(z,ie){var ne=z.sortIndex-ie.sortIndex;return ne!==0?ne:z.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],g=[],v=1,_=null,w=3,I=!1,P=!1,q=!1,G=!1,$=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function me(z){for(var ie=t(g);ie!==null;){if(ie.callback===null)i(g);else if(ie.startTime<=z)i(g),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=t(g)}}function Me(z){if(q=!1,me(z),!P)if(t(p)!==null)P=!0,Ee||(Ee=!0,L());else{var ie=t(g);ie!==null&&Ze(Me,ie.startTime-z)}}var Ee=!1,N=-1,x=5,R=-1;function V(){return G?!0:!(n.unstable_now()-R<x)}function O(){if(G=!1,Ee){var z=n.unstable_now();R=z;var ie=!0;try{e:{P=!1,q&&(q=!1,ce(N),N=-1),I=!0;var ne=w;try{t:{for(me(z),_=t(p);_!==null&&!(_.expirationTime>z&&V());){var Ne=_.callback;if(typeof Ne=="function"){_.callback=null,w=_.priorityLevel;var ke=Ne(_.expirationTime<=z);if(z=n.unstable_now(),typeof ke=="function"){_.callback=ke,me(z),ie=!0;break t}_===t(p)&&i(p),me(z)}else i(p);_=t(p)}if(_!==null)ie=!0;else{var D=t(g);D!==null&&Ze(Me,D.startTime-z),ie=!1}}break e}finally{_=null,w=ne,I=!1}ie=void 0}}finally{ie?L():Ee=!1}}}var L;if(typeof re=="function")L=function(){re(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Je=C.port2;C.port1.onmessage=O,L=function(){Je.postMessage(null)}}else L=function(){$(O,0)};function Ze(z,ie){N=$(function(){z(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(z){switch(w){case 1:case 2:case 3:var ie=3;break;default:ie=w}var ne=w;w=ie;try{return z()}finally{w=ne}},n.unstable_requestPaint=function(){G=!0},n.unstable_runWithPriority=function(z,ie){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=w;w=z;try{return ie()}finally{w=ne}},n.unstable_scheduleCallback=function(z,ie,ne){var Ne=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ne+ne:Ne):ne=Ne,z){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=ne+ke,z={id:v++,callback:ie,priorityLevel:z,startTime:ne,expirationTime:ke,sortIndex:-1},ne>Ne?(z.sortIndex=ne,e(g,z),t(p)===null&&z===t(g)&&(q?(ce(N),N=-1):q=!0,Ze(Me,ne-Ne))):(z.sortIndex=ke,e(p,z),P||I||(P=!0,Ee||(Ee=!0,L()))),z},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(z){var ie=w;return function(){var ne=w;w=ie;try{return z.apply(this,arguments)}finally{w=ne}}}})(ng)),ng}var bE;function mI(){return bE||(bE=1,tg.exports=fI()),tg.exports}var sg={exports:{}},De={};var EE;function pI(){if(EE)return De;EE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,G={};function $(D,X,Q){this.props=D,this.context=X,this.refs=G,this.updater=Q||P}$.prototype.isReactComponent={},$.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},$.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ce(){}ce.prototype=$.prototype;function re(D,X,Q){this.props=D,this.context=X,this.refs=G,this.updater=Q||P}var me=re.prototype=new ce;me.constructor=re,q(me,$.prototype),me.isPureReactComponent=!0;var Me=Array.isArray;function Ee(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(D,X,Q){var se=Q.ref;return{$$typeof:n,type:D,key:X,ref:se!==void 0?se:null,props:Q}}function V(D,X){return R(D.type,X,D.props)}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function L(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return X[Q]})}var C=/\/+/g;function Je(D,X){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):X.toString(36)}function Ze(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ee,Ee):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function z(D,X,Q,se,he){var be=typeof D;(be==="undefined"||be==="boolean")&&(D=null);var ve=!1;if(D===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(D.$$typeof){case n:case e:ve=!0;break;case v:return ve=D._init,z(ve(D._payload),X,Q,se,he)}}if(ve)return he=he(D),ve=se===""?"."+Je(D,0):se,Me(he)?(Q="",ve!=null&&(Q=ve.replace(C,"$&/")+"/"),z(he,X,Q,"",function(hn){return hn})):he!=null&&(O(he)&&(he=V(he,Q+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(C,"$&/")+"/")+ve)),X.push(he)),1;ve=0;var Re=se===""?".":se+":";if(Me(D))for(var Fe=0;Fe<D.length;Fe++)se=D[Fe],be=Re+Je(se,Fe),ve+=z(se,X,Q,be,he);else if(Fe=I(D),typeof Fe=="function")for(D=Fe.call(D),Fe=0;!(se=D.next()).done;)se=se.value,be=Re+Je(se,Fe++),ve+=z(se,X,Q,be,he);else if(be==="object"){if(typeof D.then=="function")return z(Ze(D),X,Q,se,he);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ve}function ie(D,X,Q){if(D==null)return D;var se=[],he=0;return z(D,se,"","",function(be){return X.call(Q,be,he++)}),se}function ne(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var Ne=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ke={map:ie,forEach:function(D,X,Q){ie(D,function(){X.apply(this,arguments)},Q)},count:function(D){var X=0;return ie(D,function(){X++}),X},toArray:function(D){return ie(D,function(X){return X})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return De.Activity=_,De.Children=ke,De.Component=$,De.Fragment=t,De.Profiler=a,De.PureComponent=re,De.StrictMode=i,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(D,X,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=q({},D.props),he=D.key;if(X!=null)for(be in X.key!==void 0&&(he=""+X.key),X)!x.call(X,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&X.ref===void 0||(se[be]=X[be]);var be=arguments.length-2;if(be===1)se.children=Q;else if(1<be){for(var ve=Array(be),Re=0;Re<be;Re++)ve[Re]=arguments[Re+2];se.children=ve}return R(D.type,he,se)},De.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},De.createElement=function(D,X,Q){var se,he={},be=null;if(X!=null)for(se in X.key!==void 0&&(be=""+X.key),X)x.call(X,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=X[se]);var ve=arguments.length-2;if(ve===1)he.children=Q;else if(1<ve){for(var Re=Array(ve),Fe=0;Fe<ve;Fe++)Re[Fe]=arguments[Fe+2];he.children=Re}if(D&&D.defaultProps)for(se in ve=D.defaultProps,ve)he[se]===void 0&&(he[se]=ve[se]);return R(D,be,he)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=O,De.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ne}},De.memo=function(D,X){return{$$typeof:g,type:D,compare:X===void 0?null:X}},De.startTransition=function(D){var X=N.T,Q={};N.T=Q;try{var se=D(),he=N.S;he!==null&&he(Q,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Ee,Ne)}catch(be){Ne(be)}finally{X!==null&&Q.types!==null&&(X.types=Q.types),N.T=X}},De.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},De.use=function(D){return N.H.use(D)},De.useActionState=function(D,X,Q){return N.H.useActionState(D,X,Q)},De.useCallback=function(D,X){return N.H.useCallback(D,X)},De.useContext=function(D){return N.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,X){return N.H.useDeferredValue(D,X)},De.useEffect=function(D,X){return N.H.useEffect(D,X)},De.useEffectEvent=function(D){return N.H.useEffectEvent(D)},De.useId=function(){return N.H.useId()},De.useImperativeHandle=function(D,X,Q){return N.H.useImperativeHandle(D,X,Q)},De.useInsertionEffect=function(D,X){return N.H.useInsertionEffect(D,X)},De.useLayoutEffect=function(D,X){return N.H.useLayoutEffect(D,X)},De.useMemo=function(D,X){return N.H.useMemo(D,X)},De.useOptimistic=function(D,X){return N.H.useOptimistic(D,X)},De.useReducer=function(D,X,Q){return N.H.useReducer(D,X,Q)},De.useRef=function(D){return N.H.useRef(D)},De.useState=function(D){return N.H.useState(D)},De.useSyncExternalStore=function(D,X,Q){return N.H.useSyncExternalStore(D,X,Q)},De.useTransition=function(){return N.H.useTransition()},De.version="19.2.0",De}var TE;function xf(){return TE||(TE=1,sg.exports=pI()),sg.exports}var ig={exports:{}},xn={};var wE;function gI(){if(wE)return xn;wE=1;var n=xf();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:g,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},xn.flushSync=function(p){var g=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=g,i.p=v,i.d.f()}},xn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},xn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},xn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,_=f(v,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:I}):v==="script"&&i.d.X(p,{crossOrigin:_,integrity:w,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},xn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,_=f(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=f(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},xn.requestFormReset=function(p){i.d.r(p)},xn.unstable_batchedUpdates=function(p,g){return p(g)},xn.useFormState=function(p,g,v){return u.H.useFormState(p,g,v)},xn.useFormStatus=function(){return u.H.useHostTransitionStatus()},xn.version="19.2.0",xn}var SE;function dS(){if(SE)return ig.exports;SE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ig.exports=gI(),ig.exports}var AE;function _I(){if(AE)return $c;AE=1;var n=mI(),e=xf(),t=dS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(l(s)!==s)throw Error(i(188))}function g(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,c=r;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return p(d),s;if(m===c)return p(d),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=m;else{for(var b=!1,S=d.child;S;){if(S===o){b=!0,o=d,c=m;break}if(S===c){b=!0,c=d,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=d;break}if(S===c){b=!0,c=m,o=d;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),re=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var C=Symbol.for("react.client.reference");function Je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===C?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case q:return"Fragment";case $:return"Profiler";case G:return"StrictMode";case Me:return"Suspense";case Ee:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case re:return s.displayName||"Context";case ce:return(s._context.displayName||"Context")+".Consumer";case me:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return r=s.displayName||null,r!==null?r:Je(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return Je(s(r))}catch{}}return null}var Ze=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Ne=[],ke=-1;function D(s){return{current:s}}function X(s){0>ke||(s.current=Ne[ke],Ne[ke]=null,ke--)}function Q(s,r){ke++,Ne[ke]=s.current,s.current=r}var se=D(null),he=D(null),be=D(null),ve=D(null);function Re(s,r){switch(Q(be,r),Q(he,s),Q(se,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?zb(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=zb(r),s=Bb(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(se),Q(se,s)}function Fe(){X(se),X(he),X(be)}function hn(s){s.memoizedState!==null&&Q(ve,s);var r=se.current,o=Bb(r,s.type);r!==o&&(Q(he,s),Q(se,o))}function Mn(s){he.current===s&&(X(se),X(he)),ve.current===s&&(X(ve),qc._currentValue=ne)}var tn,wr;function zn(s){if(tn===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);tn=r&&r[1]||"",wr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+s+wr}var Da=!1;function ti(s,r){if(!s||Da)return"";Da=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Y){var H=Y}Reflect.construct(s,[],Z)}else{try{Z.call()}catch(Y){H=Y}s.call(Z.prototype)}}else{try{throw Error()}catch(Y){H=Y}(Z=s())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var k=b.split(`
`),F=S.split(`
`);for(d=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(c===k.length||d===F.length)for(c=k.length-1,d=F.length-1;1<=c&&0<=d&&k[c]!==F[d];)d--;for(;1<=c&&0<=d;c--,d--)if(k[c]!==F[d]){if(c!==1||d!==1)do if(c--,d--,0>d||k[c]!==F[d]){var W=`
`+k[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=d);break}}}finally{Da=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?zn(o):""}function ks(s,r){switch(s.tag){case 26:case 27:case 5:return zn(s.type);case 16:return zn("Lazy");case 13:return s.child!==r&&r!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return ti(s.type,!1);case 11:return ti(s.type.render,!1);case 1:return ti(s.type,!0);case 31:return zn("Activity");default:return""}}function Sr(s){try{var r="",o=null;do r+=ks(s,o),o=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var it=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,ni=n.unstable_cancelCallback,dn=n.unstable_shouldYield,Ds=n.unstable_requestPaint,fn=n.unstable_now,Li=n.unstable_getCurrentPriorityLevel,si=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,Os=n.unstable_NormalPriority,Ma=n.unstable_LowPriority,Ms=n.unstable_IdlePriority,Pa=n.log,Ps=n.unstable_setDisableYieldValue,Jn=null,Wt=null;function Pn(s){if(typeof Pa=="function"&&Ps(s),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Jn,s)}catch{}}var At=Math.clz32?Math.clz32:Zn,Ao=Math.log,ii=Math.LN2;function Zn(s){return s>>>=0,s===0?32:31-(Ao(s)/ii|0)|0}var ds=256,Ui=262144,Rt=4194304;function es(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Se(s,r,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?d=es(c):(b&=S,b!==0?d=es(b):o||(o=S&~s,o!==0&&(d=es(o))))):(S=c&~m,S!==0?d=es(S):b!==0?d=es(b):o||(o=c&~s,o!==0&&(d=es(o)))),d===0?0:r!==0&&r!==d&&(r&m)===0&&(m=d&-d,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:d}function rt(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Ut(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(){var s=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),s}function Vn(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function vt(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function An(s,r,o,c,d,m){var b=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var S=s.entanglements,k=s.expirationTimes,F=s.hiddenUpdates;for(o=b&~o;0<o;){var W=31-At(o),Z=1<<W;S[W]=0,k[W]=-1;var H=F[W];if(H!==null)for(F[W]=null,W=0;W<H.length;W++){var Y=H[W];Y!==null&&(Y.lane&=-536870913)}o&=~Z}c!==0&&fs(s,c,0),m!==0&&d===0&&s.tag!==0&&(s.suspendedLanes|=m&~(b&~r))}function fs(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-At(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function mn(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var c=31-At(o),d=1<<c;d&r|s[c]&r&&(s[c]|=r),o&=~d}}function pn(s,r){var o=r&-r;return o=(o&42)!==0?1:ri(o),(o&(s.suspendedLanes|r))!==0?0:o}function ri(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ql(){var s=ie.p;return s!==0?s:(s=window.event,s===void 0?32:uE(s.type))}function Vs(s,r){var o=ie.p;try{return ie.p=s,r()}finally{ie.p=o}}var Ls=Math.random().toString(36).slice(2),jt="__reactFiber$"+Ls,sn="__reactProps$"+Ls,ai="__reactContainer$"+Ls,xo="__reactEvents$"+Ls,rm="__reactListeners$"+Ls,Ju="__reactHandles$"+Ls,Zu="__reactResources$"+Ls,oi="__reactMarker$"+Ls;function Co(s){delete s[jt],delete s[sn],delete s[xo],delete s[rm],delete s[Ju]}function li(s){var r=s[jt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[ai]||o[jt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=$b(s);s!==null;){if(o=s[jt])return o;s=$b(s)}return r}s=o,o=s.parentNode}return null}function ms(s){if(s=s[jt]||s[ai]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function ts(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ci(s){var r=s[Zu];return r||(r=s[Zu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(s){s[oi]=!0}var Wl=new Set,Xl={};function ui(s,r){hi(s,r),hi(s+"Capture",r)}function hi(s,r){for(Xl[s]=r,s=0;s<r.length;s++)Wl.add(r[s])}var Jl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zl={},ec={};function eh(s){return it.call(ec,s)?!0:it.call(Zl,s)?!1:Jl.test(s)?ec[s]=!0:(Zl[s]=!0,!1)}function Ro(s,r,o){if(eh(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function ns(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function Bt(s,r,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+c)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ar(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tc(s,r,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,m=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function lt(s){if(!s._valueTracker){var r=Ar(s)?"checked":"value";s._valueTracker=tc(s,r,""+s[r])}}function Va(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return s&&(c=Ar(s)?s.checked?"true":"false":s.value),s=c,s!==o?(r.setValue(s),!0):!1}function di(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var La=/[\n"\\]/g;function Bn(s){return s.replace(La,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Io(s,r,o,c,d,m,b,S){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),r!=null?b==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+rn(r)):s.value!==""+rn(r)&&(s.value=""+rn(r)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),r!=null?nc(s,b,rn(r)):o!=null?nc(s,b,rn(o)):c!=null&&s.removeAttribute("value"),d==null&&m!=null&&(s.defaultChecked=!!m),d!=null&&(s.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+rn(S):s.removeAttribute("name")}function th(s,r,o,c,d,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){lt(s);return}o=o!=null?""+rn(o):"",r=r!=null?""+rn(r):o,S||r===s.value||(s.value=r),s.defaultValue=r}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=S?s.checked:!!c,s.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b),lt(s)}function nc(s,r,o){r==="number"&&di(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function xr(s,r,o,c){if(s=s.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=r.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&c&&(s[o].defaultSelected=!0)}else{for(o=""+rn(o),r=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,c&&(s[d].defaultSelected=!0);return}r!==null||s[d].disabled||(r=s[d])}r!==null&&(r.selected=!0)}}function nh(s,r,o){if(r!=null&&(r=""+rn(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+rn(o):""}function Cr(s,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=rn(r),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),lt(s)}function Fn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var sh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(s,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,o):typeof o!="number"||o===0||sh.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function ic(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var d in r)c=r[d],r.hasOwnProperty(d)&&o[d]!==c&&sc(s,d,c)}else for(var m in r)r.hasOwnProperty(m)&&sc(s,m,r[m])}function No(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(s){return Rr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Us(){}var rc=null;function ps(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ir=null,fi=null;function Ua(s){var r=ms(s);if(r&&(s=r.stateNode)){var o=s[sn]||null;e:switch(s=r.stateNode,r.type){case"input":if(Io(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==s&&c.form===s.form){var d=c[sn]||null;if(!d)throw Error(i(90));Io(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===s.form&&Va(c)}break e;case"textarea":nh(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&xr(s,!!o.multiple,r,!1)}}}var Do=!1;function Nr(s,r,o){if(Do)return s(r,o);Do=!0;try{var c=s(r);return c}finally{if(Do=!1,(Ir!==null||fi!==null)&&(Xh(),Ir&&(r=Ir,s=fi,fi=Ir=null,Ua(r),s)))for(r=0;r<s.length;r++)Ua(s[r])}}function js(s,r){var o=s.stateNode;if(o===null)return null;var c=o[sn]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(gs)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){ja=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{ja=!1}var mi=null,ac=null,za=null;function oc(){if(za)return za;var s,r=ac,o=r.length,c,d="value"in mi?mi.value:mi.textContent,m=d.length;for(s=0;s<o&&r[s]===d[s];s++);var b=o-s;for(c=1;c<=b&&r[o-c]===d[m-c];c++);return za=d.slice(s,1<c?1-c:void 0)}function Ba(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ji(){return!0}function zs(){return!1}function _n(s){function r(o,c,d,m,b){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(o=s[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:zs,this.isPropagationStopped=zs,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=_n(zi),kr=_({},zi,{view:0,detail:0}),lc=_n(kr),Dr,Oo,gi,Mo=_({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Dr=s.screenX-gi.screenX,Oo=s.screenY-gi.screenY):Oo=Dr=0,gi=s),Dr)},movementY:function(s){return"movementY"in s?s.movementY:Oo}}),cc=_n(Mo),Fa=_({},Mo,{dataTransfer:0}),rh=_n(Fa),ah=_({},kr,{relatedTarget:0}),qa=_n(ah),uc=_({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=_n(uc),Po=_({},zi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lh=_n(Po),ch=_({},zi,{data:0}),_i=_n(ch),uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fh(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=dh[s])?!!r[s]:!1}function Or(){return fh}var Ln=_({},kr,{key:function(s){if(s.key){var r=uh[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ba(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(s){return s.type==="keypress"?Ba(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ba(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mh=_n(Ln),ph=_({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=_n(ph),h=_({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),y=_n(h),E=_({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=_n(E),j=_({},Mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),K=_n(j),le=_({},zi,{newState:0,oldState:0}),Pe=_n(le),Dt=[9,13,27,32],nt=gs&&"CompositionEvent"in window,xt=null;gs&&"documentMode"in document&&(xt=document.documentMode);var _s=gs&&"TextEvent"in window&&!xt,yi=gs&&(!nt||xt&&8<xt&&11>=xt),Bs=" ",Fs=!1;function Ha(s,r){switch(s){case"keyup":return Dt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function MC(s,r){switch(s){case"compositionend":return Vo(r);case"keypress":return r.which!==32?null:(Fs=!0,Bs);case"textInput":return s=r.data,s===Bs&&Fs?null:s;default:return null}}function PC(s,r){if(Lo)return s==="compositionend"||!nt&&Ha(s,r)?(s=oc(),za=ac=mi=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var VC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!VC[s.type]:r==="textarea"}function Jy(s,r,o,c){Ir?fi?fi.push(c):fi=[c]:Ir=c,r=id(r,"onChange"),0<r.length&&(o=new pi("onChange","change",null,o,c),s.push({event:o,listeners:r}))}var hc=null,dc=null;function LC(s){Mb(s,0)}function gh(s){var r=ts(s);if(Va(r))return s}function Zy(s,r){if(s==="change")return r}var ev=!1;if(gs){var am;if(gs){var om="oninput"in document;if(!om){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),om=typeof tv.oninput=="function"}am=om}else am=!1;ev=am&&(!document.documentMode||9<document.documentMode)}function nv(){hc&&(hc.detachEvent("onpropertychange",sv),dc=hc=null)}function sv(s){if(s.propertyName==="value"&&gh(dc)){var r=[];Jy(r,dc,s,ps(s)),Nr(LC,r)}}function UC(s,r,o){s==="focusin"?(nv(),hc=r,dc=o,hc.attachEvent("onpropertychange",sv)):s==="focusout"&&nv()}function jC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return gh(dc)}function zC(s,r){if(s==="click")return gh(r)}function BC(s,r){if(s==="input"||s==="change")return gh(r)}function FC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ss=typeof Object.is=="function"?Object.is:FC;function fc(s,r){if(ss(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!it.call(r,d)||!ss(s[d],r[d]))return!1}return!0}function iv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function rv(s,r){var o=iv(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=r&&c>=r)return{node:o,offset:r-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iv(o)}}function av(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?av(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function ov(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=di(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=di(s.document)}return r}function lm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var qC=gs&&"documentMode"in document&&11>=document.documentMode,Uo=null,cm=null,mc=null,um=!1;function lv(s,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;um||Uo==null||Uo!==di(c)||(c=Uo,"selectionStart"in c&&lm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),mc&&fc(mc,c)||(mc=c,c=id(cm,"onSelect"),0<c.length&&(r=new pi("onSelect","select",null,r,o),s.push({event:r,listeners:c}),r.target=Uo)))}function Ga(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var jo={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},hm={},cv={};gs&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Ka(s){if(hm[s])return hm[s];if(!jo[s])return s;var r=jo[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in cv)return hm[s]=r[o];return s}var uv=Ka("animationend"),hv=Ka("animationiteration"),dv=Ka("animationstart"),HC=Ka("transitionrun"),GC=Ka("transitionstart"),KC=Ka("transitioncancel"),fv=Ka("transitionend"),mv=new Map,dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dm.push("scrollEnd");function qs(s,r){mv.set(s,r),ui(r,[s])}var _h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ys=[],zo=0,fm=0;function yh(){for(var s=zo,r=fm=zo=0;r<s;){var o=ys[r];ys[r++]=null;var c=ys[r];ys[r++]=null;var d=ys[r];ys[r++]=null;var m=ys[r];if(ys[r++]=null,c!==null&&d!==null){var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}m!==0&&pv(o,d,m)}}function vh(s,r,o,c){ys[zo++]=s,ys[zo++]=r,ys[zo++]=o,ys[zo++]=c,fm|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function mm(s,r,o,c){return vh(s,r,o,c),bh(s)}function Ya(s,r){return vh(s,null,null,r),bh(s)}function pv(s,r,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var d=!1,m=s.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(d=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,d&&r!==null&&(d=31-At(o),s=m.hiddenUpdates,c=s[d],c===null?s[d]=[r]:c.push(r),r.lane=o|536870912),m):null}function bh(s){if(50<Vc)throw Vc=0,wp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Bo={};function YC(s,r,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(s,r,o,c){return new YC(s,r,o,c)}function pm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Fi(s,r){var o=s.alternate;return o===null?(o=is(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function gv(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Eh(s,r,o,c,d,m){var b=0;if(c=s,typeof s=="function")pm(s)&&(b=1);else if(typeof s=="string")b=JR(s,o,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=is(31,o,r,d),s.elementType=R,s.lanes=m,s;case q:return $a(o.children,d,m,r);case G:b=8,d|=24;break;case $:return s=is(12,o,r,d|2),s.elementType=$,s.lanes=m,s;case Me:return s=is(13,o,r,d),s.elementType=Me,s.lanes=m,s;case Ee:return s=is(19,o,r,d),s.elementType=Ee,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case re:b=10;break e;case ce:b=9;break e;case me:b=11;break e;case N:b=14;break e;case x:b=16,c=null;break e}b=29,o=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=is(b,o,r,d),r.elementType=s,r.type=c,r.lanes=m,r}function $a(s,r,o,c){return s=is(7,s,c,r),s.lanes=o,s}function gm(s,r,o){return s=is(6,s,null,r),s.lanes=o,s}function _v(s){var r=is(18,null,null,0);return r.stateNode=s,r}function _m(s,r,o){return r=is(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var yv=new WeakMap;function vs(s,r){if(typeof s=="object"&&s!==null){var o=yv.get(s);return o!==void 0?o:(r={value:s,source:r,stack:Sr(r)},yv.set(s,r),r)}return{value:s,source:r,stack:Sr(r)}}var Fo=[],qo=0,Th=null,pc=0,bs=[],Es=0,Mr=null,vi=1,bi="";function qi(s,r){Fo[qo++]=pc,Fo[qo++]=Th,Th=s,pc=r}function vv(s,r,o){bs[Es++]=vi,bs[Es++]=bi,bs[Es++]=Mr,Mr=s;var c=vi;s=bi;var d=32-At(c)-1;c&=~(1<<d),o+=1;var m=32-At(r)+d;if(30<m){var b=d-d%5;m=(c&(1<<b)-1).toString(32),c>>=b,d-=b,vi=1<<32-At(r)+d|o<<d|c,bi=m+s}else vi=1<<m|o<<d|c,bi=s}function ym(s){s.return!==null&&(qi(s,1),vv(s,1,0))}function vm(s){for(;s===Th;)Th=Fo[--qo],Fo[qo]=null,pc=Fo[--qo],Fo[qo]=null;for(;s===Mr;)Mr=bs[--Es],bs[Es]=null,bi=bs[--Es],bs[Es]=null,vi=bs[--Es],bs[Es]=null}function bv(s,r){bs[Es++]=vi,bs[Es++]=bi,bs[Es++]=Mr,vi=r.id,bi=r.overflow,Mr=s}var yn=null,bt=null,Ye=!1,Pr=null,Ts=!1,bm=Error(i(519));function Vr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(vs(r,s)),bm}function Ev(s){var r=s.stateNode,o=s.type,c=s.memoizedProps;switch(r[jt]=s,r[sn]=c,o){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(o=0;o<Uc.length;o++)ze(Uc[o],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ze("invalid",r),th(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",r);break;case"textarea":ze("invalid",r),Cr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||Ub(r.textContent,o)?(c.popover!=null&&(ze("beforetoggle",r),ze("toggle",r)),c.onScroll!=null&&ze("scroll",r),c.onScrollEnd!=null&&ze("scrollend",r),c.onClick!=null&&(r.onclick=Us),r=!0):r=!1,r||Vr(s,!0)}function Tv(s){for(yn=s.return;yn;)switch(yn.tag){case 5:case 31:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:yn=yn.return}}function Ho(s){if(s!==yn)return!1;if(!Ye)return Tv(s),Ye=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Up(s.type,s.memoizedProps)),o=!o),o&&bt&&Vr(s),Tv(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=Yb(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=Yb(s)}else r===27?(r=bt,Wr(s.type)?(s=qp,qp=null,bt=s):bt=r):bt=yn?Ss(s.stateNode.nextSibling):null;return!0}function Qa(){bt=yn=null,Ye=!1}function Em(){var s=Pr;return s!==null&&(Kn===null?Kn=s:Kn.push.apply(Kn,s),Pr=null),s}function gc(s){Pr===null?Pr=[s]:Pr.push(s)}var Tm=D(null),Wa=null,Hi=null;function Lr(s,r,o){Q(Tm,r._currentValue),r._currentValue=o}function Gi(s){s._currentValue=Tm.current,X(Tm)}function wm(s,r,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===o)break;s=s.return}}function Sm(s,r,o,c){var d=s.child;for(d!==null&&(d.return=s);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=d;for(var k=0;k<r.length;k++)if(S.context===r[k]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),wm(m.return,o,s),c||(b=null);break e}m=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),wm(b,o,s),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===s){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Go(s,r,o,c){s=null;for(var d=r,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=d.type;ss(d.pendingProps.value,b.value)||(s!==null?s.push(S):s=[S])}}else if(d===ve.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(s!==null?s.push(qc):s=[qc])}d=d.return}s!==null&&Sm(r,s,o,c),r.flags|=262144}function wh(s){for(s=s.firstContext;s!==null;){if(!ss(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xa(s){Wa=s,Hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vn(s){return wv(Wa,s)}function Sh(s,r){return Wa===null&&Xa(s),wv(s,r)}function wv(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Hi===null){if(s===null)throw Error(i(308));Hi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Hi=Hi.next=r;return o}var $C=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},QC=n.unstable_scheduleCallback,WC=n.unstable_NormalPriority,Ft={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Am(){return{controller:new $C,data:new Map,refCount:0}}function _c(s){s.refCount--,s.refCount===0&&QC(WC,function(){s.controller.abort()})}var yc=null,xm=0,Ko=0,Yo=null;function XC(s,r){if(yc===null){var o=yc=[];xm=0,Ko=Ip(),Yo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return xm++,r.then(Sv,Sv),r}function Sv(){if(--xm===0&&yc!==null){Yo!==null&&(Yo.status="fulfilled");var s=yc;yc=null,Ko=0,Yo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function JC(s,r){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var Av=z.S;z.S=function(s,r){lb=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&XC(s,r),Av!==null&&Av(s,r)};var Ja=D(null);function Cm(){var s=Ja.current;return s!==null?s:_t.pooledCache}function Ah(s,r){r===null?Q(Ja,Ja.current):Q(Ja,r.pool)}function xv(){var s=Cm();return s===null?null:{parent:Ft._currentValue,pool:s}}var $o=Error(i(460)),Rm=Error(i(474)),xh=Error(i(542)),Ch={then:function(){}};function Cv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Rv(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(Us,Us),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Nv(s),s;default:if(typeof r.status=="string")r.then(Us,Us);else{if(s=_t,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=c}},function(c){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Nv(s),s}throw eo=r,$o}}function Za(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(eo=o,$o):o}}var eo=null;function Iv(){if(eo===null)throw Error(i(459));var s=eo;return eo=null,s}function Nv(s){if(s===$o||s===xh)throw Error(i(483))}var Qo=null,vc=0;function Rh(s){var r=vc;return vc+=1,Qo===null&&(Qo=[]),Rv(Qo,s,r)}function bc(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Ih(s,r){throw r.$$typeof===w?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function kv(s){function r(U,M){if(s){var B=U.deletions;B===null?(U.deletions=[M],U.flags|=16):B.push(M)}}function o(U,M){if(!s)return null;for(;M!==null;)r(U,M),M=M.sibling;return null}function c(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function d(U,M){return U=Fi(U,M),U.index=0,U.sibling=null,U}function m(U,M,B){return U.index=B,s?(B=U.alternate,B!==null?(B=B.index,B<M?(U.flags|=67108866,M):B):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function b(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function S(U,M,B,J){return M===null||M.tag!==6?(M=gm(B,U.mode,J),M.return=U,M):(M=d(M,B),M.return=U,M)}function k(U,M,B,J){var Te=B.type;return Te===q?W(U,M,B.props.children,J,B.key):M!==null&&(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Za(Te)===M.type)?(M=d(M,B.props),bc(M,B),M.return=U,M):(M=Eh(B.type,B.key,B.props,null,U.mode,J),bc(M,B),M.return=U,M)}function F(U,M,B,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=_m(B,U.mode,J),M.return=U,M):(M=d(M,B.children||[]),M.return=U,M)}function W(U,M,B,J,Te){return M===null||M.tag!==7?(M=$a(B,U.mode,J,Te),M.return=U,M):(M=d(M,B),M.return=U,M)}function Z(U,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=gm(""+M,U.mode,B),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case I:return B=Eh(M.type,M.key,M.props,null,U.mode,B),bc(B,M),B.return=U,B;case P:return M=_m(M,U.mode,B),M.return=U,M;case x:return M=Za(M),Z(U,M,B)}if(Ze(M)||L(M))return M=$a(M,U.mode,B,null),M.return=U,M;if(typeof M.then=="function")return Z(U,Rh(M),B);if(M.$$typeof===re)return Z(U,Sh(U,M),B);Ih(U,M)}return null}function H(U,M,B,J){var Te=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Te!==null?null:S(U,M,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return B.key===Te?k(U,M,B,J):null;case P:return B.key===Te?F(U,M,B,J):null;case x:return B=Za(B),H(U,M,B,J)}if(Ze(B)||L(B))return Te!==null?null:W(U,M,B,J,null);if(typeof B.then=="function")return H(U,M,Rh(B),J);if(B.$$typeof===re)return H(U,M,Sh(U,B),J);Ih(U,B)}return null}function Y(U,M,B,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(B)||null,S(M,U,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return U=U.get(J.key===null?B:J.key)||null,k(M,U,J,Te);case P:return U=U.get(J.key===null?B:J.key)||null,F(M,U,J,Te);case x:return J=Za(J),Y(U,M,B,J,Te)}if(Ze(J)||L(J))return U=U.get(B)||null,W(M,U,J,Te,null);if(typeof J.then=="function")return Y(U,M,B,Rh(J),Te);if(J.$$typeof===re)return Y(U,M,B,Sh(M,J),Te);Ih(M,J)}return null}function pe(U,M,B,J){for(var Te=null,et=null,ye=M,Le=M=0,He=null;ye!==null&&Le<B.length;Le++){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var tt=H(U,ye,B[Le],J);if(tt===null){ye===null&&(ye=He);break}s&&ye&&tt.alternate===null&&r(U,ye),M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt,ye=He}if(Le===B.length)return o(U,ye),Ye&&qi(U,Le),Te;if(ye===null){for(;Le<B.length;Le++)ye=Z(U,B[Le],J),ye!==null&&(M=m(ye,M,Le),et===null?Te=ye:et.sibling=ye,et=ye);return Ye&&qi(U,Le),Te}for(ye=c(ye);Le<B.length;Le++)He=Y(ye,U,Le,B[Le],J),He!==null&&(s&&He.alternate!==null&&ye.delete(He.key===null?Le:He.key),M=m(He,M,Le),et===null?Te=He:et.sibling=He,et=He);return s&&ye.forEach(function(ta){return r(U,ta)}),Ye&&qi(U,Le),Te}function Ae(U,M,B,J){if(B==null)throw Error(i(151));for(var Te=null,et=null,ye=M,Le=M=0,He=null,tt=B.next();ye!==null&&!tt.done;Le++,tt=B.next()){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var ta=H(U,ye,tt.value,J);if(ta===null){ye===null&&(ye=He);break}s&&ye&&ta.alternate===null&&r(U,ye),M=m(ta,M,Le),et===null?Te=ta:et.sibling=ta,et=ta,ye=He}if(tt.done)return o(U,ye),Ye&&qi(U,Le),Te;if(ye===null){for(;!tt.done;Le++,tt=B.next())tt=Z(U,tt.value,J),tt!==null&&(M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt);return Ye&&qi(U,Le),Te}for(ye=c(ye);!tt.done;Le++,tt=B.next())tt=Y(ye,U,Le,tt.value,J),tt!==null&&(s&&tt.alternate!==null&&ye.delete(tt.key===null?Le:tt.key),M=m(tt,M,Le),et===null?Te=tt:et.sibling=tt,et=tt);return s&&ye.forEach(function(cI){return r(U,cI)}),Ye&&qi(U,Le),Te}function mt(U,M,B,J){if(typeof B=="object"&&B!==null&&B.type===q&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case I:e:{for(var Te=B.key;M!==null;){if(M.key===Te){if(Te=B.type,Te===q){if(M.tag===7){o(U,M.sibling),J=d(M,B.props.children),J.return=U,U=J;break e}}else if(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&Za(Te)===M.type){o(U,M.sibling),J=d(M,B.props),bc(J,B),J.return=U,U=J;break e}o(U,M);break}else r(U,M);M=M.sibling}B.type===q?(J=$a(B.props.children,U.mode,J,B.key),J.return=U,U=J):(J=Eh(B.type,B.key,B.props,null,U.mode,J),bc(J,B),J.return=U,U=J)}return b(U);case P:e:{for(Te=B.key;M!==null;){if(M.key===Te)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){o(U,M.sibling),J=d(M,B.children||[]),J.return=U,U=J;break e}else{o(U,M);break}else r(U,M);M=M.sibling}J=_m(B,U.mode,J),J.return=U,U=J}return b(U);case x:return B=Za(B),mt(U,M,B,J)}if(Ze(B))return pe(U,M,B,J);if(L(B)){if(Te=L(B),typeof Te!="function")throw Error(i(150));return B=Te.call(B),Ae(U,M,B,J)}if(typeof B.then=="function")return mt(U,M,Rh(B),J);if(B.$$typeof===re)return mt(U,M,Sh(U,B),J);Ih(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(o(U,M.sibling),J=d(M,B),J.return=U,U=J):(o(U,M),J=gm(B,U.mode,J),J.return=U,U=J),b(U)):o(U,M)}return function(U,M,B,J){try{vc=0;var Te=mt(U,M,B,J);return Qo=null,Te}catch(ye){if(ye===$o||ye===xh)throw ye;var et=is(29,ye,null,U.mode);return et.lanes=J,et.return=U,et}finally{}}}var to=kv(!0),Dv=kv(!1),Ur=!1;function Im(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function jr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zr(s,r,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,r=bh(s),pv(s,null,o),r}return vh(s,c,r,o),bh(s)}function Ec(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,mn(s,o)}}function km(s,r){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?d=m=r:m=m.next=r}else d=m=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var Dm=!1;function Tc(){if(Dm){var s=Yo;if(s!==null)throw s}}function wc(s,r,o,c){Dm=!1;var d=s.updateQueue;Ur=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var k=S,F=k.next;k.next=null,b===null?m=F:b.next=F,b=k;var W=s.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==b&&(S===null?W.firstBaseUpdate=F:S.next=F,W.lastBaseUpdate=k))}if(m!==null){var Z=d.baseState;b=0,W=F=k=null,S=m;do{var H=S.lane&-536870913,Y=H!==S.lane;if(Y?(qe&H)===H:(c&H)===H){H!==0&&H===Ko&&(Dm=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=s,Ae=S;H=r;var mt=o;switch(Ae.tag){case 1:if(pe=Ae.payload,typeof pe=="function"){Z=pe.call(mt,Z,H);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ae.payload,H=typeof pe=="function"?pe.call(mt,Z,H):pe,H==null)break e;Z=_({},Z,H);break e;case 2:Ur=!0}}H=S.callback,H!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(F=W=Y,k=Z):W=W.next=Y,b|=H;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);W===null&&(k=Z),d.baseState=k,d.firstBaseUpdate=F,d.lastBaseUpdate=W,m===null&&(d.shared.lanes=0),Gr|=b,s.lanes=b,s.memoizedState=Z}}function Ov(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Mv(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Ov(o[s],r)}var Wo=D(null),Nh=D(0);function Pv(s,r){s=er,Q(Nh,s),Q(Wo,r),er=s|r.baseLanes}function Om(){Q(Nh,er),Q(Wo,Wo.current)}function Mm(){er=Nh.current,X(Wo),X(Nh)}var rs=D(null),ws=null;function Br(s){var r=s.alternate;Q(Ot,Ot.current&1),Q(rs,s),ws===null&&(r===null||Wo.current!==null||r.memoizedState!==null)&&(ws=s)}function Pm(s){Q(Ot,Ot.current),Q(rs,s),ws===null&&(ws=s)}function Vv(s){s.tag===22?(Q(Ot,Ot.current),Q(rs,s),ws===null&&(ws=s)):Fr()}function Fr(){Q(Ot,Ot.current),Q(rs,rs.current)}function as(s){X(rs),ws===s&&(ws=null),X(Ot)}var Ot=D(0);function kh(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Bp(o)||Fp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,Ve=null,dt=null,qt=null,Dh=!1,Xo=!1,no=!1,Oh=0,Sc=0,Jo=null,ZC=0;function It(){throw Error(i(321))}function Vm(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!ss(s[o],r[o]))return!1;return!0}function Lm(s,r,o,c,d,m){return Ki=m,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=s===null||s.memoizedState===null?v0:Jm,no=!1,m=o(c,d),no=!1,Xo&&(m=Uv(r,o,c,d)),Lv(s),m}function Lv(s){z.H=Cc;var r=dt!==null&&dt.next!==null;if(Ki=0,qt=dt=Ve=null,Dh=!1,Sc=0,Jo=null,r)throw Error(i(300));s===null||Ht||(s=s.dependencies,s!==null&&wh(s)&&(Ht=!0))}function Uv(s,r,o,c){Ve=s;var d=0;do{if(Xo&&(Jo=null),Sc=0,Xo=!1,25<=d)throw Error(i(301));if(d+=1,qt=dt=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}z.H=b0,m=r(o,c)}while(Xo);return m}function eR(){var s=z.H,r=s.useState()[0];return r=typeof r.then=="function"?Ac(r):r,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(Ve.flags|=1024),r}function Um(){var s=Oh!==0;return Oh=0,s}function jm(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function zm(s){if(Dh){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Dh=!1}Ki=0,qt=dt=Ve=null,Xo=!1,Sc=Oh=0,Jo=null}function Un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ve.memoizedState=qt=s:qt=qt.next=s,qt}function Mt(){if(dt===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var r=qt===null?Ve.memoizedState:qt.next;if(r!==null)qt=r,dt=s;else{if(s===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},qt===null?Ve.memoizedState=qt=s:qt=qt.next=s}return qt}function Mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(s){var r=Sc;return Sc+=1,Jo===null&&(Jo=[]),s=Rv(Jo,s,r),r=Ve,(qt===null?r.memoizedState:qt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?v0:Jm),s}function Ph(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ac(s);if(s.$$typeof===re)return vn(s)}throw Error(i(438,String(s)))}function Bm(s){var r=null,o=Ve.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Mh(),Ve.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),c=0;c<s;c++)o[c]=V;return r.index++,o}function Yi(s,r){return typeof r=="function"?r(s):r}function Vh(s){var r=Mt();return Fm(r,dt,s)}function Fm(s,r,o){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=s.baseQueue,m=c.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}r.baseQueue=d=m,c.pending=null}if(m=s.baseState,d===null)s.memoizedState=m;else{r=d.next;var S=b=null,k=null,F=r,W=!1;do{var Z=F.lane&-536870913;if(Z!==F.lane?(qe&Z)===Z:(Ki&Z)===Z){var H=F.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Z===Ko&&(W=!0);else if((Ki&H)===H){F=F.next,H===Ko&&(W=!0);continue}else Z={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=Z,b=m):k=k.next=Z,Ve.lanes|=H,Gr|=H;Z=F.action,no&&o(m,Z),m=F.hasEagerState?F.eagerState:o(m,Z)}else H={lane:Z,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=H,b=m):k=k.next=H,Ve.lanes|=Z,Gr|=Z;F=F.next}while(F!==null&&F!==r);if(k===null?b=m:k.next=S,!ss(m,s.memoizedState)&&(Ht=!0,W&&(o=Yo,o!==null)))throw o;s.memoizedState=m,s.baseState=b,s.baseQueue=k,c.lastRenderedState=m}return d===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function qm(s){var r=Mt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var c=o.dispatch,d=o.pending,m=r.memoizedState;if(d!==null){o.pending=null;var b=d=d.next;do m=s(m,b.action),b=b.next;while(b!==d);ss(m,r.memoizedState)||(Ht=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function jv(s,r,o){var c=Ve,d=Mt(),m=Ye;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!ss((dt||d).memoizedState,o);if(b&&(d.memoizedState=o,Ht=!0),d=d.queue,Km(Fv.bind(null,c,d,s),[s]),d.getSnapshot!==r||b||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,Zo(9,{destroy:void 0},Bv.bind(null,c,d,o,r),null),_t===null)throw Error(i(349));m||(Ki&127)!==0||zv(c,r,o)}return o}function zv(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Ve.updateQueue,r===null?(r=Mh(),Ve.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function Bv(s,r,o,c){r.value=o,r.getSnapshot=c,qv(r)&&Hv(s)}function Fv(s,r,o){return o(function(){qv(r)&&Hv(s)})}function qv(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!ss(s,o)}catch{return!0}}function Hv(s){var r=Ya(s,2);r!==null&&Yn(r,s,2)}function Hm(s){var r=Un();if(typeof s=="function"){var o=s;if(s=o(),no){Pn(!0);try{o()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:s},r}function Gv(s,r,o,c){return s.baseState=o,Fm(s,dt,typeof c=="function"?c:Yi)}function tR(s,r,o,c,d){if(jh(s))throw Error(i(485));if(s=r.action,s!==null){var m={payload:d,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};z.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Kv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Kv(s,r){var o=r.action,c=r.payload,d=s.state;if(r.isTransition){var m=z.T,b={};z.T=b;try{var S=o(d,c),k=z.S;k!==null&&k(b,S),Yv(s,r,S)}catch(F){Gm(s,r,F)}finally{m!==null&&b.types!==null&&(m.types=b.types),z.T=m}}else try{m=o(d,c),Yv(s,r,m)}catch(F){Gm(s,r,F)}}function Yv(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){$v(s,r,c)},function(c){return Gm(s,r,c)}):$v(s,r,o)}function $v(s,r,o){r.status="fulfilled",r.value=o,Qv(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,Kv(s,o)))}function Gm(s,r,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Qv(r),r=r.next;while(r!==c)}s.action=null}function Qv(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Wv(s,r){return r}function Xv(s,r){if(Ye){var o=_t.formState;if(o!==null){e:{var c=Ve;if(Ye){if(bt){t:{for(var d=bt,m=Ts;d.nodeType!==8;){if(!m){d=null;break t}if(d=Ss(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){bt=Ss(d.nextSibling),c=d.data==="F!";break e}}Vr(c)}c=!1}c&&(r=o[0])}}return o=Un(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wv,lastRenderedState:r},o.queue=c,o=g0.bind(null,Ve,c),c.dispatch=o,c=Hm(!1),m=Xm.bind(null,Ve,!1,c.queue),c=Un(),d={state:r,dispatch:null,action:s,pending:null},c.queue=d,o=tR.bind(null,Ve,d,m,o),d.dispatch=o,c.memoizedState=s,[r,o,!1]}function Jv(s){var r=Mt();return Zv(r,dt,s)}function Zv(s,r,o){if(r=Fm(s,r,Wv)[0],s=Vh(Yi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ac(r)}catch(b){throw b===$o?xh:b}else c=r;r=Mt();var d=r.queue,m=d.dispatch;return o!==r.memoizedState&&(Ve.flags|=2048,Zo(9,{destroy:void 0},nR.bind(null,d,o),null)),[c,m,s]}function nR(s,r){s.action=r}function e0(s){var r=Mt(),o=dt;if(o!==null)return Zv(r,o,s);Mt(),r=r.memoizedState,o=Mt();var c=o.queue.dispatch;return o.memoizedState=s,[r,c,!1]}function Zo(s,r,o,c){return s={tag:s,create:o,deps:c,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=Mh(),Ve.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,r.lastEffect=s),s}function t0(){return Mt().memoizedState}function Lh(s,r,o,c){var d=Un();Ve.flags|=s,d.memoizedState=Zo(1|r,{destroy:void 0},o,c===void 0?null:c)}function Uh(s,r,o,c){var d=Mt();c=c===void 0?null:c;var m=d.memoizedState.inst;dt!==null&&c!==null&&Vm(c,dt.memoizedState.deps)?d.memoizedState=Zo(r,m,o,c):(Ve.flags|=s,d.memoizedState=Zo(1|r,m,o,c))}function n0(s,r){Lh(8390656,8,s,r)}function Km(s,r){Uh(2048,8,s,r)}function sR(s){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=Mh(),Ve.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function s0(s){var r=Mt().memoizedState;return sR({ref:r,nextImpl:s}),function(){if((st&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function i0(s,r){return Uh(4,2,s,r)}function r0(s,r){return Uh(4,4,s,r)}function a0(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function o0(s,r,o){o=o!=null?o.concat([s]):null,Uh(4,4,a0.bind(null,r,s),o)}function Ym(){}function l0(s,r){var o=Mt();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Vm(r,c[1])?c[0]:(o.memoizedState=[s,r],s)}function c0(s,r){var o=Mt();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Vm(r,c[1]))return c[0];if(c=s(),no){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[c,r],c}function $m(s,r,o){return o===void 0||(Ki&1073741824)!==0&&(qe&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=ub(),Ve.lanes|=s,Gr|=s,o)}function u0(s,r,o,c){return ss(o,r)?o:Wo.current!==null?(s=$m(s,o,c),ss(s,r)||(Ht=!0),s):(Ki&42)===0||(Ki&1073741824)!==0&&(qe&261930)===0?(Ht=!0,s.memoizedState=o):(s=ub(),Ve.lanes|=s,Gr|=s,r)}function h0(s,r,o,c,d){var m=ie.p;ie.p=m!==0&&8>m?m:8;var b=z.T,S={};z.T=S,Xm(s,!1,r,o);try{var k=d(),F=z.S;if(F!==null&&F(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=JC(k,c);xc(s,r,W,cs(s))}else xc(s,r,c,cs(s))}catch(Z){xc(s,r,{then:function(){},status:"rejected",reason:Z},cs())}finally{ie.p=m,b!==null&&S.types!==null&&(b.types=S.types),z.T=b}}function iR(){}function Qm(s,r,o,c){if(s.tag!==5)throw Error(i(476));var d=d0(s).queue;h0(s,d,r,ne,o===null?iR:function(){return f0(s),o(c)})}function d0(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ne},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function f0(s){var r=d0(s);r.next===null&&(r=s.alternate.memoizedState),xc(s,r.next.queue,{},cs())}function Wm(){return vn(qc)}function m0(){return Mt().memoizedState}function p0(){return Mt().memoizedState}function rR(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=cs();s=jr(o);var c=zr(r,s,o);c!==null&&(Yn(c,r,o),Ec(c,r,o)),r={cache:Am()},s.payload=r;return}r=r.return}}function aR(s,r,o){var c=cs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jh(s)?_0(r,o):(o=mm(s,r,o,c),o!==null&&(Yn(o,s,c),y0(o,r,c)))}function g0(s,r,o){var c=cs();xc(s,r,o,c)}function xc(s,r,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jh(s))_0(r,d);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(d.hasEagerState=!0,d.eagerState=S,ss(S,b))return vh(s,r,d,0),_t===null&&yh(),!1}catch{}finally{}if(o=mm(s,r,d,c),o!==null)return Yn(o,s,c),y0(o,r,c),!0}return!1}function Xm(s,r,o,c){if(c={lane:2,revertLane:Ip(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},jh(s)){if(r)throw Error(i(479))}else r=mm(s,o,c,2),r!==null&&Yn(r,s,2)}function jh(s){var r=s.alternate;return s===Ve||r!==null&&r===Ve}function _0(s,r){Xo=Dh=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function y0(s,r,o){if((o&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,mn(s,o)}}var Cc={readContext:vn,use:Ph,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Cc.useEffectEvent=It;var v0={readContext:vn,use:Ph,useCallback:function(s,r){return Un().memoizedState=[s,r===void 0?null:r],s},useContext:vn,useEffect:n0,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,Lh(4194308,4,a0.bind(null,r,s),o)},useLayoutEffect:function(s,r){return Lh(4194308,4,s,r)},useInsertionEffect:function(s,r){Lh(4,2,s,r)},useMemo:function(s,r){var o=Un();r=r===void 0?null:r;var c=s();if(no){Pn(!0);try{s()}finally{Pn(!1)}}return o.memoizedState=[c,r],c},useReducer:function(s,r,o){var c=Un();if(o!==void 0){var d=o(r);if(no){Pn(!0);try{o(r)}finally{Pn(!1)}}}else d=r;return c.memoizedState=c.baseState=d,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},c.queue=s,s=s.dispatch=aR.bind(null,Ve,s),[c.memoizedState,s]},useRef:function(s){var r=Un();return s={current:s},r.memoizedState=s},useState:function(s){s=Hm(s);var r=s.queue,o=g0.bind(null,Ve,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:Ym,useDeferredValue:function(s,r){var o=Un();return $m(o,s,r)},useTransition:function(){var s=Hm(!1);return s=h0.bind(null,Ve,s.queue,!0,!1),Un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var c=Ve,d=Un();if(Ye){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),_t===null)throw Error(i(349));(qe&127)!==0||zv(c,r,o)}d.memoizedState=o;var m={value:o,getSnapshot:r};return d.queue=m,n0(Fv.bind(null,c,m,s),[s]),c.flags|=2048,Zo(9,{destroy:void 0},Bv.bind(null,c,m,o,r),null),o},useId:function(){var s=Un(),r=_t.identifierPrefix;if(Ye){var o=bi,c=vi;o=(c&~(1<<32-At(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Oh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=ZC++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Wm,useFormState:Xv,useActionState:Xv,useOptimistic:function(s){var r=Un();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Xm.bind(null,Ve,!0,o),o.dispatch=r,[s,r]},useMemoCache:Bm,useCacheRefresh:function(){return Un().memoizedState=rR.bind(null,Ve)},useEffectEvent:function(s){var r=Un(),o={impl:s};return r.memoizedState=o,function(){if((st&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Jm={readContext:vn,use:Ph,useCallback:l0,useContext:vn,useEffect:Km,useImperativeHandle:o0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:c0,useReducer:Vh,useRef:t0,useState:function(){return Vh(Yi)},useDebugValue:Ym,useDeferredValue:function(s,r){var o=Mt();return u0(o,dt.memoizedState,s,r)},useTransition:function(){var s=Vh(Yi)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:Ac(s),r]},useSyncExternalStore:jv,useId:m0,useHostTransitionStatus:Wm,useFormState:Jv,useActionState:Jv,useOptimistic:function(s,r){var o=Mt();return Gv(o,dt,s,r)},useMemoCache:Bm,useCacheRefresh:p0};Jm.useEffectEvent=s0;var b0={readContext:vn,use:Ph,useCallback:l0,useContext:vn,useEffect:Km,useImperativeHandle:o0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:c0,useReducer:qm,useRef:t0,useState:function(){return qm(Yi)},useDebugValue:Ym,useDeferredValue:function(s,r){var o=Mt();return dt===null?$m(o,s,r):u0(o,dt.memoizedState,s,r)},useTransition:function(){var s=qm(Yi)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:Ac(s),r]},useSyncExternalStore:jv,useId:m0,useHostTransitionStatus:Wm,useFormState:e0,useActionState:e0,useOptimistic:function(s,r){var o=Mt();return dt!==null?Gv(o,dt,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Bm,useCacheRefresh:p0};b0.useEffectEvent=s0;function Zm(s,r,o,c){r=s.memoizedState,o=o(c,r),o=o==null?r:_({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var ep={enqueueSetState:function(s,r,o){s=s._reactInternals;var c=cs(),d=jr(c);d.payload=r,o!=null&&(d.callback=o),r=zr(s,d,c),r!==null&&(Yn(r,s,c),Ec(r,s,c))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var c=cs(),d=jr(c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=zr(s,d,c),r!==null&&(Yn(r,s,c),Ec(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=cs(),c=jr(o);c.tag=2,r!=null&&(c.callback=r),r=zr(s,c,o),r!==null&&(Yn(r,s,o),Ec(r,s,o))}};function E0(s,r,o,c,d,m,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!fc(o,c)||!fc(d,m):!0}function T0(s,r,o,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==s&&ep.enqueueReplaceState(r,r.state,null)}function so(s,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(s=s.defaultProps){o===r&&(o=_({},o));for(var d in s)o[d]===void 0&&(o[d]=s[d])}return o}function w0(s){_h(s)}function S0(s){console.error(s)}function A0(s){_h(s)}function zh(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function x0(s,r,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function tp(s,r,o){return o=jr(o),o.tag=3,o.payload={element:null},o.callback=function(){zh(s,r)},o}function C0(s){return s=jr(s),s.tag=3,s}function R0(s,r,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=c.value;s.payload=function(){return d(m)},s.callback=function(){x0(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){x0(r,o,c),typeof d!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function oR(s,r,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Go(r,o,d,!0),o=rs.current,o!==null){switch(o.tag){case 31:case 13:return ws===null?Jh():o.alternate===null&&Nt===0&&(Nt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===Ch?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),xp(s,c,d)),!1;case 22:return o.flags|=65536,c===Ch?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),xp(s,c,d)),!1}throw Error(i(435,o.tag))}return xp(s,c,d),Jh(),!1}if(Ye)return r=rs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,c!==bm&&(s=Error(i(422),{cause:c}),gc(vs(s,o)))):(c!==bm&&(r=Error(i(423),{cause:c}),gc(vs(r,o))),s=s.current.alternate,s.flags|=65536,d&=-d,s.lanes|=d,c=vs(c,o),d=tp(s.stateNode,c,d),km(s,d),Nt!==4&&(Nt=2)),!1;var m=Error(i(520),{cause:c});if(m=vs(m,o),Pc===null?Pc=[m]:Pc.push(m),Nt!==4&&(Nt=2),r===null)return!0;c=vs(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=d&-d,o.lanes|=s,s=tp(o.stateNode,c,s),km(o,s),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Kr===null||!Kr.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=C0(d),R0(d,s,o,c),km(o,d),!1}o=o.return}while(o!==null);return!1}var np=Error(i(461)),Ht=!1;function bn(s,r,o,c){r.child=s===null?Dv(r,null,o,c):to(r,s.child,o,c)}function I0(s,r,o,c,d){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return Xa(r),c=Lm(s,r,o,b,m,d),S=Um(),s!==null&&!Ht?(jm(s,r,d),$i(s,r,d)):(Ye&&S&&ym(r),r.flags|=1,bn(s,r,c,d),r.child)}function N0(s,r,o,c,d){if(s===null){var m=o.type;return typeof m=="function"&&!pm(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,k0(s,r,m,c,d)):(s=Eh(o.type,null,c,r,r.mode,d),s.ref=r.ref,s.return=r,r.child=s)}if(m=s.child,!up(s,d)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:fc,o(b,c)&&s.ref===r.ref)return $i(s,r,d)}return r.flags|=1,s=Fi(m,c),s.ref=r.ref,s.return=r,r.child=s}function k0(s,r,o,c,d){if(s!==null){var m=s.memoizedProps;if(fc(m,c)&&s.ref===r.ref)if(Ht=!1,r.pendingProps=c=m,up(s,d))(s.flags&131072)!==0&&(Ht=!0);else return r.lanes=s.lanes,$i(s,r,d)}return sp(s,r,o,c,d)}function D0(s,r,o,c){var d=c.children,m=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,s!==null){for(c=r.child=s.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~m}else c=0,r.child=null;return O0(s,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ah(r,m!==null?m.cachePool:null),m!==null?Pv(r,m):Om(),Vv(r);else return c=r.lanes=536870912,O0(s,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Ah(r,m.cachePool),Pv(r,m),Fr(),r.memoizedState=null):(s!==null&&Ah(r,null),Om(),Fr());return bn(s,r,d,o),r.child}function Rc(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function O0(s,r,o,c,d){var m=Cm();return m=m===null?null:{parent:Ft._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},s!==null&&Ah(r,null),Om(),Vv(r),s!==null&&Go(s,r,c,!0),r.childLanes=d,null}function Bh(s,r){return r=qh({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function M0(s,r,o){return to(r,s.child,null,o),s=Bh(r,r.pendingProps),s.flags|=2,as(r),r.memoizedState=null,s}function lR(s,r,o){var c=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ye){if(c.mode==="hidden")return s=Bh(r,c),r.lanes=536870912,Rc(null,s);if(Pm(r),(s=bt)?(s=Kb(s,Ts),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Mr!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=_v(s),o.return=r,r.child=o,yn=r,bt=null)):s=null,s===null)throw Vr(r);return r.lanes=536870912,null}return Bh(r,c)}var m=s.memoizedState;if(m!==null){var b=m.dehydrated;if(Pm(r),d)if(r.flags&256)r.flags&=-257,r=M0(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ht||Go(s,r,o,!1),d=(o&s.childLanes)!==0,Ht||d){if(c=_t,c!==null&&(b=pn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Ya(s,b),Yn(c,s,b),np;Jh(),r=M0(s,r,o)}else s=m.treeContext,bt=Ss(b.nextSibling),yn=r,Ye=!0,Pr=null,Ts=!1,s!==null&&bv(r,s),r=Bh(r,c),r.flags|=4096;return r}return s=Fi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Fh(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function sp(s,r,o,c,d){return Xa(r),o=Lm(s,r,o,c,void 0,d),c=Um(),s!==null&&!Ht?(jm(s,r,d),$i(s,r,d)):(Ye&&c&&ym(r),r.flags|=1,bn(s,r,o,d),r.child)}function P0(s,r,o,c,d,m){return Xa(r),r.updateQueue=null,o=Uv(r,c,o,d),Lv(s),c=Um(),s!==null&&!Ht?(jm(s,r,m),$i(s,r,m)):(Ye&&c&&ym(r),r.flags|=1,bn(s,r,o,m),r.child)}function V0(s,r,o,c,d){if(Xa(r),r.stateNode===null){var m=Bo,b=o.contextType;typeof b=="object"&&b!==null&&(m=vn(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ep,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Im(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?vn(b):Bo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Zm(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&ep.enqueueReplaceState(m,m.state,null),wc(r,c,m,d),Tc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){m=r.stateNode;var S=r.memoizedProps,k=so(o,S);m.props=k;var F=m.context,W=o.contextType;b=Bo,typeof W=="object"&&W!==null&&(b=vn(W));var Z=o.getDerivedStateFromProps;W=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||F!==b)&&T0(r,m,c,b),Ur=!1;var H=r.memoizedState;m.state=H,wc(r,c,m,d),Tc(),F=r.memoizedState,S||H!==F||Ur?(typeof Z=="function"&&(Zm(r,o,Z,c),F=r.memoizedState),(k=Ur||E0(r,o,k,c,H,F,b))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=F),m.props=c,m.state=F,m.context=b,c=k):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Nm(s,r),b=r.memoizedProps,W=so(o,b),m.props=W,Z=r.pendingProps,H=m.context,F=o.contextType,k=Bo,typeof F=="object"&&F!==null&&(k=vn(F)),S=o.getDerivedStateFromProps,(F=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Z||H!==k)&&T0(r,m,c,k),Ur=!1,H=r.memoizedState,m.state=H,wc(r,c,m,d),Tc();var Y=r.memoizedState;b!==Z||H!==Y||Ur||s!==null&&s.dependencies!==null&&wh(s.dependencies)?(typeof S=="function"&&(Zm(r,o,S,c),Y=r.memoizedState),(W=Ur||E0(r,o,W,c,H,Y,k)||s!==null&&s.dependencies!==null&&wh(s.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,k)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Y),m.props=c,m.state=Y,m.context=k,c=W):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),c=!1)}return m=c,Fh(s,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,s!==null&&c?(r.child=to(r,s.child,null,d),r.child=to(r,null,o,d)):bn(s,r,o,d),r.memoizedState=m.state,s=r.child):s=$i(s,r,d),s}function L0(s,r,o,c){return Qa(),r.flags|=256,bn(s,r,o,c),r.child}var ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(s){return{baseLanes:s,cachePool:xv()}}function ap(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=ls),s}function U0(s,r,o){var c=r.pendingProps,d=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=s!==null&&s.memoizedState===null?!1:(Ot.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ye){if(d?Br(r):Fr(),(s=bt)?(s=Kb(s,Ts),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Mr!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=_v(s),o.return=r,r.child=o,yn=r,bt=null)):s=null,s===null)throw Vr(r);return Fp(s)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,d?(Fr(),d=r.mode,S=qh({mode:"hidden",children:S},d),c=$a(c,d,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=rp(o),c.childLanes=ap(s,b,o),r.memoizedState=ip,Rc(null,c)):(Br(r),op(r,S))}var k=s.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(m)r.flags&256?(Br(r),r.flags&=-257,r=lp(s,r,o)):r.memoizedState!==null?(Fr(),r.child=s.child,r.flags|=128,r=null):(Fr(),S=c.fallback,d=r.mode,c=qh({mode:"visible",children:c.children},d),S=$a(S,d,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,to(r,s.child,null,o),c=r.child,c.memoizedState=rp(o),c.childLanes=ap(s,b,o),r.memoizedState=ip,r=Rc(null,c));else if(Br(r),Fp(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var F=b.dgst;b=F,c=Error(i(419)),c.stack="",c.digest=b,gc({value:c,source:null,stack:null}),r=lp(s,r,o)}else if(Ht||Go(s,r,o,!1),b=(o&s.childLanes)!==0,Ht||b){if(b=_t,b!==null&&(c=pn(b,o),c!==0&&c!==k.retryLane))throw k.retryLane=c,Ya(s,c),Yn(b,s,c),np;Bp(S)||Jh(),r=lp(s,r,o)}else Bp(S)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,bt=Ss(S.nextSibling),yn=r,Ye=!0,Pr=null,Ts=!1,s!==null&&bv(r,s),r=op(r,c.children),r.flags|=4096);return r}return d?(Fr(),S=c.fallback,d=r.mode,k=s.child,F=k.sibling,c=Fi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,F!==null?S=Fi(F,S):(S=$a(S,d,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,Rc(null,c),c=r.child,S=s.child.memoizedState,S===null?S=rp(o):(d=S.cachePool,d!==null?(k=Ft._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=xv(),S={baseLanes:S.baseLanes|o,cachePool:d}),c.memoizedState=S,c.childLanes=ap(s,b,o),r.memoizedState=ip,Rc(s.child,c)):(Br(r),o=s.child,s=o.sibling,o=Fi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,s!==null&&(b=r.deletions,b===null?(r.deletions=[s],r.flags|=16):b.push(s)),r.child=o,r.memoizedState=null,o)}function op(s,r){return r=qh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function qh(s,r){return s=is(22,s,null,r),s.lanes=0,s}function lp(s,r,o){return to(r,s.child,null,o),s=op(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function j0(s,r,o){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),wm(s.return,r,o)}function cp(s,r,o,c,d,m){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=d,b.treeForkCount=m)}function z0(s,r,o){var c=r.pendingProps,d=c.revealOrder,m=c.tail;c=c.children;var b=Ot.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,Q(Ot,b),bn(s,r,c,o),c=Ye?pc:0,!S&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&j0(s,o,r);else if(s.tag===19)j0(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(d){case"forwards":for(o=r.child,d=null;o!==null;)s=o.alternate,s!==null&&kh(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),cp(r,!1,d,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(s=d.alternate,s!==null&&kh(s)===null){r.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}cp(r,!0,o,null,m,c);break;case"together":cp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function $i(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),Gr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(Go(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=Fi(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=Fi(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function up(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&wh(s)))}function cR(s,r,o){switch(r.tag){case 3:Re(r,r.stateNode.containerInfo),Lr(r,Ft,s.memoizedState.cache),Qa();break;case 27:case 5:hn(r);break;case 4:Re(r,r.stateNode.containerInfo);break;case 10:Lr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Pm(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Br(r),r.flags|=128,null):(o&r.child.childLanes)!==0?U0(s,r,o):(Br(r),s=$i(s,r,o),s!==null?s.sibling:null);Br(r);break;case 19:var d=(s.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Go(s,r,o,!1),c=(o&r.childLanes)!==0),d){if(c)return z0(s,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Q(Ot,Ot.current),c)break;return null;case 22:return r.lanes=0,D0(s,r,o,r.pendingProps);case 24:Lr(r,Ft,s.memoizedState.cache)}return $i(s,r,o)}function B0(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ht=!0;else{if(!up(s,o)&&(r.flags&128)===0)return Ht=!1,cR(s,r,o);Ht=(s.flags&131072)!==0}else Ht=!1,Ye&&(r.flags&1048576)!==0&&vv(r,pc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Za(r.elementType),r.type=s,typeof s=="function")pm(s)?(c=so(s,c),r.tag=1,r=V0(null,r,s,c,o)):(r.tag=0,r=sp(null,r,s,c,o));else{if(s!=null){var d=s.$$typeof;if(d===me){r.tag=11,r=I0(null,r,s,c,o);break e}else if(d===N){r.tag=14,r=N0(null,r,s,c,o);break e}}throw r=Je(s)||s,Error(i(306,r,""))}}return r;case 0:return sp(s,r,r.type,r.pendingProps,o);case 1:return c=r.type,d=so(c,r.pendingProps),V0(s,r,c,d,o);case 3:e:{if(Re(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;d=m.element,Nm(s,r),wc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,Lr(r,Ft,c),c!==m.cache&&Sm(r,[Ft],o,!0),Tc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=L0(s,r,c,o);break e}else if(c!==d){d=vs(Error(i(424)),r),gc(d),r=L0(s,r,c,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=Ss(s.firstChild),yn=r,Ye=!0,Pr=null,Ts=!0,o=Dv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qa(),c===d){r=$i(s,r,o);break e}bn(s,r,c,o)}r=r.child}return r;case 26:return Fh(s,r),s===null?(o=Jb(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ye||(o=r.type,s=r.pendingProps,c=rd(be.current).createElement(o),c[jt]=r,c[sn]=s,En(c,o,s),zt(c),r.stateNode=c):r.memoizedState=Jb(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return hn(r),s===null&&Ye&&(c=r.stateNode=Qb(r.type,r.pendingProps,be.current),yn=r,Ts=!0,d=bt,Wr(r.type)?(qp=d,bt=Ss(c.firstChild)):bt=d),bn(s,r,r.pendingProps.children,o),Fh(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ye&&((d=c=bt)&&(c=jR(c,r.type,r.pendingProps,Ts),c!==null?(r.stateNode=c,yn=r,bt=Ss(c.firstChild),Ts=!1,d=!0):d=!1),d||Vr(r)),hn(r),d=r.type,m=r.pendingProps,b=s!==null?s.memoizedProps:null,c=m.children,Up(d,m)?c=null:b!==null&&Up(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=Lm(s,r,eR,null,null,o),qc._currentValue=d),Fh(s,r),bn(s,r,c,o),r.child;case 6:return s===null&&Ye&&((s=o=bt)&&(o=zR(o,r.pendingProps,Ts),o!==null?(r.stateNode=o,yn=r,bt=null,s=!0):s=!1),s||Vr(r)),null;case 13:return U0(s,r,o);case 4:return Re(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=to(r,null,c,o):bn(s,r,c,o),r.child;case 11:return I0(s,r,r.type,r.pendingProps,o);case 7:return bn(s,r,r.pendingProps,o),r.child;case 8:return bn(s,r,r.pendingProps.children,o),r.child;case 12:return bn(s,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Lr(r,r.type,c.value),bn(s,r,c.children,o),r.child;case 9:return d=r.type._context,c=r.pendingProps.children,Xa(r),d=vn(d),c=c(d),r.flags|=1,bn(s,r,c,o),r.child;case 14:return N0(s,r,r.type,r.pendingProps,o);case 15:return k0(s,r,r.type,r.pendingProps,o);case 19:return z0(s,r,o);case 31:return lR(s,r,o);case 22:return D0(s,r,o,r.pendingProps);case 24:return Xa(r),c=vn(Ft),s===null?(d=Cm(),d===null&&(d=_t,m=Am(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),r.memoizedState={parent:c,cache:d},Im(r),Lr(r,Ft,d)):((s.lanes&o)!==0&&(Nm(s,r),wc(r,null,null,o),Tc()),d=s.memoizedState,m=r.memoizedState,d.parent!==c?(d={parent:c,cache:c},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Lr(r,Ft,c)):(c=m.cache,Lr(r,Ft,c),c!==d.cache&&Sm(r,[Ft],o,!0))),bn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Qi(s){s.flags|=4}function hp(s,r,o,c,d){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(d&335544128)===d)if(s.stateNode.complete)s.flags|=8192;else if(mb())s.flags|=8192;else throw eo=Ch,Rm}else s.flags&=-16777217}function F0(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!sE(r))if(mb())s.flags|=8192;else throw eo=Ch,Rm}function Hh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?nn():536870912,s.lanes|=r,sl|=r)}function Ic(s,r){if(!Ye)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Et(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(r)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=c,s.childLanes=o,r}function uR(s,r,o){var c=r.pendingProps;switch(vm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return o=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Gi(Ft),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Ho(r)?Qi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Em())),Et(r),null;case 26:var d=r.type,m=r.memoizedState;return s===null?(Qi(r),m!==null?(Et(r),F0(r,m)):(Et(r),hp(r,d,null,c,o))):m?m!==s.memoizedState?(Qi(r),Et(r),F0(r,m)):(Et(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Qi(r),Et(r),hp(r,d,s,c,o)),null;case 27:if(Mn(r),o=be.current,d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Et(r),null}s=se.current,Ho(r)?Ev(r):(s=Qb(d,c,o),r.stateNode=s,Qi(r))}return Et(r),null;case 5:if(Mn(r),d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Et(r),null}if(m=se.current,Ho(r))Ev(r);else{var b=rd(be.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(d,{is:c.is}):b.createElement(d)}}m[jt]=r,m[sn]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(En(m,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(r)}}return Et(r),hp(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=be.current,Ho(r)){if(s=r.stateNode,o=r.memoizedProps,c=null,d=yn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}s[jt]=r,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Ub(s.nodeValue,o)),s||Vr(r,!0)}else s=rd(s).createTextNode(c),s[jt]=r,r.stateNode=s}return Et(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(c=Ho(r),o!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[jt]=r}else Qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),s=!1}else o=Em(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(as(r),r):(as(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Et(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(d=Ho(r),c!==null&&c.dehydrated!==null){if(s===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[jt]=r}else Qa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),d=!1}else d=Em(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(as(r),r):(as(r),null)}return as(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=r.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==d&&(c.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),Hh(r,r.updateQueue),Et(r),null);case 4:return Fe(),s===null&&Op(r.stateNode.containerInfo),Et(r),null;case 10:return Gi(r.type),Et(r),null;case 19:if(X(Ot),c=r.memoizedState,c===null)return Et(r),null;if(d=(r.flags&128)!==0,m=c.rendering,m===null)if(d)Ic(c,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(m=kh(s),m!==null){for(r.flags|=128,Ic(c,!1),s=m.updateQueue,r.updateQueue=s,Hh(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)gv(o,s),o=o.sibling;return Q(Ot,Ot.current&1|2),Ye&&qi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&fn()>Qh&&(r.flags|=128,d=!0,Ic(c,!1),r.lanes=4194304)}else{if(!d)if(s=kh(m),s!==null){if(r.flags|=128,d=!0,s=s.updateQueue,r.updateQueue=s,Hh(r,s),Ic(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Ye)return Et(r),null}else 2*fn()-c.renderingStartTime>Qh&&o!==536870912&&(r.flags|=128,d=!0,Ic(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(s=c.last,s!==null?s.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=fn(),s.sibling=null,o=Ot.current,Q(Ot,d?o&1|2:o&1),Ye&&qi(r,c.treeForkCount),s):(Et(r),null);case 22:case 23:return as(r),Mm(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),o=r.updateQueue,o!==null&&Hh(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),s!==null&&X(Ja),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Gi(Ft),Et(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function hR(s,r){switch(vm(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Gi(Ft),Fe(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Mn(r),null;case 31:if(r.memoizedState!==null){if(as(r),r.alternate===null)throw Error(i(340));Qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(as(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Qa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return X(Ot),null;case 4:return Fe(),null;case 10:return Gi(r.type),null;case 22:case 23:return as(r),Mm(),s!==null&&X(Ja),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Gi(Ft),null;case 25:return null;default:return null}}function q0(s,r){switch(vm(r),r.tag){case 3:Gi(Ft),Fe();break;case 26:case 27:case 5:Mn(r);break;case 4:Fe();break;case 31:r.memoizedState!==null&&as(r);break;case 13:as(r);break;case 19:X(Ot);break;case 10:Gi(r.type);break;case 22:case 23:as(r),Mm(),s!==null&&X(Ja);break;case 24:Gi(Ft)}}function Nc(s,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&s)===s){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==d)}}catch(S){ut(r,r.return,S)}}function qr(s,r,o){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&s)===s){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=r;var k=o,F=S;try{F()}catch(W){ut(d,k,W)}}}c=c.next}while(c!==m)}}catch(W){ut(r,r.return,W)}}function H0(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{Mv(r,o)}catch(c){ut(s,s.return,c)}}}function G0(s,r,o){o.props=so(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){ut(s,r,c)}}function kc(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(d){ut(s,r,d)}}function Ei(s,r){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){ut(s,r,d)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ut(s,r,d)}else o.current=null}function K0(s){var r=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){ut(s,s.return,d)}}function dp(s,r,o){try{var c=s.stateNode;OR(c,s.type,o,r),c[sn]=r}catch(d){ut(s,s.return,d)}}function Y0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wr(s.type)||s.tag===4}function fp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Y0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mp(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Us));else if(c!==4&&(c===27&&Wr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(mp(s,r,o),s=s.sibling;s!==null;)mp(s,r,o),s=s.sibling}function Gh(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(c!==4&&(c===27&&Wr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Gh(s,r,o),s=s.sibling;s!==null;)Gh(s,r,o),s=s.sibling}function $0(s){var r=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);En(r,c,o),r[jt]=s,r[sn]=o}catch(m){ut(s,s.return,m)}}var Wi=!1,Gt=!1,pp=!1,Q0=typeof WeakSet=="function"?WeakSet:Set,an=null;function dR(s,r){if(s=s.containerInfo,Vp=dd,s=ov(s),lm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,k=-1,F=0,W=0,Z=s,H=null;t:for(;;){for(var Y;Z!==o||d!==0&&Z.nodeType!==3||(S=b+d),Z!==m||c!==0&&Z.nodeType!==3||(k=b+c),Z.nodeType===3&&(b+=Z.nodeValue.length),(Y=Z.firstChild)!==null;)H=Z,Z=Y;for(;;){if(Z===s)break t;if(H===o&&++F===d&&(S=b),H===m&&++W===c&&(k=b),(Y=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=Y}o=S===-1||k===-1?null:{start:S,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lp={focusedElem:s,selectionRange:o},dd=!1,an=r;an!==null;)if(r=an,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,an=s;else for(;an!==null;){switch(r=an,m=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)d=s[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,o=r,d=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var pe=so(o.type,d);s=c.getSnapshotBeforeUpdate(pe,m),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){ut(o,o.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)zp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":zp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,an=s;break}an=r.return}}function W0(s,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ji(s,o),c&4&&Nc(5,o);break;case 1:if(Ji(s,o),c&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(b){ut(o,o.return,b)}else{var d=so(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(d,r,s.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(o,o.return,b)}}c&64&&H0(o),c&512&&kc(o,o.return);break;case 3:if(Ji(s,o),c&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Mv(s,r)}catch(b){ut(o,o.return,b)}}break;case 27:r===null&&c&4&&$0(o);case 26:case 5:Ji(s,o),r===null&&c&4&&K0(o),c&512&&kc(o,o.return);break;case 12:Ji(s,o);break;case 31:Ji(s,o),c&4&&Z0(s,o);break;case 13:Ji(s,o),c&4&&eb(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=ER.bind(null,o),BR(s,o))));break;case 22:if(c=o.memoizedState!==null||Wi,!c){r=r!==null&&r.memoizedState!==null||Gt,d=Wi;var m=Gt;Wi=c,(Gt=r)&&!m?Zi(s,o,(o.subtreeFlags&8772)!==0):Ji(s,o),Wi=d,Gt=m}break;case 30:break;default:Ji(s,o)}}function X0(s){var r=s.alternate;r!==null&&(s.alternate=null,X0(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Co(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ct=null,qn=!1;function Xi(s,r,o){for(o=o.child;o!==null;)J0(s,r,o),o=o.sibling}function J0(s,r,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:Gt||Ei(o,r),Xi(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Gt||Ei(o,r);var c=Ct,d=qn;Wr(o.type)&&(Ct=o.stateNode,qn=!1),Xi(s,r,o),zc(o.stateNode),Ct=c,qn=d;break;case 5:Gt||Ei(o,r);case 6:if(c=Ct,d=qn,Ct=null,Xi(s,r,o),Ct=c,qn=d,Ct!==null)if(qn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(o.stateNode)}catch(m){ut(o,r,m)}else try{Ct.removeChild(o.stateNode)}catch(m){ut(o,r,m)}break;case 18:Ct!==null&&(qn?(s=Ct,Hb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),hl(s)):Hb(Ct,o.stateNode));break;case 4:c=Ct,d=qn,Ct=o.stateNode.containerInfo,qn=!0,Xi(s,r,o),Ct=c,qn=d;break;case 0:case 11:case 14:case 15:qr(2,o,r),Gt||qr(4,o,r),Xi(s,r,o);break;case 1:Gt||(Ei(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&G0(o,r,c)),Xi(s,r,o);break;case 21:Xi(s,r,o);break;case 22:Gt=(c=Gt)||o.memoizedState!==null,Xi(s,r,o),Gt=c;break;default:Xi(s,r,o)}}function Z0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{hl(s)}catch(o){ut(r,r.return,o)}}}function eb(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{hl(s)}catch(o){ut(r,r.return,o)}}function fR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Q0),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Q0),r;default:throw Error(i(435,s.tag))}}function Kh(s,r){var o=fR(s);r.forEach(function(c){if(!o.has(c)){o.add(c);var d=TR.bind(null,s,c);c.then(d,d)}})}function Hn(s,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],m=s,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Wr(S.type)){Ct=S.stateNode,qn=!1;break e}break;case 5:Ct=S.stateNode,qn=!1;break e;case 3:case 4:Ct=S.stateNode.containerInfo,qn=!0;break e}S=S.return}if(Ct===null)throw Error(i(160));J0(m,b,d),Ct=null,qn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)tb(r,s),r=r.sibling}var Hs=null;function tb(s,r){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hn(r,s),Gn(s),c&4&&(qr(3,s,s.return),Nc(3,s),qr(5,s,s.return));break;case 1:Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),c&64&&Wi&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=Hs;if(Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":m=d.getElementsByTagName("title")[0],(!m||m[oi]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(c),d.head.insertBefore(m,d.querySelector("head > title"))),En(m,c,o),m[jt]=s,zt(m),c=m;break e;case"link":var b=tE("link","href",d).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=d.createElement(c),En(m,c,o),d.head.appendChild(m);break;case"meta":if(b=tE("meta","content",d).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=d.createElement(c),En(m,c,o),d.head.appendChild(m);break;default:throw Error(i(468,c))}m[jt]=s,zt(m),c=m}s.stateNode=c}else nE(d,s.type,s.stateNode);else s.stateNode=eE(d,c,s.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?nE(d,s.type,s.stateNode):eE(d,c,s.memoizedProps)):c===null&&s.stateNode!==null&&dp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),o!==null&&c&4&&dp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Hn(r,s),Gn(s),c&512&&(Gt||o===null||Ei(o,o.return)),s.flags&32){d=s.stateNode;try{Fn(d,"")}catch(pe){ut(s,s.return,pe)}}c&4&&s.stateNode!=null&&(d=s.memoizedProps,dp(s,d,o!==null?o.memoizedProps:d)),c&1024&&(pp=!0);break;case 6:if(Hn(r,s),Gn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(pe){ut(s,s.return,pe)}}break;case 3:if(ld=null,d=Hs,Hs=ad(r.containerInfo),Hn(r,s),Hs=d,Gn(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(r.containerInfo)}catch(pe){ut(s,s.return,pe)}pp&&(pp=!1,nb(s));break;case 4:c=Hs,Hs=ad(s.stateNode.containerInfo),Hn(r,s),Gn(s),Hs=c;break;case 12:Hn(r,s),Gn(s);break;case 31:Hn(r,s),Gn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kh(s,c)));break;case 13:Hn(r,s),Gn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&($h=fn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kh(s,c)));break;case 22:d=s.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,F=Wi,W=Gt;if(Wi=F||d,Gt=W||k,Hn(r,s),Gt=W,Wi=F,Gn(s),c&8192)e:for(r=s.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||k||Wi||Gt||io(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){k=o=r;try{if(m=k.stateNode,d)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=k.stateNode;var Z=k.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){ut(k,k.return,pe)}}}else if(r.tag===6){if(o===null){k=r;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(pe){ut(k,k.return,pe)}}}else if(r.tag===18){if(o===null){k=r;try{var Y=k.stateNode;d?Gb(Y,!0):Gb(k.stateNode,!1)}catch(pe){ut(k,k.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Kh(s,o))));break;case 19:Hn(r,s),Gn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Kh(s,c)));break;case 30:break;case 21:break;default:Hn(r,s),Gn(s)}}function Gn(s){var r=s.flags;if(r&2){try{for(var o,c=s.return;c!==null;){if(Y0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,m=fp(s);Gh(s,m,d);break;case 5:var b=o.stateNode;o.flags&32&&(Fn(b,""),o.flags&=-33);var S=fp(s);Gh(s,S,b);break;case 3:case 4:var k=o.stateNode.containerInfo,F=fp(s);mp(s,F,k);break;default:throw Error(i(161))}}catch(W){ut(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;nb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ji(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)W0(s,r.alternate,r),r=r.sibling}function io(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:qr(4,r,r.return),io(r);break;case 1:Ei(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&G0(r,r.return,o),io(r);break;case 27:zc(r.stateNode);case 26:case 5:Ei(r,r.return),io(r);break;case 22:r.memoizedState===null&&io(r);break;case 30:io(r);break;default:io(r)}s=s.sibling}}function Zi(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,d=s,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Zi(d,m,o),Nc(4,m);break;case 1:if(Zi(d,m,o),c=m,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ut(c,c.return,F)}if(c=m,d=c.updateQueue,d!==null){var S=c.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Ov(k[d],S)}catch(F){ut(c,c.return,F)}}o&&b&64&&H0(m),kc(m,m.return);break;case 27:$0(m);case 26:case 5:Zi(d,m,o),o&&c===null&&b&4&&K0(m),kc(m,m.return);break;case 12:Zi(d,m,o);break;case 31:Zi(d,m,o),o&&b&4&&Z0(d,m);break;case 13:Zi(d,m,o),o&&b&4&&eb(d,m);break;case 22:m.memoizedState===null&&Zi(d,m,o),kc(m,m.return);break;case 30:break;default:Zi(d,m,o)}r=r.sibling}}function gp(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&_c(o))}function _p(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_c(s))}function Gs(s,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)sb(s,r,o,c),r=r.sibling}function sb(s,r,o,c){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Gs(s,r,o,c),d&2048&&Nc(9,r);break;case 1:Gs(s,r,o,c);break;case 3:Gs(s,r,o,c),d&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_c(s)));break;case 12:if(d&2048){Gs(s,r,o,c),s=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ut(r,r.return,k)}}else Gs(s,r,o,c);break;case 31:Gs(s,r,o,c);break;case 13:Gs(s,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Gs(s,r,o,c):Dc(s,r):m._visibility&2?Gs(s,r,o,c):(m._visibility|=2,el(s,r,o,c,(r.subtreeFlags&10256)!==0||!1)),d&2048&&gp(b,r);break;case 24:Gs(s,r,o,c),d&2048&&_p(r.alternate,r);break;default:Gs(s,r,o,c)}}function el(s,r,o,c,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=s,b=r,S=o,k=c,F=b.flags;switch(b.tag){case 0:case 11:case 15:el(m,b,S,k,d),Nc(8,b);break;case 23:break;case 22:var W=b.stateNode;b.memoizedState!==null?W._visibility&2?el(m,b,S,k,d):Dc(m,b):(W._visibility|=2,el(m,b,S,k,d)),d&&F&2048&&gp(b.alternate,b);break;case 24:el(m,b,S,k,d),d&&F&2048&&_p(b.alternate,b);break;default:el(m,b,S,k,d)}r=r.sibling}}function Dc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,c=r,d=c.flags;switch(c.tag){case 22:Dc(o,c),d&2048&&gp(c.alternate,c);break;case 24:Dc(o,c),d&2048&&_p(c.alternate,c);break;default:Dc(o,c)}r=r.sibling}}var Oc=8192;function tl(s,r,o){if(s.subtreeFlags&Oc)for(s=s.child;s!==null;)ib(s,r,o),s=s.sibling}function ib(s,r,o){switch(s.tag){case 26:tl(s,r,o),s.flags&Oc&&s.memoizedState!==null&&ZR(o,Hs,s.memoizedState,s.memoizedProps);break;case 5:tl(s,r,o);break;case 3:case 4:var c=Hs;Hs=ad(s.stateNode.containerInfo),tl(s,r,o),Hs=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Oc,Oc=16777216,tl(s,r,o),Oc=c):tl(s,r,o));break;default:tl(s,r,o)}}function rb(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Mc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];an=c,ob(c,s)}rb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ab(s),s=s.sibling}function ab(s){switch(s.tag){case 0:case 11:case 15:Mc(s),s.flags&2048&&qr(9,s,s.return);break;case 3:Mc(s);break;case 12:Mc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Yh(s)):Mc(s);break;default:Mc(s)}}function Yh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];an=c,ob(c,s)}rb(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:qr(8,r,r.return),Yh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Yh(r));break;default:Yh(r)}s=s.sibling}}function ob(s,r){for(;an!==null;){var o=an;switch(o.tag){case 0:case 11:case 15:qr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_c(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,an=c;else e:for(o=s;an!==null;){c=an;var d=c.sibling,m=c.return;if(X0(c),c===o){an=null;break e}if(d!==null){d.return=m,an=d;break e}an=m}}}var mR={getCacheForType:function(s){var r=vn(Ft),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return vn(Ft).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,st=0,_t=null,je=null,qe=0,ct=0,os=null,Hr=!1,nl=!1,yp=!1,er=0,Nt=0,Gr=0,ro=0,vp=0,ls=0,sl=0,Pc=null,Kn=null,bp=!1,$h=0,lb=0,Qh=1/0,Wh=null,Kr=null,Xt=0,Yr=null,il=null,tr=0,Ep=0,Tp=null,cb=null,Vc=0,wp=null;function cs(){return(st&2)!==0&&qe!==0?qe&-qe:z.T!==null?Ip():Ql()}function ub(){if(ls===0)if((qe&536870912)===0||Ye){var s=Ui;Ui<<=1,(Ui&3932160)===0&&(Ui=262144),ls=s}else ls=536870912;return s=rs.current,s!==null&&(s.flags|=32),ls}function Yn(s,r,o){(s===_t&&(ct===2||ct===9)||s.cancelPendingCommit!==null)&&(rl(s,0),$r(s,qe,ls,!1)),vt(s,o),((st&2)===0||s!==_t)&&(s===_t&&((st&2)===0&&(ro|=o),Nt===4&&$r(s,qe,ls,!1)),Ti(s))}function hb(s,r,o){if((st&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&s.expiredLanes)===0||rt(s,r),d=c?yR(s,r):Ap(s,r,!0),m=c;do{if(d===0){nl&&!c&&$r(s,r,0,!1);break}else{if(o=s.current.alternate,m&&!gR(o)){d=Ap(s,r,!1),m=!1;continue}if(d===2){if(m=r,s.errorRecoveryDisabledLanes&m)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=s;d=Pc;var k=S.current.memoizedState.isDehydrated;if(k&&(rl(S,b).flags|=256),b=Ap(S,b,!1),b!==2){if(yp&&!k){S.errorRecoveryDisabledLanes|=m,ro|=m,d=4;break e}m=Kn,Kn=d,m!==null&&(Kn===null?Kn=m:Kn.push.apply(Kn,m))}d=b}if(m=!1,d!==2)continue}}if(d===1){rl(s,0),$r(s,r,0,!0);break}e:{switch(c=s,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:$r(c,r,ls,!Hr);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=$h+300-fn(),10<d)){if($r(c,r,ls,!Hr),Se(c,0,!0)!==0)break e;tr=r,c.timeoutHandle=Fb(db.bind(null,c,o,Kn,Wh,bp,r,ls,ro,sl,Hr,m,"Throttled",-0,0),d);break e}db(c,o,Kn,Wh,bp,r,ls,ro,sl,Hr,m,null,-0,0)}}break}while(!0);Ti(s)}function db(s,r,o,c,d,m,b,S,k,F,W,Z,H,Y){if(s.timeoutHandle=-1,Z=r.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},ib(r,m,Z);var pe=(m&62914560)===m?$h-fn():(m&4194048)===m?lb-fn():0;if(pe=eI(Z,pe),pe!==null){tr=m,s.cancelPendingCommit=pe(bb.bind(null,s,r,m,o,c,d,b,S,k,W,Z,null,H,Y)),$r(s,m,b,!F);return}}bb(s,r,m,o,c,d,b,S,k)}function gR(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],m=d.getSnapshot;d=d.value;try{if(!ss(m(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $r(s,r,o,c){r&=~vp,r&=~ro,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var d=r;0<d;){var m=31-At(d),b=1<<m;c[m]=-1,d&=~b}o!==0&&fs(s,o,r)}function Xh(){return(st&6)===0?(Lc(0),!1):!0}function Sp(){if(je!==null){if(ct===0)var s=je.return;else s=je,Hi=Wa=null,zm(s),Qo=null,vc=0,s=je;for(;s!==null;)q0(s.alternate,s),s=s.return;je=null}}function rl(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,VR(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),tr=0,Sp(),_t=s,je=o=Fi(s.current,null),qe=r,ct=0,os=null,Hr=!1,nl=rt(s,r),yp=!1,sl=ls=vp=ro=Gr=Nt=0,Kn=Pc=null,bp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var d=31-At(c),m=1<<d;r|=s[d],c&=~m}return er=r,yh(),o}function fb(s,r){Ve=null,z.H=Cc,r===$o||r===xh?(r=Iv(),ct=3):r===Rm?(r=Iv(),ct=4):ct=r===np?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,os=r,je===null&&(Nt=1,zh(s,vs(r,s.current)))}function mb(){var s=rs.current;return s===null?!0:(qe&4194048)===qe?ws===null:(qe&62914560)===qe||(qe&536870912)!==0?s===ws:!1}function pb(){var s=z.H;return z.H=Cc,s===null?Cc:s}function gb(){var s=z.A;return z.A=mR,s}function Jh(){Nt=4,Hr||(qe&4194048)!==qe&&rs.current!==null||(nl=!0),(Gr&134217727)===0&&(ro&134217727)===0||_t===null||$r(_t,qe,ls,!1)}function Ap(s,r,o){var c=st;st|=2;var d=pb(),m=gb();(_t!==s||qe!==r)&&(Wh=null,rl(s,r)),r=!1;var b=Nt;e:do try{if(ct!==0&&je!==null){var S=je,k=os;switch(ct){case 8:Sp(),b=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(r=!0);var F=ct;if(ct=0,os=null,al(s,S,k,F),o&&nl){b=0;break e}break;default:F=ct,ct=0,os=null,al(s,S,k,F)}}_R(),b=Nt;break}catch(W){fb(s,W)}while(!0);return r&&s.shellSuspendCounter++,Hi=Wa=null,st=c,z.H=d,z.A=m,je===null&&(_t=null,qe=0,yh()),b}function _R(){for(;je!==null;)_b(je)}function yR(s,r){var o=st;st|=2;var c=pb(),d=gb();_t!==s||qe!==r?(Wh=null,Qh=fn()+500,rl(s,r)):nl=rt(s,r);e:do try{if(ct!==0&&je!==null){r=je;var m=os;t:switch(ct){case 1:ct=0,os=null,al(s,r,m,1);break;case 2:case 9:if(Cv(m)){ct=0,os=null,yb(r);break}r=function(){ct!==2&&ct!==9||_t!==s||(ct=7),Ti(s)},m.then(r,r);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Cv(m)?(ct=0,os=null,yb(r)):(ct=0,os=null,al(s,r,m,7));break;case 5:var b=null;switch(je.tag){case 26:b=je.memoizedState;case 5:case 27:var S=je;if(b?sE(b):S.stateNode.complete){ct=0,os=null;var k=S.sibling;if(k!==null)je=k;else{var F=S.return;F!==null?(je=F,Zh(F)):je=null}break t}}ct=0,os=null,al(s,r,m,5);break;case 6:ct=0,os=null,al(s,r,m,6);break;case 8:Sp(),Nt=6;break e;default:throw Error(i(462))}}vR();break}catch(W){fb(s,W)}while(!0);return Hi=Wa=null,z.H=c,z.A=d,st=o,je!==null?0:(_t=null,qe=0,yh(),Nt)}function vR(){for(;je!==null&&!dn();)_b(je)}function _b(s){var r=B0(s.alternate,s,er);s.memoizedProps=s.pendingProps,r===null?Zh(s):je=r}function yb(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=P0(o,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=P0(o,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:zm(r);default:q0(o,r),r=je=gv(r,er),r=B0(o,r,er)}s.memoizedProps=s.pendingProps,r===null?Zh(s):je=r}function al(s,r,o,c){Hi=Wa=null,zm(r),Qo=null,vc=0;var d=r.return;try{if(oR(s,d,r,o,qe)){Nt=1,zh(s,vs(o,s.current)),je=null;return}}catch(m){if(d!==null)throw je=d,m;Nt=1,zh(s,vs(o,s.current)),je=null;return}r.flags&32768?(Ye||c===1?s=!0:nl||(qe&536870912)!==0?s=!1:(Hr=s=!0,(c===2||c===9||c===3||c===6)&&(c=rs.current,c!==null&&c.tag===13&&(c.flags|=16384))),vb(r,s)):Zh(r)}function Zh(s){var r=s;do{if((r.flags&32768)!==0){vb(r,Hr);return}s=r.return;var o=uR(r.alternate,r,er);if(o!==null){je=o;return}if(r=r.sibling,r!==null){je=r;return}je=r=s}while(r!==null);Nt===0&&(Nt=5)}function vb(s,r){do{var o=hR(s.alternate,s);if(o!==null){o.flags&=32767,je=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){je=s;return}je=s=o}while(s!==null);Nt=6,je=null}function bb(s,r,o,c,d,m,b,S,k){s.cancelPendingCommit=null;do ed();while(Xt!==0);if((st&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=fm,An(s,o,m,b,S,k),s===_t&&(je=_t=null,qe=0),il=r,Yr=s,tr=o,Ep=m,Tp=d,cb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,wR(Os,function(){return Ab(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,d=ie.p,ie.p=2,b=st,st|=4;try{dR(s,r,o)}finally{st=b,ie.p=d,z.T=c}}Xt=1,Eb(),Tb(),wb()}}function Eb(){if(Xt===1){Xt=0;var s=Yr,r=il,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var c=ie.p;ie.p=2;var d=st;st|=4;try{tb(r,s);var m=Lp,b=ov(s.containerInfo),S=m.focusedElem,k=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&av(S.ownerDocument.documentElement,S)){if(k!==null&&lm(S)){var F=k.start,W=k.end;if(W===void 0&&(W=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(W,S.value.length);else{var Z=S.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var Y=H.getSelection(),pe=S.textContent.length,Ae=Math.min(k.start,pe),mt=k.end===void 0?Ae:Math.min(k.end,pe);!Y.extend&&Ae>mt&&(b=mt,mt=Ae,Ae=b);var U=rv(S,Ae),M=rv(S,mt);if(U&&M&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var B=Z.createRange();B.setStart(U.node,U.offset),Y.removeAllRanges(),Ae>mt?(Y.addRange(B),Y.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),Y.addRange(B))}}}}for(Z=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&Z.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Z.length;S++){var J=Z[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}dd=!!Vp,Lp=Vp=null}finally{st=d,ie.p=c,z.T=o}}s.current=r,Xt=2}}function Tb(){if(Xt===2){Xt=0;var s=Yr,r=il,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var c=ie.p;ie.p=2;var d=st;st|=4;try{W0(s,r.alternate,r)}finally{st=d,ie.p=c,z.T=o}}Xt=3}}function wb(){if(Xt===4||Xt===3){Xt=0,Ds();var s=Yr,r=il,o=tr,c=cb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,il=Yr=null,Sb(s,s.pendingLanes));var d=s.pendingLanes;if(d===0&&(Kr=null),gn(o),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Jn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=z.T,d=ie.p,ie.p=2,z.T=null;try{for(var m=s.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{z.T=r,ie.p=d}}(tr&3)!==0&&ed(),Ti(s),d=s.pendingLanes,(o&261930)!==0&&(d&42)!==0?s===wp?Vc++:(Vc=0,wp=s):Vc=0,Lc(0)}}function Sb(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,_c(r)))}function ed(){return Eb(),Tb(),wb(),Ab()}function Ab(){if(Xt!==5)return!1;var s=Yr,r=Ep;Ep=0;var o=gn(tr),c=z.T,d=ie.p;try{ie.p=32>o?32:o,z.T=null,o=Tp,Tp=null;var m=Yr,b=tr;if(Xt=0,il=Yr=null,tr=0,(st&6)!==0)throw Error(i(331));var S=st;if(st|=4,ab(m.current),sb(m,m.current,b,o),st=S,Lc(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{ie.p=d,z.T=c,Sb(s,r)}}function xb(s,r,o){r=vs(o,r),r=tp(s.stateNode,r,2),s=zr(s,r,2),s!==null&&(vt(s,2),Ti(s))}function ut(s,r,o){if(s.tag===3)xb(s,s,o);else for(;r!==null;){if(r.tag===3){xb(r,s,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Kr===null||!Kr.has(c))){s=vs(o,s),o=C0(2),c=zr(r,o,2),c!==null&&(R0(o,c,r,s),vt(c,2),Ti(c));break}}r=r.return}}function xp(s,r,o){var c=s.pingCache;if(c===null){c=s.pingCache=new pR;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(yp=!0,d.add(o),s=bR.bind(null,s,r,o),r.then(s,s))}function bR(s,r,o){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,_t===s&&(qe&o)===o&&(Nt===4||Nt===3&&(qe&62914560)===qe&&300>fn()-$h?(st&2)===0&&rl(s,0):vp|=o,sl===qe&&(sl=0)),Ti(s)}function Cb(s,r){r===0&&(r=nn()),s=Ya(s,r),s!==null&&(vt(s,r),Ti(s))}function ER(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),Cb(s,o)}function TR(s,r){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Cb(s,o)}function wR(s,r){return kt(s,r)}var td=null,ol=null,Cp=!1,nd=!1,Rp=!1,Qr=0;function Ti(s){s!==ol&&s.next===null&&(ol===null?td=ol=s:ol=ol.next=s),nd=!0,Cp||(Cp=!0,AR())}function Lc(s,r){if(!Rp&&nd){Rp=!0;do for(var o=!1,c=td;c!==null;){if(s!==0){var d=c.pendingLanes;if(d===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-At(42|s)+1)-1,m&=d&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,kb(c,m))}else m=qe,m=Se(c,c===_t?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||rt(c,m)||(o=!0,kb(c,m));c=c.next}while(o);Rp=!1}}function SR(){Rb()}function Rb(){nd=Cp=!1;var s=0;Qr!==0&&PR()&&(s=Qr);for(var r=fn(),o=null,c=td;c!==null;){var d=c.next,m=Ib(c,r);m===0?(c.next=null,o===null?td=d:o.next=d,d===null&&(ol=o)):(o=c,(s!==0||(m&3)!==0)&&(nd=!0)),c=d}Xt!==0&&Xt!==5||Lc(s),Qr!==0&&(Qr=0)}function Ib(s,r){for(var o=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var b=31-At(m),S=1<<b,k=d[b];k===-1?((S&o)===0||(S&c)!==0)&&(d[b]=Ut(S,r)):k<=r&&(s.expiredLanes|=S),m&=~S}if(r=_t,o=qe,o=Se(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===r&&(ct===2||ct===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&ni(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||rt(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(c!==null&&ni(c),gn(o)){case 2:case 8:o=Oa;break;case 32:o=Os;break;case 268435456:o=Ms;break;default:o=Os}return c=Nb.bind(null,s),o=kt(o,c),s.callbackPriority=r,s.callbackNode=o,r}return c!==null&&c!==null&&ni(c),s.callbackPriority=2,s.callbackNode=null,2}function Nb(s,r){if(Xt!==0&&Xt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(ed()&&s.callbackNode!==o)return null;var c=qe;return c=Se(s,s===_t?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(hb(s,c,r),Ib(s,fn()),s.callbackNode!=null&&s.callbackNode===o?Nb.bind(null,s):null)}function kb(s,r){if(ed())return null;hb(s,r,!0)}function AR(){LR(function(){(st&6)!==0?kt(si,SR):Rb()})}function Ip(){if(Qr===0){var s=Ko;s===0&&(s=ds,ds<<=1,(ds&261888)===0&&(ds=256)),Qr=s}return Qr}function Db(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ko(""+s)}function Ob(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function xR(s,r,o,c,d){if(r==="submit"&&o&&o.stateNode===d){var m=Db((d[sn]||null).action),b=c.submitter;b&&(r=(r=b[sn]||null)?Db(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new pi("action","action",null,c,d);s.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qr!==0){var k=b?Ob(d,b):new FormData(d);Qm(o,{pending:!0,data:k,method:d.method,action:m},null,k)}}else typeof m=="function"&&(S.preventDefault(),k=b?Ob(d,b):new FormData(d),Qm(o,{pending:!0,data:k,method:d.method,action:m},m,k))},currentTarget:d}]})}}for(var Np=0;Np<dm.length;Np++){var kp=dm[Np],CR=kp.toLowerCase(),RR=kp[0].toUpperCase()+kp.slice(1);qs(CR,"on"+RR)}qs(uv,"onAnimationEnd"),qs(hv,"onAnimationIteration"),qs(dv,"onAnimationStart"),qs("dblclick","onDoubleClick"),qs("focusin","onFocus"),qs("focusout","onBlur"),qs(HC,"onTransitionRun"),qs(GC,"onTransitionStart"),qs(KC,"onTransitionCancel"),qs(fv,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function Mb(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],k=S.instance,F=S.currentTarget;if(S=S.listener,k!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=F;try{m(d)}catch(W){_h(W)}d.currentTarget=null,m=k}else for(b=0;b<c.length;b++){if(S=c[b],k=S.instance,F=S.currentTarget,S=S.listener,k!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=F;try{m(d)}catch(W){_h(W)}d.currentTarget=null,m=k}}}}function ze(s,r){var o=r[xo];o===void 0&&(o=r[xo]=new Set);var c=s+"__bubble";o.has(c)||(Pb(r,s,2,!1),o.add(c))}function Dp(s,r,o){var c=0;r&&(c|=4),Pb(o,s,c,r)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Op(s){if(!s[sd]){s[sd]=!0,Wl.forEach(function(o){o!=="selectionchange"&&(IR.has(o)||Dp(o,!1,s),Dp(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[sd]||(r[sd]=!0,Dp("selectionchange",!1,r))}}function Pb(s,r,o,c){switch(uE(r)){case 2:var d=sI;break;case 8:d=iI;break;default:d=$p}o=d.bind(null,r,o,s),d=void 0,!ja||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?s.addEventListener(r,o,{capture:!0,passive:d}):s.addEventListener(r,o,!0):d!==void 0?s.addEventListener(r,o,{passive:d}):s.addEventListener(r,o,!1)}function Mp(s,r,o,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=c.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=li(S),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){c=m=b;continue e}S=S.parentNode}}c=c.return}Nr(function(){var F=m,W=ps(o),Z=[];e:{var H=mv.get(s);if(H!==void 0){var Y=pi,pe=s;switch(s){case"keypress":if(Ba(o)===0)break e;case"keydown":case"keyup":Y=mh;break;case"focusin":pe="focus",Y=qa;break;case"focusout":pe="blur",Y=qa;break;case"beforeblur":case"afterblur":Y=qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case uv:case hv:case dv:Y=oh;break;case fv:Y=A;break;case"scroll":case"scrollend":Y=lc;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Bi;break;case"toggle":case"beforetoggle":Y=Pe}var Ae=(r&4)!==0,mt=!Ae&&(s==="scroll"||s==="scrollend"),U=Ae?H!==null?H+"Capture":null:H;Ae=[];for(var M=F,B;M!==null;){var J=M;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||U===null||(J=js(M,U),J!=null&&Ae.push(jc(M,J,B))),mt)break;M=M.return}0<Ae.length&&(H=new Y(H,pe,null,o,W),Z.push({event:H,listeners:Ae}))}}if((r&7)===0){e:{if(H=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",H&&o!==rc&&(pe=o.relatedTarget||o.fromElement)&&(li(pe)||pe[ai]))break e;if((Y||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(pe=o.relatedTarget||o.toElement,Y=F,pe=pe?li(pe):null,pe!==null&&(mt=l(pe),Ae=pe.tag,pe!==mt||Ae!==5&&Ae!==27&&Ae!==6)&&(pe=null)):(Y=null,pe=F),Y!==pe)){if(Ae=cc,J="onMouseLeave",U="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Bi,J="onPointerLeave",U="onPointerEnter",M="pointer"),mt=Y==null?H:ts(Y),B=pe==null?H:ts(pe),H=new Ae(J,M+"leave",Y,o,W),H.target=mt,H.relatedTarget=B,J=null,li(W)===F&&(Ae=new Ae(U,M+"enter",pe,o,W),Ae.target=B,Ae.relatedTarget=mt,J=Ae),mt=J,Y&&pe)t:{for(Ae=NR,U=Y,M=pe,B=0,J=U;J;J=Ae(J))B++;J=0;for(var Te=M;Te;Te=Ae(Te))J++;for(;0<B-J;)U=Ae(U),B--;for(;0<J-B;)M=Ae(M),J--;for(;B--;){if(U===M||M!==null&&U===M.alternate){Ae=U;break t}U=Ae(U),M=Ae(M)}Ae=null}else Ae=null;Y!==null&&Vb(Z,H,Y,Ae,!1),pe!==null&&mt!==null&&Vb(Z,mt,pe,Ae,!0)}}e:{if(H=F?ts(F):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var et=Zy;else if(Xy(H))if(ev)et=BC;else{et=jC;var ye=UC}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&No(F.elementType)&&(et=Zy):et=zC;if(et&&(et=et(s,F))){Jy(Z,et,o,W);break e}ye&&ye(s,H,F),s==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&nc(H,"number",H.value)}switch(ye=F?ts(F):window,s){case"focusin":(Xy(ye)||ye.contentEditable==="true")&&(Uo=ye,cm=F,mc=null);break;case"focusout":mc=cm=Uo=null;break;case"mousedown":um=!0;break;case"contextmenu":case"mouseup":case"dragend":um=!1,lv(Z,o,W);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":lv(Z,o,W)}var Le;if(nt)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Lo?Ha(s,o)&&(He="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(He="onCompositionStart");He&&(yi&&o.locale!=="ko"&&(Lo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Lo&&(Le=oc()):(mi=W,ac="value"in mi?mi.value:mi.textContent,Lo=!0)),ye=id(F,He),0<ye.length&&(He=new _i(He,s,null,o,W),Z.push({event:He,listeners:ye}),Le?He.data=Le:(Le=Vo(o),Le!==null&&(He.data=Le)))),(Le=_s?MC(s,o):PC(s,o))&&(He=id(F,"onBeforeInput"),0<He.length&&(ye=new _i("onBeforeInput","beforeinput",null,o,W),Z.push({event:ye,listeners:He}),ye.data=Le)),xR(Z,s,F,o,W)}Mb(Z,r)})}function jc(s,r,o){return{instance:s,listener:r,currentTarget:o}}function id(s,r){for(var o=r+"Capture",c=[];s!==null;){var d=s,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=js(s,o),d!=null&&c.unshift(jc(s,d,m)),d=js(s,r),d!=null&&c.push(jc(s,d,m))),s.tag===3)return c;s=s.return}return[]}function NR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Vb(s,r,o,c,d){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,k=S.alternate,F=S.stateNode;if(S=S.tag,k!==null&&k===c)break;S!==5&&S!==26&&S!==27||F===null||(k=F,d?(F=js(o,m),F!=null&&b.unshift(jc(o,F,k))):d||(F=js(o,m),F!=null&&b.push(jc(o,F,k)))),o=o.return}b.length!==0&&s.push({event:r,listeners:b})}var kR=/\r\n?/g,DR=/\u0000|\uFFFD/g;function Lb(s){return(typeof s=="string"?s:""+s).replace(kR,`
`).replace(DR,"")}function Ub(s,r){return r=Lb(r),Lb(s)===r}function ft(s,r,o,c,d,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Fn(s,""+c);break;case"className":ns(s,"class",c);break;case"tabIndex":ns(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(s,o,c);break;case"style":ic(s,c,m);break;case"data":if(r!=="object"){ns(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=ko(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&ft(s,r,"name",d.name,d,null),ft(s,r,"formEncType",d.formEncType,d,null),ft(s,r,"formMethod",d.formMethod,d,null),ft(s,r,"formTarget",d.formTarget,d,null)):(ft(s,r,"encType",d.encType,d,null),ft(s,r,"method",d.method,d,null),ft(s,r,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=ko(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Us);break;case"onScroll":c!=null&&ze("scroll",s);break;case"onScrollEnd":c!=null&&ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=ko(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":ze("beforetoggle",s),ze("toggle",s),Ro(s,"popover",c);break;case"xlinkActuate":Bt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Bt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Bt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Bt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Bt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Bt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Bt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ro(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ih.get(o)||o,Ro(s,o,c))}}function Pp(s,r,o,c,d,m){switch(o){case"style":ic(s,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof c=="string"?Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&Fn(s,""+c);break;case"onScroll":c!=null&&ze("scroll",s);break;case"onScrollEnd":c!=null&&ze("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),m=s[sn]||null,m=m!=null?m[o]:null,typeof m=="function"&&s.removeEventListener(r,m,d),typeof c=="function")){typeof m!="function"&&m!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,c,d);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):Ro(s,o,c)}}}function En(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",s),ze("load",s);var c=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ft(s,r,m,b,o,null)}}d&&ft(s,r,"srcSet",o.srcSet,o,null),c&&ft(s,r,"src",o.src,o,null);return;case"input":ze("invalid",s);var S=m=b=d=null,k=null,F=null;for(c in o)if(o.hasOwnProperty(c)){var W=o[c];if(W!=null)switch(c){case"name":d=W;break;case"type":b=W;break;case"checked":k=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:ft(s,r,c,W,o,null)}}th(s,m,S,k,F,b,d,!1);return;case"select":ze("invalid",s),c=b=m=null;for(d in o)if(o.hasOwnProperty(d)&&(S=o[d],S!=null))switch(d){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:ft(s,r,d,S,o,null)}r=m,o=b,s.multiple=!!c,r!=null?xr(s,!!c,r,!1):o!=null&&xr(s,!!c,o,!0);return;case"textarea":ze("invalid",s),m=d=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":d=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ft(s,r,b,S,o,null)}Cr(s,c,d,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(c=o[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(s,r,k,c,o,null)}return;case"dialog":ze("beforetoggle",s),ze("toggle",s),ze("cancel",s),ze("close",s);break;case"iframe":case"object":ze("load",s);break;case"video":case"audio":for(c=0;c<Uc.length;c++)ze(Uc[c],s);break;case"image":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"embed":case"source":case"link":ze("error",s),ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(c=o[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ft(s,r,F,c,o,null)}return;default:if(No(r)){for(W in o)o.hasOwnProperty(W)&&(c=o[W],c!==void 0&&Pp(s,r,W,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&ft(s,r,S,c,o,null))}function OR(s,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,b=null,S=null,k=null,F=null,W=null;for(Y in o){var Z=o[Y];if(o.hasOwnProperty(Y)&&Z!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=Z;default:c.hasOwnProperty(Y)||ft(s,r,Y,null,c,Z)}}for(var H in c){var Y=c[H];if(Z=o[H],c.hasOwnProperty(H)&&(Y!=null||Z!=null))switch(H){case"type":m=Y;break;case"name":d=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":b=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==Z&&ft(s,r,H,Y,c,Z)}}Io(s,b,S,k,F,W,m,d);return;case"select":Y=b=S=H=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":Y=k;default:c.hasOwnProperty(m)||ft(s,r,m,null,c,k)}for(d in c)if(m=c[d],k=o[d],c.hasOwnProperty(d)&&(m!=null||k!=null))switch(d){case"value":H=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==k&&ft(s,r,d,m,c,k)}r=S,o=b,c=Y,H!=null?xr(s,!!o,H,!1):!!c!=!!o&&(r!=null?xr(s,!!o,r,!0):xr(s,!!o,o?[]:"",!1));return;case"textarea":Y=H=null;for(S in o)if(d=o[S],o.hasOwnProperty(S)&&d!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ft(s,r,S,null,c,d)}for(b in c)if(d=c[b],m=o[b],c.hasOwnProperty(b)&&(d!=null||m!=null))switch(b){case"value":H=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&ft(s,r,b,d,c,m)}nh(s,H,Y);return;case"option":for(var pe in o)if(H=o[pe],o.hasOwnProperty(pe)&&H!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":s.selected=!1;break;default:ft(s,r,pe,null,c,H)}for(k in c)if(H=c[k],Y=o[k],c.hasOwnProperty(k)&&H!==Y&&(H!=null||Y!=null))switch(k){case"selected":s.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ft(s,r,k,H,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)H=o[Ae],o.hasOwnProperty(Ae)&&H!=null&&!c.hasOwnProperty(Ae)&&ft(s,r,Ae,null,c,H);for(F in c)if(H=c[F],Y=o[F],c.hasOwnProperty(F)&&H!==Y&&(H!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:ft(s,r,F,H,c,Y)}return;default:if(No(r)){for(var mt in o)H=o[mt],o.hasOwnProperty(mt)&&H!==void 0&&!c.hasOwnProperty(mt)&&Pp(s,r,mt,void 0,c,H);for(W in c)H=c[W],Y=o[W],!c.hasOwnProperty(W)||H===Y||H===void 0&&Y===void 0||Pp(s,r,W,H,c,Y);return}}for(var U in o)H=o[U],o.hasOwnProperty(U)&&H!=null&&!c.hasOwnProperty(U)&&ft(s,r,U,null,c,H);for(Z in c)H=c[Z],Y=o[Z],!c.hasOwnProperty(Z)||H===Y||H==null&&Y==null||ft(s,r,Z,H,c,Y)}function jb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],m=d.transferSize,b=d.initiatorType,S=d.duration;if(m&&S&&jb(b)){for(b=0,S=d.responseEnd,c+=1;c<o.length;c++){var k=o[c],F=k.startTime;if(F>S)break;var W=k.transferSize,Z=k.initiatorType;W&&jb(Z)&&(k=k.responseEnd,b+=W*(k<S?1:(S-F)/(k-F)))}if(--c,r+=8*(m+b)/(d.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Vp=null,Lp=null;function rd(s){return s.nodeType===9?s:s.ownerDocument}function zb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bb(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Up(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jp=null;function PR(){var s=window.event;return s&&s.type==="popstate"?s===jp?!1:(jp=s,!0):(jp=null,!1)}var Fb=typeof setTimeout=="function"?setTimeout:void 0,VR=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,LR=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(s){return qb.resolve(null).then(s).catch(UR)}:Fb;function UR(s){setTimeout(function(){throw s})}function Wr(s){return s==="head"}function Hb(s,r){var o=r,c=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(d),hl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")zc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,zc(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[oi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&zc(s.ownerDocument.body);o=d}while(o);hl(r)}function Gb(s,r){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function zp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":zp(o),Co(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function jR(s,r,o,c){for(;s.nodeType===1;){var d=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[oi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==d.rel||s.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||s.getAttribute("title")!==(d.title==null?null:d.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(d.src==null?null:d.src)||s.getAttribute("type")!==(d.type==null?null:d.type)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=Ss(s.nextSibling),s===null)break}return null}function zR(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ss(s.nextSibling),s===null))return null;return s}function Kb(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Ss(s.nextSibling),s===null))return null;return s}function Bp(s){return s.data==="$?"||s.data==="$~"}function Fp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function BR(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Ss(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var qp=null;function Yb(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return Ss(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function $b(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function Qb(s,r,o){switch(r=rd(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function zc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Co(s)}var As=new Map,Wb=new Set;function ad(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var nr=ie.d;ie.d={f:FR,r:qR,D:HR,C:GR,L:KR,m:YR,X:QR,S:$R,M:WR};function FR(){var s=nr.f(),r=Xh();return s||r}function qR(s){var r=ms(s);r!==null&&r.tag===5&&r.type==="form"?f0(r):nr.r(s)}var ll=typeof document>"u"?null:document;function Xb(s,r,o){var c=ll;if(c&&typeof r=="string"&&r){var d=Bn(r);d='link[rel="'+s+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Wb.has(d)||(Wb.add(d),s={rel:s,crossOrigin:o,href:r},c.querySelector(d)===null&&(r=c.createElement("link"),En(r,"link",s),zt(r),c.head.appendChild(r)))}}function HR(s){nr.D(s),Xb("dns-prefetch",s,null)}function GR(s,r){nr.C(s,r),Xb("preconnect",s,r)}function KR(s,r,o){nr.L(s,r,o);var c=ll;if(c&&s&&r){var d='link[rel="preload"][as="'+Bn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Bn(o.imageSizes)+'"]')):d+='[href="'+Bn(s)+'"]';var m=d;switch(r){case"style":m=cl(s);break;case"script":m=ul(s)}As.has(m)||(s=_({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),As.set(m,s),c.querySelector(d)!==null||r==="style"&&c.querySelector(Bc(m))||r==="script"&&c.querySelector(Fc(m))||(r=c.createElement("link"),En(r,"link",s),zt(r),c.head.appendChild(r)))}}function YR(s,r){nr.m(s,r);var o=ll;if(o&&s){var c=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Bn(c)+'"][href="'+Bn(s)+'"]',m=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ul(s)}if(!As.has(m)&&(s=_({rel:"modulepreload",href:s},r),As.set(m,s),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fc(m)))return}c=o.createElement("link"),En(c,"link",s),zt(c),o.head.appendChild(c)}}}function $R(s,r,o){nr.S(s,r,o);var c=ll;if(c&&s){var d=ci(c).hoistableStyles,m=cl(s);r=r||"default";var b=d.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(Bc(m)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":r},o),(o=As.get(m))&&Hp(s,o);var k=b=c.createElement("link");zt(k),En(k,"link",s),k._p=new Promise(function(F,W){k.onload=F,k.onerror=W}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,od(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(m,b)}}}function QR(s,r){nr.X(s,r);var o=ll;if(o&&s){var c=ci(o).hoistableScripts,d=ul(s),m=c.get(d);m||(m=o.querySelector(Fc(d)),m||(s=_({src:s,async:!0},r),(r=As.get(d))&&Gp(s,r),m=o.createElement("script"),zt(m),En(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function WR(s,r){nr.M(s,r);var o=ll;if(o&&s){var c=ci(o).hoistableScripts,d=ul(s),m=c.get(d);m||(m=o.querySelector(Fc(d)),m||(s=_({src:s,async:!0,type:"module"},r),(r=As.get(d))&&Gp(s,r),m=o.createElement("script"),zt(m),En(m,"link",s),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function Jb(s,r,o,c){var d=(d=be.current)?ad(d):null;if(!d)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=cl(o.href),o=ci(d).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=cl(o.href);var m=ci(d).hoistableStyles,b=m.get(s);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,b),(m=d.querySelector(Bc(s)))&&!m._p&&(b.instance=m,b.state.loading=5),As.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},As.set(s,o),m||XR(d,s,o,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ul(o),o=ci(d).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function cl(s){return'href="'+Bn(s)+'"'}function Bc(s){return'link[rel="stylesheet"]['+s+"]"}function Zb(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function XR(s,r,o,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),En(r,"link",o),zt(r),s.head.appendChild(r))}function ul(s){return'[src="'+Bn(s)+'"]'}function Fc(s){return"script[async]"+s}function eE(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Bn(o.href)+'"]');if(c)return r.instance=c,zt(c),c;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),zt(c),En(c,"style",d),od(c,o.precedence,s),r.instance=c;case"stylesheet":d=cl(o.href);var m=s.querySelector(Bc(d));if(m)return r.state.loading|=4,r.instance=m,zt(m),m;c=Zb(o),(d=As.get(d))&&Hp(c,d),m=(s.ownerDocument||s).createElement("link"),zt(m);var b=m;return b._p=new Promise(function(S,k){b.onload=S,b.onerror=k}),En(m,"link",c),r.state.loading|=4,od(m,o.precedence,s),r.instance=m;case"script":return m=ul(o.src),(d=s.querySelector(Fc(m)))?(r.instance=d,zt(d),d):(c=o,(d=As.get(m))&&(c=_({},o),Gp(c,d)),s=s.ownerDocument||s,d=s.createElement("script"),zt(d),En(d,"link",c),s.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,od(c,o.precedence,s));return r.instance}function od(s,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,m=d,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==d)break}m?m.parentNode.insertBefore(s,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function Hp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Gp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var ld=null;function tE(s,r,o){if(ld===null){var c=new Map,d=ld=new Map;d.set(o,c)}else d=ld,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),d=0;d<o.length;d++){var m=o[d];if(!(m[oi]||m[jt]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=s+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function nE(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function JR(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function sE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ZR(s,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=cl(c.href),m=r.querySelector(Bc(d));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=cd.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=m,zt(m);return}m=r.ownerDocument||r,c=Zb(c),(d=As.get(d))&&Hp(c,d),m=m.createElement("link"),zt(m);var b=m;b._p=new Promise(function(S,k){b.onload=S,b.onerror=k}),En(m,"link",c),o.instance=m}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=cd.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var Kp=0;function eI(s,r){return s.stylesheets&&s.count===0&&hd(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&hd(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4+r);0<s.imgBytes&&Kp===0&&(Kp=62500*MR());var d=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hd(s,s.stylesheets),s.unsuspend)){var m=s.unsuspend;s.unsuspend=null,m()}},(s.imgBytes>Kp?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function cd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ud=null;function hd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ud=new Map,r.forEach(tI,s),ud=null,cd.call(s))}function tI(s,r){if(!(r.state.loading&4)){var o=ud.get(s);if(o)var c=o.get(null);else{o=new Map,ud.set(s,o);for(var d=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var b=d[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}d=r.instance,b=d.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,d),o.set(b,d),this.count++,c=cd.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),m?m.parentNode.insertBefore(d,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(d,s.firstChild)),r.state.loading|=4}}var qc={$$typeof:re,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function nI(s,r,o,c,d,m,b,S,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vn(0),this.hiddenUpdates=Vn(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function iE(s,r,o,c,d,m,b,S,k,F,W,Z){return s=new nI(s,r,o,b,k,F,W,Z,S),r=1,m===!0&&(r|=24),m=is(3,null,null,r),s.current=m,m.stateNode=s,r=Am(),r.refCount++,s.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Im(m),s}function rE(s){return s?(s=Bo,s):Bo}function aE(s,r,o,c,d,m){d=rE(d),c.context===null?c.context=d:c.pendingContext=d,c=jr(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=zr(s,c,r),o!==null&&(Yn(o,s,r),Ec(o,s,r))}function oE(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function Yp(s,r){oE(s,r),(s=s.alternate)&&oE(s,r)}function lE(s){if(s.tag===13||s.tag===31){var r=Ya(s,67108864);r!==null&&Yn(r,s,67108864),Yp(s,67108864)}}function cE(s){if(s.tag===13||s.tag===31){var r=cs();r=ri(r);var o=Ya(s,r);o!==null&&Yn(o,s,r),Yp(s,r)}}var dd=!0;function sI(s,r,o,c){var d=z.T;z.T=null;var m=ie.p;try{ie.p=2,$p(s,r,o,c)}finally{ie.p=m,z.T=d}}function iI(s,r,o,c){var d=z.T;z.T=null;var m=ie.p;try{ie.p=8,$p(s,r,o,c)}finally{ie.p=m,z.T=d}}function $p(s,r,o,c){if(dd){var d=Qp(c);if(d===null)Mp(s,r,c,fd,o),hE(s,c);else if(aI(d,s,r,o,c))c.stopPropagation();else if(hE(s,c),r&4&&-1<rI.indexOf(s)){for(;d!==null;){var m=ms(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=es(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var k=1<<31-At(b);S.entanglements[1]|=k,b&=~k}Ti(m),(st&6)===0&&(Qh=fn()+500,Lc(0))}}break;case 31:case 13:S=Ya(m,2),S!==null&&Yn(S,m,2),Xh(),Yp(m,2)}if(m=Qp(c),m===null&&Mp(s,r,c,fd,o),m===d)break;d=m}d!==null&&c.stopPropagation()}else Mp(s,r,c,null,o)}}function Qp(s){return s=ps(s),Wp(s)}var fd=null;function Wp(s){if(fd=null,s=li(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=u(r),s!==null)return s;s=null}else if(o===31){if(s=f(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return fd=s,null}function uE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Li()){case si:return 2;case Oa:return 8;case Os:case Ma:return 32;case Ms:return 268435456;default:return 32}default:return 32}}var Xp=!1,Xr=null,Jr=null,Zr=null,Hc=new Map,Gc=new Map,ea=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hE(s,r){switch(s){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Hc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(r.pointerId)}}function Kc(s,r,o,c,d,m){return s===null||s.nativeEvent!==m?(s={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=ms(r),r!==null&&lE(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),s)}function aI(s,r,o,c,d){switch(r){case"focusin":return Xr=Kc(Xr,s,r,o,c,d),!0;case"dragenter":return Jr=Kc(Jr,s,r,o,c,d),!0;case"mouseover":return Zr=Kc(Zr,s,r,o,c,d),!0;case"pointerover":var m=d.pointerId;return Hc.set(m,Kc(Hc.get(m)||null,s,r,o,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Gc.set(m,Kc(Gc.get(m)||null,s,r,o,c,d)),!0}return!1}function dE(s){var r=li(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){cE(o)});return}}else if(r===31){if(r=f(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){cE(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function md(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=Qp(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);rc=c,o.target.dispatchEvent(c),rc=null}else return r=ms(o),r!==null&&lE(r),s.blockedOn=o,!1;r.shift()}return!0}function fE(s,r,o){md(s)&&o.delete(r)}function oI(){Xp=!1,Xr!==null&&md(Xr)&&(Xr=null),Jr!==null&&md(Jr)&&(Jr=null),Zr!==null&&md(Zr)&&(Zr=null),Hc.forEach(fE),Gc.forEach(fE)}function pd(s,r){s.blockedOn===r&&(s.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oI)))}var gd=null;function mE(s){gd!==s&&(gd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gd===s&&(gd=null);for(var r=0;r<s.length;r+=3){var o=s[r],c=s[r+1],d=s[r+2];if(typeof c!="function"){if(Wp(c||o)===null)continue;break}var m=ms(o);m!==null&&(s.splice(r,3),r-=3,Qm(m,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function hl(s){function r(k){return pd(k,s)}Xr!==null&&pd(Xr,s),Jr!==null&&pd(Jr,s),Zr!==null&&pd(Zr,s),Hc.forEach(r),Gc.forEach(r);for(var o=0;o<ea.length;o++){var c=ea[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ea.length&&(o=ea[0],o.blockedOn===null);)dE(o),o.blockedOn===null&&ea.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],m=o[c+1],b=d[sn]||null;if(typeof m=="function")b||mE(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(d=m,b=m[sn]||null)S=b.formAction;else if(Wp(d)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),mE(o)}}}function pE(){function s(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Jp(s){this._internalRoot=s}_d.prototype.render=Jp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=cs();aE(o,c,s,r,null,null)},_d.prototype.unmount=Jp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;aE(s.current,2,null,s,null,null),Xh(),r[ai]=null}};function _d(s){this._internalRoot=s}_d.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ql();s={blockedOn:null,target:s,priority:r};for(var o=0;o<ea.length&&r!==0&&r<ea[o].priority;o++);ea.splice(o,0,s),o===0&&dE(s)}};var gE=e.version;if(gE!=="19.2.0")throw Error(i(527,gE,"19.2.0"));ie.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var lI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{Jn=yd.inject(lI),Wt=yd}catch{}}return $c.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,c="",d=w0,m=S0,b=A0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=iE(s,1,!1,null,null,o,c,null,d,m,b,pE),s[ai]=r.current,Op(s),new Jp(r)},$c.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var c=!1,d="",m=w0,b=S0,S=A0,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),r=iE(s,1,!0,r,o??null,c,d,k,m,b,S,pE),r.context=rE(null),o=r.current,c=cs(),c=ri(c),d=jr(c),d.callback=null,zr(o,d,c),o=c,r.current.lanes=o,vt(r,o),Ti(r),s[ai]=r.current,Op(s),new _d(r)},$c.version="19.2.0",$c}var xE;function yI(){if(xE)return eg.exports;xE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=_I(),eg.exports}var vI=yI();function bI(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,a,l,u=[],f="",p=n.split("/");for(p[0]||p.shift();a=p.shift();)t=a[0],t==="*"?(u.push(t),f+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(i=a.indexOf("?",1),l=a.indexOf(".",1),u.push(a.substring(1,~i?i:~l?l:a.length)),f+=~i&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(f+=(~i?"?":"")+"\\"+a.substring(l))):f+="/"+a;return{keys:u,pattern:new RegExp("^"+f+(e?"(?=$|/)":"/?$"),"i")}}var oe=xf();const ae=hS(oe),fS=uI({__proto__:null,default:ae},[oe]);var rg={exports:{}},ag={};var CE;function EI(){if(CE)return ag;CE=1;var n=xf();function e(_,w){return _===w&&(_!==0||1/_===1/w)||_!==_&&w!==w}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function f(_,w){var I=w(),P=i({inst:{value:I,getSnapshot:w}}),q=P[0].inst,G=P[1];return l(function(){q.value=I,q.getSnapshot=w,p(q)&&G({inst:q})},[_,I,w]),a(function(){return p(q)&&G({inst:q}),_(function(){p(q)&&G({inst:q})})},[_]),u(I),I}function p(_){var w=_.getSnapshot;_=_.value;try{var I=w();return!t(_,I)}catch{return!0}}function g(_,w){return w()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return ag.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,ag}var RE;function TI(){return RE||(RE=1,rg.exports=EI()),rg.exports}var wI=TI();const SI=fS.useInsertionEffect,AI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xI=AI?oe.useLayoutEffect:oe.useEffect,CI=SI||xI,mS=n=>{const e=oe.useRef([n,(...t)=>e[0](...t)]).current;return CI(()=>{e[0]=n}),e[1]},RI="popstate",x_="pushState",C_="replaceState",II="hashchange",IE=[RI,x_,C_,II],NI=n=>{for(const e of IE)addEventListener(e,n);return()=>{for(const e of IE)removeEventListener(e,n)}},pS=(n,e)=>wI.useSyncExternalStore(NI,n,e),kI=()=>location.search,DI=({ssrSearch:n=""}={})=>pS(kI,()=>n),NE=()=>location.pathname,OI=({ssrPath:n}={})=>pS(NE,n?()=>n:NE),MI=(n,{replace:e=!1,state:t=null}={})=>history[e?C_:x_](t,"",n),PI=(n={})=>[OI(n),MI],kE=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[kE]>"u"){for(const n of[x_,C_]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),i=new Event(n);return i.arguments=arguments,dispatchEvent(i),t}}Object.defineProperty(window,kE,{value:!0})}const VI=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",gS=(n="")=>n==="/"?"":n,LI=(n,e)=>n[0]==="~"?n.slice(1):gS(e)+n,UI=(n="",e)=>VI(DE(gS(n)),DE(e)),DE=n=>{try{return decodeURI(n)}catch{return n}},_S={hook:PI,searchHook:DI,parser:bI,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},yS=oe.createContext(_S),Du=()=>oe.useContext(yS),vS={},bS=oe.createContext(vS),jI=()=>oe.useContext(bS),R_=n=>{const[e,t]=n.hook(n);return[UI(n.base,e),mS((i,a)=>t(LI(i,n.base),a))]},Zs=()=>R_(Du()),ES=(n,e,t,i)=>{const{pattern:a,keys:l}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",i),u=a.exec(t)||[],[f,...p]=u;return f!==void 0?[!0,(()=>{const g=l!==!1?Object.fromEntries(l.map((_,w)=>[_,p[w]])):u.groups;let v={...p};return g&&Object.assign(v,g),v})(),...i?[f]:[]]:[!1,null]},zI=n=>ES(Du().parser,n,Zs()[0]),TS=({children:n,...e})=>{const t=Du(),i=e.hook?_S:t;let a=i;const[l,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=l),e.hrefs=e.hrefs??e.hook?.hrefs;let f=oe.useRef({}),p=f.current,g=p;for(let v in i){const _=v==="base"?i[v]+(e[v]||""):e[v]||i[v];p===g&&_!==g[v]&&(f.current=g={...g}),g[v]=_,_!==i[v]&&(a=g)}return oe.createElement(yS.Provider,{value:a,children:n})},OE=({children:n,component:e},t)=>e?oe.createElement(e,{params:t}):typeof n=="function"?n(t):n,BI=n=>{let e=oe.useRef(vS),t=e.current;for(const i in n)n[i]!==t[i]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},wi=({path:n,nest:e,match:t,...i})=>{const a=Du(),[l]=R_(a),[u,f,p]=t??ES(a.parser,n,l,e),g=BI({...jI(),...f});if(!u)return null;const v=p?oe.createElement(TS,{base:p},OE(i,g)):OE(i,g);return oe.createElement(bS.Provider,{value:g,children:v})};oe.forwardRef((n,e)=>{const t=Du(),[i,a]=R_(t),{to:l="",href:u=l,onClick:f,asChild:p,children:g,className:v,replace:_,state:w,...I}=n,P=mS(G=>{G.ctrlKey||G.metaKey||G.altKey||G.shiftKey||G.button!==0||(f?.(G),G.defaultPrevented||(G.preventDefault(),a(u,n)))}),q=t.hrefs(u[0]==="~"?u.slice(1):t.base+u,t);return p&&oe.isValidElement(g)?oe.cloneElement(g,{onClick:P,href:q}):oe.createElement("a",{...I,onClick:P,href:q,className:v?.call?v(i===u):v,children:g,ref:e})});const FI="modulepreload",qI=function(n){return"/SocialSphere/"+n},ME={},HI=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let g=function(v){return Promise.all(v.map(_=>Promise.resolve(_).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var u=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");a=g(t.map(v=>{if(v=qI(v),v in ME)return;ME[v]=!0;const _=v.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${w}`))return;const I=document.createElement("link");if(I.rel=_?"stylesheet":FI,_||(I.as="script"),I.crossOrigin="",I.href=v,p&&I.setAttribute("nonce",p),document.head.appendChild(I),_)return new Promise((P,q)=>{I.addEventListener("load",P),I.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return a.then(f=>{for(const p of f||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},PE=n=>{let e;const t=new Set,i=(g,v)=>{const _=typeof g=="function"?g(e):g;if(!Object.is(_,e)){const w=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(I=>I(e,w))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:g=>(t.add(g),()=>t.delete(g))},p=e=n(i,a,f);return f},GI=(n=>n?PE(n):PE),KI=n=>n;function YI(n,e=KI){const t=ae.useSyncExternalStore(n.subscribe,ae.useCallback(()=>e(n.getState()),[n,e]),ae.useCallback(()=>e(n.getInitialState()),[n,e]));return ae.useDebugValue(t),t}const VE=n=>{const e=GI(n),t=i=>YI(e,i);return Object.assign(t,e),t},$I=(n=>n?VE(n):VE),QI=()=>{};var LE={};const wS={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const ue=function(n,e){if(!n)throw Vl(e)},Vl=function(n){return new Error("Firebase Database ("+wS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const SS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},WI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},I_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|f>>4;let w=(f&15)<<2|g>>6,I=g&63;p||(I=64,u||(w=64)),i.push(t[v],t[_],t[w],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||g==null||_==null)throw new XI;const w=l<<2|f>>4;if(i.push(w),g!==64){const I=f<<4&240|g>>2;if(i.push(I),_!==64){const P=g<<6&192|_;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AS=function(n){const e=SS(n);return I_.encodeByteArray(e,!0)},Gd=function(n){return AS(n).replace(/\./g,"")},Kd=function(n){try{return I_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JI(n){return xS(void 0,n)}function xS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ZI(t)||(n[t]=xS(n[t],e[t]));return n}function ZI(n){return n!=="__proto__"}function eN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tN=()=>eN().__FIREBASE_DEFAULTS__,nN=()=>{if(typeof process>"u"||typeof LE>"u")return;const n=LE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kd(n[1]);return e&&JSON.parse(e)},Cf=()=>{try{return QI()||tN()||nN()||sN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CS=n=>Cf()?.emulatorHosts?.[n],N_=n=>{const e=CS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},RS=()=>Cf()?.config,IS=n=>Cf()?.[`_${n}`];class k_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function br(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rf(n){return(await fetch(n,{credentials:"include"})).ok}function D_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Gd(JSON.stringify(t)),Gd(JSON.stringify(u)),""].join(".")}const ou={};function iN(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function rN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let UE=!1;function If(n,e){if(typeof window>"u"||typeof document>"u"||!br(window.location.host)||ou[n]===e||ou[n]||UE)return;ou[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=iN().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{UE=!0,u()},w}function v(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=rN(i),I=t("text"),P=document.getElementById(I)||document.createElement("span"),q=t("learnmore"),G=document.getElementById(q)||document.createElement("a"),$=t("preprendIcon"),ce=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const re=w.element;f(re),v(G,q);const me=g();p(ce,$),re.append(ce,P,G,me),document.body.appendChild(re)}l?(P.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function aN(){const n=Cf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cN(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uN(){return wS.NODE_ADMIN===!0}function hN(){return!aN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dN(){try{return typeof indexedDB=="object"}catch{return!1}}function fN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const mN="FirebaseError";class Pi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mN,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?pN(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Pi(a,f,i)}}function pN(n,e){return n.replace(gN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const gN=/\{\$([^}]+)}/g;function bu(n){return JSON.parse(n)}function Tn(n){return JSON.stringify(n)}const kS=function(n){let e={},t={},i={},a="";try{const l=n.split(".");e=bu(Kd(l[0])||""),t=bu(Kd(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},_N=function(n){const e=kS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},yN=function(n){const e=kS(n).claims;return typeof e=="object"&&e.admin===!0};function Er(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Cl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Mg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yd(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function pa(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(jE(l)&&jE(u)){if(!pa(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function jE(n){return n!==null&&typeof n=="object"}function Ll(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function nu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class vN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const w=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(w<<1|w>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],f=this.chain_[3],p=this.chain_[4],g,v;for(let _=0;_<80;_++){_<40?_<20?(g=f^l&(u^f),v=1518500249):(g=l^u^f,v=1859775393):_<60?(g=l&u|f&(l|u),v=2400959708):(g=l^u^f,v=3395469782);const w=(a<<5|a>>>27)+g+p+v+i[_]&4294967295;p=f,f=u,u=(l<<30|l>>>2)&4294967295,l=a,a=w}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function bN(n,e){const t=new EN(n,e);return t.subscribe.bind(t)}class EN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=og),a.error===void 0&&(a.error=og),a.complete===void 0&&(a.complete=og);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function og(){}function wN(n,e){return`${n} failed: ${e} argument `}const SN=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,ue(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Nf=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function Lt(n){return n&&n._delegate?n._delegate:n}class fr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oo="[DEFAULT]";class AN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new k_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CN(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xN(n){return n===oo?void 0:n}function CN(n){return n.instantiationMode==="EAGER"}class RN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new AN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const IN={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},NN=Be.INFO,kN={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},DN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=kN[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=NN,this._logHandler=DN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const ON=(n,e)=>e.some(t=>n instanceof t);let zE,BE;function MN(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PN(){return BE||(BE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DS=new WeakMap,Pg=new WeakMap,OS=new WeakMap,lg=new WeakMap,M_=new WeakMap;function VN(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ca(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&DS.set(t,n)}).catch(()=>{}),M_.set(e,n),e}function LN(n){if(Pg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Pg.set(n,e)}let Vg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Pg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ca(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UN(n){Vg=n(Vg)}function jN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cg(this),e,...t);return OS.set(i,e.sort?e.sort():[e]),ca(i)}:PN().includes(n)?function(...e){return n.apply(cg(this),e),ca(DS.get(this))}:function(...e){return ca(n.apply(cg(this),e))}}function zN(n){return typeof n=="function"?jN(n):(n instanceof IDBTransaction&&LN(n),ON(n,MN())?new Proxy(n,Vg):n)}function ca(n){if(n instanceof IDBRequest)return VN(n);if(lg.has(n))return lg.get(n);const e=zN(n);return e!==n&&(lg.set(n,e),M_.set(e,n)),e}const cg=n=>M_.get(n);function BN(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=ca(u);return i&&u.addEventListener("upgradeneeded",p=>{i(ca(u.result),p.oldVersion,p.newVersion,ca(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const FN=["get","getKey","getAll","getAllKeys","count"],qN=["put","add","delete","clear"],ug=new Map;function FE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=qN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||FN.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&p.done]))[0]};return ug.set(e,l),l}UN(n=>({...n,get:(e,t,i)=>FE(e,t)||n.get(e,t,i),has:(e,t)=>!!FE(e,t)||n.has(e,t)}));class HN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function GN(n){return n.getComponent()?.type==="VERSION"}const Lg="@firebase/app",qE="0.14.6";const mr=new kf("@firebase/app"),KN="@firebase/app-compat",YN="@firebase/analytics-compat",$N="@firebase/analytics",QN="@firebase/app-check-compat",WN="@firebase/app-check",XN="@firebase/auth",JN="@firebase/auth-compat",ZN="@firebase/database",e2="@firebase/data-connect",t2="@firebase/database-compat",n2="@firebase/functions",s2="@firebase/functions-compat",i2="@firebase/installations",r2="@firebase/installations-compat",a2="@firebase/messaging",o2="@firebase/messaging-compat",l2="@firebase/performance",c2="@firebase/performance-compat",u2="@firebase/remote-config",h2="@firebase/remote-config-compat",d2="@firebase/storage",f2="@firebase/storage-compat",m2="@firebase/firestore",p2="@firebase/ai",g2="@firebase/firestore-compat",_2="firebase",y2="12.6.0";const Ug="[DEFAULT]",v2={[Lg]:"fire-core",[KN]:"fire-core-compat",[$N]:"fire-analytics",[YN]:"fire-analytics-compat",[WN]:"fire-app-check",[QN]:"fire-app-check-compat",[XN]:"fire-auth",[JN]:"fire-auth-compat",[ZN]:"fire-rtdb",[e2]:"fire-data-connect",[t2]:"fire-rtdb-compat",[n2]:"fire-fn",[s2]:"fire-fn-compat",[i2]:"fire-iid",[r2]:"fire-iid-compat",[a2]:"fire-fcm",[o2]:"fire-fcm-compat",[l2]:"fire-perf",[c2]:"fire-perf-compat",[u2]:"fire-rc",[h2]:"fire-rc-compat",[d2]:"fire-gcs",[f2]:"fire-gcs-compat",[m2]:"fire-fst",[g2]:"fire-fst-compat",[p2]:"fire-vertex","fire-js":"fire-js",[_2]:"fire-js-all"};const $d=new Map,b2=new Map,jg=new Map;function HE(n,e){try{n.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ga(n){const e=n.name;if(jg.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;jg.set(e,n);for(const t of $d.values())HE(t,n);for(const t of b2.values())HE(t,n);return!0}function Mu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}const E2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new Ou("app","Firebase",E2);class T2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}}const Sa=y2;function MS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Ug,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ua.create("bad-app-name",{appName:String(a)});if(t||(t=RS()),!t)throw ua.create("no-options");const l=$d.get(a);if(l){if(pa(t,l.options)&&pa(i,l.config))return l;throw ua.create("duplicate-app",{appName:a})}const u=new RN(a);for(const p of jg.values())u.addComponent(p);const f=new T2(t,i,u);return $d.set(a,f),f}function Df(n=Ug){const e=$d.get(n);if(!e&&n===Ug&&RS())return MS();if(!e)throw ua.create("no-app",{appName:n});return e}function Rs(n,e,t){let i=v2[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(u.join(" "));return}ga(new fr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const w2="firebase-heartbeat-database",S2=1,Eu="firebase-heartbeat-store";let hg=null;function PS(){return hg||(hg=BN(w2,S2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),hg}async function A2(n){try{const t=(await PS()).transaction(Eu),i=await t.objectStore(Eu).get(VS(n));return await t.done,i}catch(e){if(e instanceof Pi)mr.warn(e.message);else{const t=ua.create("idb-get",{originalErrorMessage:e?.message});mr.warn(t.message)}}}async function GE(n,e){try{const i=(await PS()).transaction(Eu,"readwrite");await i.objectStore(Eu).put(e,VS(n)),await i.done}catch(t){if(t instanceof Pi)mr.warn(t.message);else{const i=ua.create("idb-set",{originalErrorMessage:t?.message});mr.warn(i.message)}}}function VS(n){return`${n.name}!${n.options.appId}`}const x2=1024,C2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>C2){const a=k2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=KE(),{heartbeatsToSend:t,unsentEntries:i}=I2(this._heartbeatsCache.heartbeats),a=Gd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return mr.warn(e),""}}}function KE(){return new Date().toISOString().substring(0,10)}function I2(n,e=x2){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),YE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),YE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class N2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dN()?fN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await A2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return GE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return GE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function YE(n){return Gd(JSON.stringify({version:2,heartbeats:n})).length}function k2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function D2(n){ga(new fr("platform-logger",e=>new HN(e),"PRIVATE")),ga(new fr("heartbeat",e=>new R2(e),"PRIVATE")),Rs(Lg,qE,n),Rs(Lg,qE,"esm2020"),Rs("fire-js","")}D2("");var O2="firebase",M2="12.6.0";Rs(O2,M2,"app");function LS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P2=LS,US=new Ou("auth","Firebase",LS());const Qd=new kf("@firebase/auth");function V2(n,...e){Qd.logLevel<=Be.WARN&&Qd.warn(`Auth (${Sa}): ${n}`,...e)}function kd(n,...e){Qd.logLevel<=Be.ERROR&&Qd.error(`Auth (${Sa}): ${n}`,...e)}function Is(n,...e){throw V_(n,...e)}function Ws(n,...e){return V_(n,...e)}function P_(n,e,t){const i={...P2(),[e]:t};return new Ou("auth","Firebase",i).create(e,{appName:n.name})}function ur(n){return P_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L2(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Is(n,"argument-error"),P_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function V_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return US.create(n,...e)}function xe(n,e,...t){if(!n)throw V_(e,...t)}function or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kd(e),new Error(e)}function pr(n,e){n||or(e)}function zg(){return typeof self<"u"&&self.location?.href||""}function U2(){return $E()==="http:"||$E()==="https:"}function $E(){return typeof self<"u"&&self.location?.protocol||null}function j2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U2()||lN()||"connection"in navigator)?navigator.onLine:!0}function z2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,pr(t>e,"Short delay should be less than long delay!"),this.isMobile=O_()||NS()}get(){return j2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function L_(n,e){pr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class jS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const F2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q2=new Pu(3e4,6e4);function Aa(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xa(n,e,t,i,a={}){return zS(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Ll({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return oN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&br(n.emulatorConfig.host)&&(g.credentials="include"),jS.fetch()(await BS(n,n.config.apiHost,t,f),g)})}async function zS(n,e,t){n._canInitEmulator=!1;const i={...B2,...e};try{const a=new G2(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw vd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw vd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw vd(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw P_(n,v,g);Is(n,v)}}catch(a){if(a instanceof Pi)throw a;Is(n,"network-request-failed",{message:String(a)})}}async function Vu(n,e,t,i,a={}){const l=await xa(n,e,t,i,a);return"mfaPendingCredential"in l&&Is(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function BS(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?L_(n.config,a):`${n.config.apiScheme}://${a}`;return F2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function H2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ws(this.auth,"network-request-failed")),q2.get())})}}function vd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ws(n,e,i);return a.customData._tokenResponse=t,a}function QE(n){return n!==void 0&&n.enterprise!==void 0}class K2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return H2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y2(n,e){return xa(n,"GET","/v2/recaptchaConfig",Aa(n,e))}async function $2(n,e){return xa(n,"POST","/v1/accounts:delete",e)}async function Wd(n,e){return xa(n,"POST","/v1/accounts:lookup",e)}function lu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q2(n,e=!1){const t=Lt(n),i=await t.getIdToken(e),a=U_(i);xe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:lu(dg(a.auth_time)),issuedAtTime:lu(dg(a.iat)),expirationTime:lu(dg(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function dg(n){return Number(n)*1e3}function U_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return kd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Kd(t);return a?JSON.parse(a):(kd("Failed to decode base64 JWT payload"),null)}catch(a){return kd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function WE(n){const e=U_(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Pi&&W2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function W2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class X2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xd(n){const e=n.auth,t=await n.getIdToken(),i=await Tu(n,Wd(e,{idToken:t}));xe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?FS(a.providerUserInfo):[],u=Z2(n.providerData,l),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!u?.length,g=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Bg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function J2(n){const e=Lt(n);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z2(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function FS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function ek(n,e){const t=await zS(n,{},async()=>{const i=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await BS(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&br(n.emulatorConfig.host)&&(p.credentials="include"),jS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tk(n,e){return xa(n,"POST","/v2/accounts:revokeToken",Aa(n,e))}class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=WE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await ek(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new bl;return i&&(xe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(xe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(xe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return or("not implemented")}}function na(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ys{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new X2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q2(this,e)}reload(){return J2(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await Tu(this,$2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:I,providerData:P,stsTokenManager:q}=t;xe(_&&q,e,"internal-error");const G=bl.fromJSON(this.name,q);xe(typeof _=="string",e,"internal-error"),na(i,e.name),na(a,e.name),xe(typeof w=="boolean",e,"internal-error"),xe(typeof I=="boolean",e,"internal-error"),na(l,e.name),na(u,e.name),na(f,e.name),na(p,e.name),na(g,e.name),na(v,e.name);const $=new Ys({uid:_,auth:e,email:a,emailVerified:w,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:G,createdAt:g,lastLoginAt:v});return P&&Array.isArray(P)&&($.providerData=P.map(ce=>({...ce}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,t,i=!1){const a=new bl;a.updateFromServerResponse(t);const l=new Ys({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Xd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];xe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?FS(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,f=new bl;f.updateFromIdToken(i);const p=new Ys({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Bg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const XE=new Map;function lr(n){pr(n instanceof Function,"Expected a class definition");let e=XE.get(n);return e?(pr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,XE.set(n,e),e)}class qS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qS.type="NONE";const JE=qS;function Dd(n,e,t){return`firebase:${n}:${e}:${t}`}class El{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Dd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Dd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wd(this.auth,{idToken:e}).catch(()=>{});return t?Ys._fromGetAccountInfoResponse(this.auth,t,e):null}return Ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new El(lr(JE),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||lr(JE);const u=Dd(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(u);if(v){let _;if(typeof v=="string"){const w=await Wd(e,{idToken:v}).catch(()=>{});if(!w)break;_=await Ys._fromGetAccountInfoResponse(e,w,v)}else _=Ys._fromJSON(e,v);g!==l&&(f=_),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new El(l,e,i):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new El(l,e,i))}}function ZE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QS(e))return"Blackberry";if(WS(e))return"Webos";if(GS(e))return"Safari";if((e.includes("chrome/")||KS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function HS(n=On()){return/firefox\//i.test(n)}function GS(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KS(n=On()){return/crios\//i.test(n)}function YS(n=On()){return/iemobile/i.test(n)}function $S(n=On()){return/android/i.test(n)}function QS(n=On()){return/blackberry/i.test(n)}function WS(n=On()){return/webos/i.test(n)}function j_(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nk(n=On()){return j_(n)&&!!window.navigator?.standalone}function sk(){return cN()&&document.documentMode===10}function XS(n=On()){return j_(n)||$S(n)||WS(n)||QS(n)||/windows phone/i.test(n)||YS(n)}function JS(n,e=[]){let t;switch(n){case"Browser":t=ZE(On());break;case"Worker":t=`${ZE(On())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${i}`}class ik{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function rk(n,e={}){return xa(n,"GET","/v2/passwordPolicy",Aa(n,e))}const ak=6;class ok{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ak,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class lk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eT(this),this.idTokenSubscription=new eT(this),this.beforeStateQueue=new ik(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=US,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await El.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wd(this,{idToken:e}),i=await Ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ur(this));const t=e?Lt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rk(this),t=new ok(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lr(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ca(n){return Lt(n)}class eT{constructor(e){this.auth=e,this.observer=null,this.addObserver=bN(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ck(n){Of=n}function ZS(n){return Of.loadJS(n)}function uk(){return Of.recaptchaEnterpriseScript}function hk(){return Of.gapiScript}function dk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class fk{constructor(){this.enterprise=new mk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pk="recaptcha-enterprise",eA="NO_RECAPTCHA";class gk{constructor(e){this.type=pk,this.auth=Ca(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{Y2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new K2(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(p=>{f(p)})})}function a(l,u,f){const p=window.grecaptcha;QE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(eA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fk().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&QE(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=uk();p.length!==0&&(p+=f),ZS(p).then(()=>{a(f,l,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function tT(n,e,t,i=!1,a=!1){const l=new gk(n);let u;if(a)u=eA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Fg(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await tT(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await tT(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)})}function _k(n,e){const t=Mu(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(pa(l,e??{}))return a;Is(a,"already-initialized")}return t.initialize({options:e})}function yk(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function vk(n,e,t){const i=Ca(n);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=tA(e),{host:u,port:f}=bk(e),p=f===null?"":`:${f}`,g={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(pa(g,i.config.emulator)&&pa(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,br(u)?(Rf(`${l}//${u}${p}`),If("Auth",!0)):Ek()}function tA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bk(n){const e=tA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:nT(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:nT(u)}}}function nT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ek(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class z_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function Tk(n,e){return xa(n,"POST","/v1/accounts:signUp",e)}async function wk(n,e){return Vu(n,"POST","/v1/accounts:signInWithPassword",Aa(n,e))}async function Sk(n,e){return Vu(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,e))}async function Ak(n,e){return Vu(n,"POST","/v1/accounts:signInWithEmailLink",Aa(n,e))}class wu extends z_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new wu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new wu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fg(e,t,"signInWithPassword",wk);case"emailLink":return Sk(e,{email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fg(e,i,"signUpPassword",Tk);case"emailLink":return Ak(e,{idToken:t,email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Tl(n,e){return Vu(n,"POST","/v1/accounts:signInWithIdp",Aa(n,e))}const xk="http://localhost";class mo extends z_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new mo(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Tl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Tl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tl(e,t)}buildRequest(){const e={requestUri:xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ll(t)}return e}}function Ck(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Rk(n){const e=tu(nu(n)).link,t=e?tu(nu(e)).deep_link_id:null,i=tu(nu(n)).deep_link_id;return(i?tu(nu(i)).link:null)||i||t||e||n}class B_{constructor(e){const t=tu(nu(e)),i=t.apiKey??null,a=t.oobCode??null,l=Ck(t.mode??null);xe(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Rk(e);try{return new B_(t)}catch{return null}}}class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,t){return wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=B_.parseLink(t);return xe(i,"argument-error"),wu._fromEmailAndCode(e,i.code,i.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class F_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lu extends F_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ra extends Lu{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";class ar extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ar.credential(t,i)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";class aa extends Lu{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";class oa extends Lu{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return oa.credential(t,i)}catch{return null}}}oa.TWITTER_SIGN_IN_METHOD="twitter.com";oa.PROVIDER_ID="twitter.com";async function Ik(n,e){return Vu(n,"POST","/v1/accounts:signUp",Aa(n,e))}class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ys._fromIdTokenResponse(e,i,a),u=sT(i);return new po({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=sT(i);return new po({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function sT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Jd extends Pi{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Jd(e,t,i,a)}}function nA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(n,l,e,i):l})}async function Nk(n,e,t=!1){const i=await Tu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return po._forOperation(n,"link",i)}async function kk(n,e,t=!1){const{auth:i}=n;if(jn(i.app))return Promise.reject(ur(i));const a="reauthenticate";try{const l=await Tu(n,nA(i,a,e,n),t);xe(l.idToken,i,"internal-error");const u=U_(l.idToken);xe(u,i,"internal-error");const{sub:f}=u;return xe(n.uid===f,i,"user-mismatch"),po._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Is(i,"user-mismatch"),l}}async function sA(n,e,t=!1){if(jn(n.app))return Promise.reject(ur(n));const i="signIn",a=await nA(n,i,e),l=await po._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function Dk(n,e){return sA(Ca(n),e)}async function iA(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ok(n,e,t){if(jn(n.app))return Promise.reject(ur(n));const i=Ca(n),u=await Fg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ik).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&iA(n),p}),f=await po._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function Mk(n,e,t){return jn(n.app)?Promise.reject(ur(n)):Dk(Lt(n),Ul.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iA(n),i})}function Pk(n,e,t,i){return Lt(n).onIdTokenChanged(e,t,i)}function Vk(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function Lk(n,e,t,i){return Lt(n).onAuthStateChanged(e,t,i)}function Uk(n){return Lt(n).signOut()}const Zd="__sak";class rA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const jk=1e3,zk=10;class aA extends rA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);sk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,zk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aA.type="LOCAL";const Bk=aA;class oA extends rA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oA.type="SESSION";const lA=oA;function Fk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Mf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async g=>g(t.origin,l)),p=await Fk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];function q_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class qk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const g=q_("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ci(){return window}function Hk(n){Ci().location.href=n}function cA(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function Gk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kk(){return navigator?.serviceWorker?.controller||null}function Yk(){return cA()?self:null}const uA="firebaseLocalStorageDb",$k=1,ef="firebaseLocalStorage",hA="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pf(n,e){return n.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function Qk(){const n=indexedDB.deleteDatabase(uA);return new Uu(n).toPromise()}function qg(){const n=indexedDB.open(uA,$k);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ef,{keyPath:hA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ef)?e(i):(i.close(),await Qk(),e(await qg()))})})}async function iT(n,e,t){const i=Pf(n,!0).put({[hA]:e,value:t});return new Uu(i).toPromise()}async function Wk(n,e){const t=Pf(n,!1).get(e),i=await new Uu(t).toPromise();return i===void 0?null:i.value}function rT(n,e){const t=Pf(n,!0).delete(e);return new Uu(t).toPromise()}const Xk=800,Jk=3;class dA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Jk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(Yk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Gk(),!this.activeServiceWorker)return;this.sender=new qk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qg();return await iT(e,Zd,"1"),await rT(e,Zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Wk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Pf(a,!1).getAll();return new Uu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dA.type="LOCAL";const Zk=dA;new Pu(3e4,6e4);function fA(n,e){return e?lr(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class H_ extends z_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eD(n){return sA(n.auth,new H_(n),n.bypassAuthState)}function tD(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),kk(t,new H_(n),n.bypassAuthState)}async function nD(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Nk(t,new H_(n),n.bypassAuthState)}class mA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:Is(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sD=new Pu(2e3,1e4);async function iD(n,e,t){if(jn(n.app))return Promise.reject(Ws(n,"operation-not-supported-in-this-environment"));const i=Ca(n);L2(n,e,F_);const a=fA(i,t);return new co(i,"signInViaPopup",e,a).executeNotNull()}class co extends mA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sD.get())};e()}}co.currentPopupAction=null;const rD="pendingRedirect",Od=new Map;class aD extends mA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const i=await oD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oD(n,e){const t=uD(e),i=cD(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function lD(n,e){Od.set(n._key(),e)}function cD(n){return lr(n._redirectPersistence)}function uD(n){return Dd(rD,n.config.apiKey,n.name)}async function hD(n,e,t=!1){if(jn(n.app))return Promise.reject(ur(n));const i=Ca(n),a=fA(i,e),u=await new aD(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const dD=600*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ws(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dD&&this.cachedEventUids.clear(),this.cachedEventUids.has(aT(e))}saveEventToCache(e){this.cachedEventUids.add(aT(e)),this.lastProcessedEventTime=Date.now()}}function aT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(n);default:return!1}}async function pD(n,e={}){return xa(n,"GET","/v1/projects",e)}const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_D=/^https?/;async function yD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pD(n);for(const t of e)try{if(vD(t))return}catch{}Is(n,"unauthorized-domain")}function vD(n){const e=zg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!_D.test(t))return!1;if(gD.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const bD=new Pu(3e4,6e4);function oT(){const n=Ci().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ED(n){return new Promise((e,t)=>{function i(){oT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oT(),t(Ws(n,"network-request-failed"))},timeout:bD.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)i();else{const a=dk("iframefcb");return Ci()[a]=()=>{gapi.load?i():t(Ws(n,"network-request-failed"))},ZS(`${hk()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Md=null,e})}let Md=null;function TD(n){return Md=Md||ED(n),Md}const wD=new Pu(5e3,15e3),SD="__/auth/iframe",AD="emulator/auth/iframe",xD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RD(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?L_(e,AD):`https://${n.config.authDomain}/${SD}`,i={apiKey:e.apiKey,appName:n.name,v:Sa},a=CD.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ll(i).slice(1)}`}async function ID(n){const e=await TD(n),t=Ci().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:RD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xD,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ws(n,"network-request-failed"),f=Ci().setTimeout(()=>{l(u)},wD.get());function p(){Ci().clearTimeout(f),a(i)}i.ping(p).then(p,()=>{l(u)})}))}const ND={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kD=500,DD=600,OD="_blank",MD="http://localhost";class lT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PD(n,e,t,i=kD,a=DD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...ND,width:i.toString(),height:a.toString(),top:l,left:u},g=On().toLowerCase();t&&(f=KS(g)?OD:t),HS(g)&&(e=e||MD,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[I,P])=>`${w}${I}=${P},`,"");if(nk(g)&&f!=="_self")return VD(e||"",f),new lT(null);const _=window.open(e||"",f,v);xe(_,n,"popup-blocked");try{_.focus()}catch{}return new lT(_)}function VD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const LD="__/auth/handler",UD="emulator/auth/handler",jD=encodeURIComponent("fac");async function cT(n,e,t,i,a,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Sa,eventId:a};if(e instanceof F_){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Mg(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof Lu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),g=p?`#${jD}=${encodeURIComponent(p)}`:"";return`${zD(n)}?${Ll(f).slice(1)}${g}`}function zD({config:n}){return n.emulator?L_(n,UD):`https://${n.authDomain}/${LD}`}const fg="webStorageSupport";class BD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lA,this._completeRedirectFn=hD,this._overrideRedirectResult=lD}async _openPopup(e,t,i,a){pr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await cT(e,t,i,zg(),a);return PD(e,l,q_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await cT(e,t,i,zg(),a);return Hk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(pr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ID(e),i=new fD(e);return t.register("authEvent",a=>(xe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fg,{type:fg},a=>{const l=a?.[0]?.[fg];l!==void 0&&t(!!l),Is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XS()||GS()||j_()}}const FD=BD;var uT="@firebase/auth",hT="1.11.1";class qD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function HD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GD(n){ga(new fr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JS(n)},g=new lk(i,a,l,p);return yk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ga(new fr("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(i=>new qD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(uT,hT,HD(n)),Rs(uT,hT,"esm2020")}const KD=300,YD=IS("authIdTokenMaxAge")||KD;let dT=null;const $D=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>YD)return;const a=t?.token;dT!==a&&(dT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function QD(n=Df()){const e=Mu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_k(n,{popupRedirectResolver:FD,persistence:[Zk,Bk,lA]}),i=IS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=$D(l.toString());Vk(t,u,()=>u(t.currentUser)),Pk(t,f=>u(f))}}const a=CS("auth");return a&&vk(t,`http://${a}`),t}function WD(){return document.getElementsByTagName("head")?.[0]??document}ck({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ws("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",WD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GD("Browser");var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ha,gA;(function(){var n;function e(N,x){function R(){}R.prototype=x.prototype,N.F=x.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(V,O,L){for(var C=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)C[Je-2]=arguments[Je];return x.prototype[O].apply(V,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,x,R){R||(R=0);const V=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)V[O]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(O=0;O<16;++O)V[O]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=N.g[0],R=N.g[1],O=N.g[2];let L=N.g[3],C;C=x+(L^R&(O^L))+V[0]+3614090360&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+V[1]+3905402710&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+V[2]+606105819&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+V[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+V[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+V[5]+1200080426&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+V[6]+2821735955&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+V[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+V[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+V[9]+2336552879&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+V[10]+4294925233&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+V[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(L^R&(O^L))+V[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=L+(O^x&(R^O))+V[13]+4254626195&4294967295,L=x+(C<<12&4294967295|C>>>20),C=O+(R^L&(x^R))+V[14]+2792965006&4294967295,O=L+(C<<17&4294967295|C>>>15),C=R+(x^O&(L^x))+V[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=x+(O^L&(R^O))+V[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+V[6]+3225465664&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+V[11]+643717713&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+V[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+V[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+V[10]+38016083&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+V[15]+3634488961&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+V[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+V[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+V[14]+3275163606&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+V[3]+4107603335&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+V[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(O^L&(R^O))+V[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=L+(R^O&(x^R))+V[2]+4243563512&4294967295,L=x+(C<<9&4294967295|C>>>23),C=O+(x^R&(L^x))+V[7]+1735328473&4294967295,O=L+(C<<14&4294967295|C>>>18),C=R+(L^x&(O^L))+V[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=x+(R^O^L)+V[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+V[8]+2272392833&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+V[11]+1839030562&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+V[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+V[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+V[4]+1272893353&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+V[7]+4139469664&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+V[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+V[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+V[0]+3936430074&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+V[3]+3572445317&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+V[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(R^O^L)+V[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=L+(x^R^O)+V[12]+3873151461&4294967295,L=x+(C<<11&4294967295|C>>>21),C=O+(L^x^R)+V[15]+530742520&4294967295,O=L+(C<<16&4294967295|C>>>16),C=R+(O^L^x)+V[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=x+(O^(R|~L))+V[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+V[7]+1126891415&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+V[14]+2878612391&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+V[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+V[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+V[3]+2399980690&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+V[10]+4293915773&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+V[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+V[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+V[15]+4264355552&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+V[6]+2734768916&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+V[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=x+(O^(R|~L))+V[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=L+(R^(x|~O))+V[11]+3174756917&4294967295,L=x+(C<<10&4294967295|C>>>22),C=O+(x^(L|~R))+V[2]+718787259&4294967295,O=L+(C<<15&4294967295|C>>>17),C=R+(L^(O|~x))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.v=function(N,x){x===void 0&&(x=N.length);const R=x-this.blockSize,V=this.C;let O=this.h,L=0;for(;L<x;){if(O==0)for(;L<=R;)a(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<x;)if(V[O++]=N.charCodeAt(L++),O==this.blockSize){a(this,V),O=0;break}}else for(;L<x;)if(V[O++]=N[L++],O==this.blockSize){a(this,V),O=0;break}}this.h=O,this.o+=x},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)N[x++]=this.g[R]>>>V&255;return N};function l(N,x){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=x(N)}function u(N,x){this.h=x;const R=[];let V=!0;for(let O=N.length-1;O>=0;O--){const L=N[O]|0;V&&L==x||(R[O]=L,V=!1)}this.g=R}var f={};function p(N){return-128<=N&&N<128?l(N,function(x){return new u([x|0],x<0?-1:0)}):new u([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return _;if(N<0)return G(g(-N));const x=[];let R=1;for(let V=0;N>=R;V++)x[V]=N/R|0,R*=4294967296;return new u(x,0)}function v(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return G(v(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(x,8));let V=_;for(let L=0;L<N.length;L+=8){var O=Math.min(8,N.length-L);const C=parseInt(N.substring(L,L+O),x);O<8?(O=g(Math.pow(x,O)),V=V.j(O).add(g(C))):(V=V.j(R),V=V.add(g(C)))}return V}var _=p(0),w=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(q(this))return-G(this).m();let N=0,x=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);N+=(V>=0?V:4294967296+V)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(q(this))return"-"+G(this).toString(N);const x=g(Math.pow(N,6));var R=this;let V="";for(;;){const O=me(R,x).g;R=$(R,O.j(x));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,P(R))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function q(N){return N.h==-1}n.l=function(N){return N=$(this,N),q(N)?-1:P(N)?0:1};function G(N){const x=N.g.length,R=[];for(let V=0;V<x;V++)R[V]=~N.g[V];return new u(R,~N.h).add(w)}n.abs=function(){return q(this)?G(this):this},n.add=function(N){const x=Math.max(this.g.length,N.g.length),R=[];let V=0;for(let O=0;O<=x;O++){let L=V+(this.i(O)&65535)+(N.i(O)&65535),C=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=C>>>16,L&=65535,C&=65535,R[O]=C<<16|L}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(N,x){return N.add(G(x))}n.j=function(N){if(P(this)||P(N))return _;if(q(this))return q(N)?G(this).j(G(N)):G(G(this).j(N));if(q(N))return G(this.j(G(N)));if(this.l(I)<0&&N.l(I)<0)return g(this.m()*N.m());const x=this.g.length+N.g.length,R=[];for(var V=0;V<2*x;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<N.g.length;O++){const L=this.i(V)>>>16,C=this.i(V)&65535,Je=N.i(O)>>>16,Ze=N.i(O)&65535;R[2*V+2*O]+=C*Ze,ce(R,2*V+2*O),R[2*V+2*O+1]+=L*Ze,ce(R,2*V+2*O+1),R[2*V+2*O+1]+=C*Je,ce(R,2*V+2*O+1),R[2*V+2*O+2]+=L*Je,ce(R,2*V+2*O+2)}for(N=0;N<x;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=x;N<2*x;N++)R[N]=0;return new u(R,0)};function ce(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function re(N,x){this.g=N,this.h=x}function me(N,x){if(P(x))throw Error("division by zero");if(P(N))return new re(_,_);if(q(N))return x=me(G(N),x),new re(G(x.g),G(x.h));if(q(x))return x=me(N,G(x)),new re(G(x.g),x.h);if(N.g.length>30){if(q(N)||q(x))throw Error("slowDivide_ only works with positive integers.");for(var R=w,V=x;V.l(N)<=0;)R=Me(R),V=Me(V);var O=Ee(R,1),L=Ee(V,1);for(V=Ee(V,2),R=Ee(R,2);!P(V);){var C=L.add(V);C.l(N)<=0&&(O=O.add(R),L=C),V=Ee(V,1),R=Ee(R,1)}return x=$(N,O.j(x)),new re(O,x)}for(O=_;N.l(x)>=0;){for(R=Math.max(1,Math.floor(N.m()/x.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=g(R),C=L.j(x);q(C)||C.l(N)>0;)R-=V,L=g(R),C=L.j(x);P(L)&&(L=w),O=O.add(L),N=$(N,C)}return new re(O,N)}n.B=function(N){return me(this,N).h},n.and=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)&N.i(V);return new u(R,this.h&N.h)},n.or=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)|N.i(V);return new u(R,this.h|N.h)},n.xor=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)^N.i(V);return new u(R,this.h^N.h)};function Me(N){const x=N.g.length+1,R=[];for(let V=0;V<x;V++)R[V]=N.i(V)<<1|N.i(V-1)>>>31;return new u(R,N.h)}function Ee(N,x){const R=x>>5;x%=32;const V=N.g.length-R,O=[];for(let L=0;L<V;L++)O[L]=x>0?N.i(L+R)>>>x|N.i(L+R+1)<<32-x:N.i(L+R);return new u(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,ha=u}).apply(typeof fT<"u"?fT:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _A,su,yA,Pd,Hg,vA,bA,EA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var j=h[A];if(!(j in E))break e;E=E[j]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var l=l||{},u=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function v(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function _(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,j,K){for(var le=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)le[Pe-2]=arguments[Pe];return y.prototype[j].apply(A,le)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function P(h,y){for(let A=1;A<arguments.length;A++){const j=arguments[A];var E=typeof j;if(E=E!="object"?E:j?Array.isArray(j)?"array":E:"null",E=="array"||E=="object"&&typeof j.length=="number"){E=h.length||0;const K=j.length||0;h.length=E+K;for(let le=0;le<K;le++)h[E+le]=j[le]}else h.push(j)}}class q{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function G(h){u.setTimeout(()=>{throw h},0)}function $(){var h=N;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,E){const A=re.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var re=new q(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ee=!1,N=new ce,x=()=>{const h=Promise.resolve(void 0);Me=()=>{h.then(R)}};function R(){for(var h;h=$();){try{h.h.call(h.g)}catch(E){G(E)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Ee=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,y),u.removeEventListener("test",E,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Je(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}_(Je,O),Je.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),z=0;function ie(h,y,E,A,j){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=j,this.key=++z,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ne(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function ke(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function D(h){const y={};for(const E in h)y[E]=h[E];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(h,y){let E,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(E in A)h[E]=A[E];for(let K=0;K<X.length;K++)E=X[K],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,y,E,A,j){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const le=be(h,y,A,j);return le>-1?(y=h[le],E||(y.fa=!1)):(y=new ie(y,this.src,K,!!A,j),y.fa=E,h.push(y)),y};function he(h,y){const E=y.type;if(E in h.g){var A=h.g[E],j=Array.prototype.indexOf.call(A,y,void 0),K;(K=j>=0)&&Array.prototype.splice.call(A,j,1),K&&(ne(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function be(h,y,E,A){for(let j=0;j<h.length;++j){const K=h[j];if(!K.da&&K.listener==y&&K.capture==!!E&&K.ha==A)return j}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Re={};function Fe(h,y,E,A,j){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Fe(h,y[K],E,A,j);return null}return E=Sr(E),h&&h[Ze]?h.J(y,E,f(A)?!!A.capture:!1,j):hn(h,y,E,!1,A,j)}function hn(h,y,E,A,j,K){if(!y)throw Error("Invalid event type");const le=f(j)?!!j.capture:!!j;let Pe=ti(h);if(Pe||(h[ve]=Pe=new se(h)),E=Pe.add(y,E,A,le,K),E.proxy)return E;if(A=Mn(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)L||(j=le),j===void 0&&(j=!1),h.addEventListener(y.toString(),A,j);else if(h.attachEvent)h.attachEvent(zn(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Mn(){function h(E){return y.call(h.src,h.listener,E)}const y=Da;return h}function tn(h,y,E,A,j){if(Array.isArray(y))for(var K=0;K<y.length;K++)tn(h,y[K],E,A,j);else A=f(A)?!!A.capture:!!A,E=Sr(E),h&&h[Ze]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],E=be(y,E,A,j),E>-1&&(ne(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=ti(h))&&(y=h.g[y.toString()],h=-1,y&&(h=be(y,E,A,j)),(E=h>-1?y[h]:null)&&wr(E))}function wr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ze])he(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(zn(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=ti(y))?(he(E,h),E.h==0&&(E.src=null,y[ve]=null)):ne(h)}}}function zn(h){return h in Re?Re[h]:Re[h]="on"+h}function Da(h,y){if(h.da)h=!0;else{y=new Je(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&wr(h),h=E.call(A,y)}return h}function ti(h){return h=h[ve],h instanceof se?h:null}var ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sr(h){return typeof h=="function"?h:(h[ks]||(h[ks]=function(y){return h.handleEvent(y)}),h[ks])}function it(){V.call(this),this.i=new se(this),this.M=this,this.G=null}_(it,V),it.prototype[Ze]=!0,it.prototype.removeEventListener=function(h,y,E,A){tn(this,h,y,E,A)};function kt(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var j=y;y=new O(A,h),Q(y,j)}j=!0;let K,le;if(E)for(le=E.length-1;le>=0;le--)K=y.g=E[le],j=ni(K,A,!0,y)&&j;if(K=y.g=h,j=ni(K,A,!0,y)&&j,j=ni(K,A,!1,y)&&j,E)for(le=0;le<E.length;le++)K=y.g=E[le],j=ni(K,A,!1,y)&&j}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)ne(E[A]);delete h.g[y],h.h--}}this.G=null},it.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},it.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function ni(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let K=0;K<y.length;++K){const le=y[K];if(le&&!le.da&&le.capture==E){const Pe=le.listener,Dt=le.ha||le.src;le.fa&&he(h.i,le),j=Pe.call(Dt,A)!==!1&&j}}return j&&!A.defaultPrevented}function dn(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:u.setTimeout(h,y||0)}function Ds(h){h.g=dn(()=>{h.g=null,h.i&&(h.i=!1,Ds(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fn extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ds(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(h){V.call(this),this.h=h,this.g={}}_(Li,V);var si=[];function Oa(h){Ne(h.g,function(y,E){this.g.hasOwnProperty(E)&&wr(y)},h),h.g={}}Li.prototype.N=function(){Li.Z.N.call(this),Oa(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Os=u.JSON.stringify,Ma=u.JSON.parse,Ms=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Pa(){}function Ps(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){O.call(this,"d")}_(Wt,O);function Pn(){O.call(this,"c")}_(Pn,O);var At={},Ao=null;function ii(){return Ao=Ao||new it}At.Ia="serverreachability";function Zn(h){O.call(this,At.Ia,h)}_(Zn,O);function ds(h){const y=ii();kt(y,new Zn(y))}At.STAT_EVENT="statevent";function Ui(h,y){O.call(this,At.STAT_EVENT,h),this.stat=y}_(Ui,O);function Rt(h){const y=ii();kt(y,new Ui(y,h))}At.Ja="timingevent";function es(h,y){O.call(this,At.Ja,h),this.size=y}_(es,O);function Se(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},y)}function rt(){this.g=!0}rt.prototype.ua=function(){this.g=!1};function Ut(h,y,E,A,j,K){h.info(function(){if(h.g)if(K){var le="",Pe=K.split("&");for(let nt=0;nt<Pe.length;nt++){var Dt=Pe[nt].split("=");if(Dt.length>1){const xt=Dt[0];Dt=Dt[1];const _s=xt.split("_");le=_s.length>=2&&_s[1]=="type"?le+(xt+"="+Dt+"&"):le+(xt+"=redacted&")}}}else le=null;else le=K;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+y+`
`+E+`
`+le})}function nn(h,y,E,A,j,K,le){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+y+`
`+E+`
`+K+" "+le})}function Vn(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+An(h,E)+(A?" "+A:"")})}function vt(h,y){h.info(function(){return"TIMEOUT: "+y})}rt.prototype.info=function(){};function An(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var E=K[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var j=A[0];if(j!="noop"&&j!="stop"&&j!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return Os(K)}catch{return y}}var fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pn;function ri(){}_(ri,Pa),ri.prototype.g=function(){return new XMLHttpRequest},pn=new ri;function gn(h){return encodeURIComponent(String(h))}function Ql(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function Vs(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new Li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ls}function Ls(){this.i=null,this.g="",this.h=!1}var jt={},sn={};function ai(h,y,E){h.M=1,h.A=Va(Bt(y)),h.u=E,h.R=!0,xo(h,null)}function xo(h,y){h.F=Date.now(),oi(h),h.B=Bt(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),No(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Ls,h.g=dh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new fn(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var j="readystatechange";Array.isArray(j)||(j&&(si[0]=j.toString()),j=si);for(let K=0;K<j.length;K++){const le=Fe(E,j[K],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ds(),Ut(h.i,h.v,h.B,h.l,h.S,h.u)}Vs.prototype.ba=function(h){h=h.target;const y=this.O;y&&zs(h)==3?y.j():this.Y(h)},Vs.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=zs(this.g),Dt=this.g.ya(),nt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||Pe!=4||Dt==7||(Dt==8||nt<=0?ds(3):ds(2)),li(this);var y=this.g.ca();this.X=y;var E=rm(this);if(this.o=y==200,nn(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,j=this.g;if((A=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var K=A;break t}}K=null}if(h=K)Vn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,h);else{this.o=!1,this.m=3,Rt(12),ts(this),ms(this);break e}}if(this.R){h=!0;let xt;for(;!this.K&&this.C<E.length;)if(xt=Zu(this,E),xt==sn){Pe==4&&(this.m=4,Rt(14),h=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==jt){this.m=4,Rt(15),Vn(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Vn(this.i,this.l,xt,null),ci(this,xt);if(Ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)Vn(this.i,this.l,E,"[Invalid Chunked Response]"),ts(this),ms(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),uc(le),le.P=!0,Rt(11))}}else Vn(this.i,this.l,E,null),ci(this,E);Pe==4&&ts(this),this.o&&!this.K&&(Pe==4?lh(this.j,this):(this.o=!1,oi(this)))}else zi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),ts(this),ms(this)}}}catch{}finally{}};function rm(h){if(!Ju(h))return h.g.la();const y=_n(h.g);if(y==="")return"";let E="";const A=y.length,j=zs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ts(h),ms(h),"";h.h.i=new u.TextDecoder}for(let K=0;K<A;K++)h.h.h=!0,E+=h.h.i.decode(y[K],{stream:!(j&&K==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Ju(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Zu(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?sn:(E=Number(y.substring(E,A)),isNaN(E)?jt:(A+=1,A+E>y.length?sn:(y=y.slice(A,A+E),h.C=A+E,y)))}Vs.prototype.cancel=function(){this.K=!0,ts(this)};function oi(h){h.T=Date.now()+h.H,Co(h,h.H)}function Co(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Se(g(h.aa,h),y)}function li(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Vs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(vt(this.i,this.B),this.M!=2&&(ds(),Rt(17)),ts(this),this.m=2,ms(this)):Co(this,this.T-h)};function ms(h){h.j.I==0||h.K||lh(h.j,h)}function ts(h){li(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Oa(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ci(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||hi(E.h,h))){if(!h.L&&hi(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Po(E),Dr(E);else break e;qa(E),Rt(18)}}else E.xa=j[1],0<E.xa-E.K&&j[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Se(g(E.Va,E),6e3));ui(E.h)<=1&&E.ta&&(E.ta=void 0)}else _i(E,11)}else if((h.L||E.g==h)&&Po(E),!C(y))for(j=E.Ba.g.parse(y),y=0;y<j.length;y++){let nt=j[y];const xt=nt[0];if(!(xt<=E.K))if(E.K=xt,nt=nt[1],E.I==2)if(nt[0]=="c"){E.M=nt[1],E.ba=nt[2];const _s=nt[3];_s!=null&&(E.ka=_s,E.j.info("VER="+E.ka));const yi=nt[4];yi!=null&&(E.za=yi,E.j.info("SVER="+E.za));const Bs=nt[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(A=1.5*Bs,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Fs=h.g;if(Fs){const Ha=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var K=A.h;K.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Jl(K,K.h),K.h=null))}if(A.G){const Vo=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.wa=Vo,lt(A.J,A.G,Vo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var le=h;if(A.na=hh(A,A.L?A.ba:null,A.W),le.L){Zl(A.h,le);var Pe=le,Dt=A.O;Dt&&(Pe.H=Dt),Pe.D&&(li(Pe),oi(Pe)),A.g=le}else ah(A);E.i.length>0&&gi(E)}else nt[0]!="stop"&&nt[0]!="close"||_i(E,7);else E.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?_i(E,7):lc(E):nt[0]!="noop"&&E.l&&E.l.qa(nt),E.A=0)}}ds(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function Wl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ui(h){return h.h?1:h.g?h.g.size:0}function hi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Jl(h,y){h.g?h.g.add(y):h.h=y}function Zl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wl.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ec(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return I(h.i)}var eh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let j,K=null;A>=0?(j=h[E].substring(0,A),K=h[E].substring(A+1)):j=h[E],y(j,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ns(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ns?(this.l=h.l,rn(this,h.j),this.o=h.o,this.g=h.g,Ar(this,h.u),this.h=h.h,tc(this,ih(h.i)),this.m=h.m):h&&(y=String(h).match(eh))?(this.l=!1,rn(this,y[1]||"",!0),this.o=di(y[2]||""),this.g=di(y[3]||"",!0),Ar(this,y[4]),this.h=di(y[5]||"",!0),tc(this,y[6]||"",!0),this.m=di(y[7]||"")):(this.l=!1,this.i=new Cr(null,this.l))}ns.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(La(y,Io,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(La(y,Io,!0),"@"),h.push(gn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(La(E,E.charAt(0)=="/"?nc:th,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",La(E,nh)),h.join("")},ns.prototype.resolve=function(h){const y=Bt(this);let E=!!h.j;E?rn(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Ar(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var j=y.h.lastIndexOf("/");j!=-1&&(A=y.h.slice(0,j+1)+A)}if(j=A,j==".."||j==".")A="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){A=j.lastIndexOf("/",0)==0,j=j.split("/");const K=[];for(let le=0;le<j.length;){const Pe=j[le++];Pe=="."?A&&le==j.length&&K.push(""):Pe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&le==j.length&&K.push("")):(K.push(Pe),A=!0)}A=K.join("/")}else A=j}return E?y.h=A:E=h.i.toString()!=="",E?tc(y,ih(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Bt(h){return new ns(h)}function rn(h,y,E){h.j=E?di(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ar(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function tc(h,y,E){y instanceof Cr?(h.i=y,ko(h.i,h.l)):(E||(y=La(y,xr)),h.i=new Cr(y,h.l))}function lt(h,y,E){h.i.set(y,E)}function Va(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function di(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function La(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,Bn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Bn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Io=/[#\/\?@]/g,th=/[#\?:]/g,nc=/[#\?]/g,xr=/[#\?@]/g,nh=/#/g;function Cr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ro(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Cr.prototype,n.add=function(h,y){Fn(this),this.i=null,h=Rr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function sh(h,y){Fn(h),y=Rr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function sc(h,y){return Fn(h),y=Rr(h,y),h.g.has(y)}n.forEach=function(h,y){Fn(this),this.g.forEach(function(E,A){E.forEach(function(j){h.call(y,j,A,this)},this)},this)};function ic(h,y){Fn(h);let E=[];if(typeof y=="string")sc(h,y)&&(E=E.concat(h.g.get(Rr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}n.set=function(h,y){return Fn(this),this.i=null,h=Rr(this,h),sc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=ic(this,h),h.length>0?String(h[0]):y):y};function No(h,y,E){sh(h,y),E.length>0&&(h.i=null,h.g.set(Rr(h,y),I(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const j=gn(E);E=ic(this,E);for(let K=0;K<E.length;K++){let le=j;E[K]!==""&&(le+="="+gn(E[K])),h.push(le)}}return this.i=h.join("&")};function ih(h){const y=new Cr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Rr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ko(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(E,A){const j=A.toLowerCase();A!=j&&(sh(this,A),No(this,j,E))},h)),h.j=y}function Us(h,y){const E=new rt;if(u.Image){const A=new Image;A.onload=v(ps,E,"TestLoadImage: loaded",!0,y,A),A.onerror=v(ps,E,"TestLoadImage: error",!1,y,A),A.onabort=v(ps,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(ps,E,"TestLoadImage: timeout",!1,y,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function rc(h,y){const E=new rt,A=new AbortController,j=setTimeout(()=>{A.abort(),ps(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(K=>{clearTimeout(j),K.ok?ps(E,"TestPingServer: ok",!0,y):ps(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),ps(E,"TestPingServer: error",!1,y)})}function ps(h,y,E,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(E)}catch{}}function Ir(){this.g=new Ms}function fi(h){this.i=h.Sb||null,this.h=h.ab||!1}_(fi,Pa),fi.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(h,y){it.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ua,it),n=Ua.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,js(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||u).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Nr(this):js(this),this.readyState==3&&Do(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},n.Na=function(h){this.g&&(this.response=h,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,js(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function js(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gs(h){let y="";return Ne(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function ja(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=gs(E),typeof h=="string"?E!=null&&gn(E):lt(h,y,E))}function ht(h){it.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ht,it);var mi=/^https?$/i,ac=["POST","PUT"];n=ht.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pn.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){za(this,K);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)E.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())E.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),j=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(ac,y,void 0)>=0)||A||j||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of E)this.g.setRequestHeader(K,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){za(this,K)}};function za(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,oc(h),ji(h)}function oc(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,kt(this,"complete"),kt(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},n.Xa=function(){Ba(this)};function Ba(h){if(h.h&&typeof l<"u"){if(h.v&&zs(h)==4)setTimeout(h.Ca.bind(h),0);else if(kt(h,"readystatechange"),zs(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=K===0){let le=String(h.D).match(eh)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),A=!mi.test(le?le.toLowerCase():"")}E=A}if(E)kt(h,"complete"),kt(h,"success");else{h.o=6;try{var j=zs(h)>2?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.ca()+"]",oc(h)}}finally{ji(h)}}}}function ji(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||kt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function zs(h){return h.g?h.g.readyState:0}n.ca=function(){try{return zs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ma(y)}};function _n(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(h){const y={};h=(h.g&&zs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var E=Ql(h[A]);const j=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=y[j]||[];y[j]=K,K.push(E)}ke(y,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function kr(h){this.za=0,this.i=[],this.j=new rt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,h),this.Za=pi("retryDelaySeedMs",1e4,h),this.Ta=pi("forwardChannelMaxRetries",2,h),this.va=pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wl(h&&h.concurrentRequestLimit),this.Ba=new Ir,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=kr.prototype,n.ka=8,n.I=1,n.connect=function(h,y,E,A){Rt(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=hh(this,null,this.W),gi(this)};function lc(h){if(Oo(h),h.I==3){var y=h.V++,E=Bt(h.J);if(lt(E,"SID",h.M),lt(E,"RID",y),lt(E,"TYPE","terminate"),Fa(h,E),y=new Vs(h,h.j,y),y.M=2,y.A=Va(Bt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=y.A,E=!0),E||(y.g=dh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),oi(y)}uh(h)}function Dr(h){h.g&&(uc(h),h.g.cancel(),h.g=null)}function Oo(h){Dr(h),h.v&&(u.clearTimeout(h.v),h.v=null),Po(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function gi(h){if(!Xl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Me||x(),Ee||(Me(),Ee=!0),N.add(y,h),h.D=0}}function Mo(h,y){return ui(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Se(g(h.Ea,h,y),ch(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const j=new Vs(this,this.j,h);let K=this.o;if(this.U&&(K?(K=D(K),Q(K,this.U)):K=this.U),this.u!==null||this.R||(j.J=K,K=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=rh(this,j,y),E=Bt(this.J),lt(E,"RID",h),lt(E,"CVER",22),this.G&&lt(E,"X-HTTP-Session-Id",this.G),Fa(this,E),K&&(this.R?y="headers="+gn(gs(K))+"&"+y:this.u&&ja(E,this.u,K)),Jl(this.h,j),this.Ra&&lt(E,"TYPE","init"),this.S?(lt(E,"$req",y),lt(E,"SID","null"),j.U=!0,ai(j,E,null)):ai(j,E,y),this.I=2}}else this.I==3&&(h?cc(this,h):this.i.length==0||Xl(this.h)||cc(this))};function cc(h,y){var E;y?E=y.l:E=h.V++;const A=Bt(h.J);lt(A,"SID",h.M),lt(A,"RID",E),lt(A,"AID",h.K),Fa(h,A),h.u&&h.o&&ja(A,h.u,h.o),E=new Vs(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=rh(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Jl(h.h,E),ai(E,A,y)}function Fa(h,y){h.H&&Ne(h.H,function(E,A){lt(y,A,E)}),h.l&&Ne({},function(E,A){lt(y,A,E)})}function rh(h,y,E){E=Math.min(h.i.length,E);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var j=h.i;let Pe=-1;for(;;){const Dt=["count="+E];Pe==-1?E>0?(Pe=j[0].g,Dt.push("ofs="+Pe)):Pe=0:Dt.push("ofs="+Pe);let nt=!0;for(let xt=0;xt<E;xt++){var K=j[xt].g;const _s=j[xt].map;if(K-=Pe,K<0)Pe=Math.max(0,j[xt].g-100),nt=!1;else try{K="req"+K+"_"||"";try{var le=_s instanceof Map?_s:Object.entries(_s);for(const[yi,Bs]of le){let Fs=Bs;f(Bs)&&(Fs=Os(Bs)),Dt.push(K+yi+"="+encodeURIComponent(Fs))}}catch(yi){throw Dt.push(K+"type="+encodeURIComponent("_badmap")),yi}}catch{A&&A(_s)}}if(nt){le=Dt.join("&");break e}}le=void 0}return h=h.i.splice(0,E),y.G=h,le}function ah(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Me||x(),Ee||(Me(),Ee=!0),N.add(y,h),h.A=0}}function qa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Se(g(h.Da,h),ch(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,oh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Se(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Dr(this),oh(this))};function uc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function oh(h){h.g=new Vs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Bt(h.na);lt(y,"RID","rpc"),lt(y,"SID",h.M),lt(y,"AID",h.K),lt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(y,"TO",h.ia),lt(y,"TYPE","xmlhttp"),Fa(h,y),h.u&&h.o&&ja(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Va(Bt(y)),E.u=null,E.R=!0,xo(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Dr(this),qa(this),Rt(19))};function Po(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function lh(h,y){var E=null;if(h.g==y){Po(h),uc(h),h.g=null;var A=2}else if(hi(h.h,y))E=y.G,Zl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var j=h.D;A=ii(),kt(A,new es(A,E)),gi(h)}else ah(h);else if(j=y.m,j==3||j==0&&y.X>0||!(A==1&&Mo(h,y)||A==2&&qa(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),j){case 1:_i(h,5);break;case 4:_i(h,10);break;case 3:_i(h,6);break;default:_i(h,2)}}}function ch(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function _i(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),A=h.Ua;const j=!A;A=new ns(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rn(A,"https"),Va(A),j?Us(A.toString(),E):rc(A.toString(),E)}else Rt(2);h.I=0,h.l&&h.l.pa(y),uh(h),Oo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function uh(h){if(h.I=0,h.ja=[],h.l){const y=ec(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function hh(h,y,E){var A=E instanceof ns?Bt(E):new ns(E);if(A.g!="")y&&(A.g=y+"."+A.g),Ar(A,A.u);else{var j=u.location;A=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const K=new ns(null);A&&rn(K,A),y&&(K.g=y),j&&Ar(K,j),E&&(K.h=E),A=K}return E=h.G,y=h.wa,E&&y&&lt(A,E,y),lt(A,"VER",h.ka),Fa(h,A),A}function dh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ht(new fi({ab:E})):new ht(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}n=fh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Or(){}Or.prototype.g=function(h,y){return new Ln(h,y)};function Ln(h,y){it.call(this),this.g=new kr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Bi(this)}_(Ln,it),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){lc(this.g)},Ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Os(h),h=E);y.i.push(new zt(y.Ya++,h)),y.I==3&&gi(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Ln.Z.N.call(this)};function mh(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}_(mh,Wt);function ph(){Pn.call(this),this.status=1}_(ph,Pn);function Bi(h){this.g=h}_(Bi,fh),Bi.prototype.ra=function(){kt(this.g,"a")},Bi.prototype.qa=function(h){kt(this.g,new mh(h))},Bi.prototype.pa=function(h){kt(this.g,new ph)},Bi.prototype.oa=function(){kt(this.g,"b")},Or.prototype.createWebChannel=Or.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,EA=function(){return new Or},bA=function(){return ii()},vA=At,Hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fs.NO_ERROR=0,fs.TIMEOUT=8,fs.HTTP_ERROR=6,Pd=fs,mn.COMPLETE="complete",yA=mn,Ps.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",it.prototype.listen=it.prototype.J,su=Ps,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,_A=ht}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const mT="@firebase/firestore",pT="4.9.2";let Rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");let jl="12.3.0";const go=new kf("@firebase/firestore");function ml(){return go.logLevel}function fe(n,...e){if(go.logLevel<=Be.DEBUG){const t=e.map(G_);go.debug(`Firestore (${jl}): ${n}`,...t)}}function gr(n,...e){if(go.logLevel<=Be.ERROR){const t=e.map(G_);go.error(`Firestore (${jl}): ${n}`,...t)}}function Rl(n,...e){if(go.logLevel<=Be.WARN){const t=e.map(G_);go.warn(`Firestore (${jl}): ${n}`,...t)}}function G_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,TA(n,i,t)}function TA(n,e,t){let i=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw gr(i),new Error(i)}function ot(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||TA(e,a,i)}function Oe(n,e){return n}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class wA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class JD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZD{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new wA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class eO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new eO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class K_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=sO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ge(n,e){return n<e?-1:n>e?1:0}function Gg(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return mg(a)===mg(l)?Ge(a,l):mg(a)?1:-1}return Ge(n.length,e.length)}const iO=55296,rO=57343;function mg(n){const e=n.charCodeAt(0);return e>=iO&&e<=rO}function Il(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}const _T="__name__";class Ai{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ai.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const i=Ai.isNumericId(e),a=Ai.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class yt extends Ai{construct(e,t,i){return new yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const aO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Ai{construct(e,t,i){return new wn(e,t,i)}static isValidIdentifier(e){return aO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_T}static keyField(){return new wn([_T])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(yt.fromString(e))}static fromName(e){return new we(yt.fromString(e).popFirst(5))}static empty(){return new we(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new yt(e.slice()))}}function SA(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oO(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yT(n){if(!we.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vT(n){if(we.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Vf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vf(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function ju(n,e){if(!AA(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}const bT=-62135596800,ET=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*ET);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bT)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ET}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ju(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:$t("string",pt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new pt(0,0))}static max(){return new Ie(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Su=-1;function lO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new _a(a,we.empty(),e)}function cO(n){return new _a(n.readTime,n.key,Su)}class _a{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _a(Ie.min(),we.empty(),Su)}static max(){return new _a(Ie.max(),we.empty(),Su)}}function uO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}const hO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==hO)throw n;fe("LocalStore","Unexpectedly lost primary lease")}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(p=>i(p)))})),u=!0,l===a&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((a=>a?te.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{u[g]=v,++f,f===l&&i(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new te(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function fO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bl(n){return n.name==="IndexedDbTransactionError"}class Lf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lf.ce=-1;const Y_=-1;function Uf(n){return n==null}function tf(n){return n===0&&1/n==-1/0}function mO(n){return typeof n=="number"&&Number.isInteger(n)&&!tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const xA="";function pO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TT(e)),e=gO(n.get(t),e);return TT(e)}function gO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case xA:t+="";break;default:t+=l}}return t}function TT(n){return n+xA+""}function wT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ra(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let Qt=class Kg{constructor(e,t){this.comparator=e,this.root=t||da.EMPTY}insert(e,t){return new Kg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,da.BLACK,null,null))}remove(e){return new Kg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}},Ed=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},da=class rr{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??rr.RED,this.left=a??rr.EMPTY,this.right=l??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new rr(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}};da.EMPTY=null,da.RED=!0,da.BLACK=!1;da.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zt{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ST(this.data.getIterator())}getIteratorFrom(e){return new ST(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Zt(this.comparator);return t.data=e,t}}class ST{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class us{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new us([])}unionWith(e){let t=new Zt(wn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class RA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new RA("Invalid base64 string: "+l):l}})(e);return new Sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const _O=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=_O.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function va(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}const IA="server_timestamp",NA="__type__",kA="__previous_value__",DA="__local_write_time__";function $_(n){return(n?.mapValue?.fields||{})[NA]?.stringValue===IA}function jf(n){const e=n.mapValue.fields[kA];return $_(e)?jf(e):e}function Au(n){const e=ya(n.mapValue.fields[DA].timestampValue);return new pt(e.seconds,e.nanos)}class yO{constructor(e,t,i,a,l,u,f,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const nf="(default)";class xu{constructor(e,t){this.projectId=e,this.database=t||nf}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}const OA="__type__",vO="__max__",Td={mapValue:{}},MA="__vector__",sf="value";function ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$_(n)?4:EO(n)?9007199254740991:bO(n)?10:11:Ce(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=ba(n);if(t!==ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ya(a.timestampValue),f=ya(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return va(a.bytesValue).isEqual(va(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Pt(a.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(a.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Pt(a.integerValue)===Pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Pt(a.doubleValue),f=Pt(l.doubleValue);return u===f?tf(u)===tf(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Il(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(wT(u)!==wT(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Oi(u[p],f[p])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Cu(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function Nl(n,e){if(n===e)return 0;const t=ba(n),i=ba(e);if(t!==i)return Ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Pt(l.integerValue||l.doubleValue),p=Pt(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return AT(n.timestampValue,e.timestampValue);case 4:return AT(Au(n),Au(e));case 5:return Gg(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=va(l),p=va(u);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),p=u.split("/");for(let g=0;g<f.length&&g<p.length;g++){const v=Ge(f[g],p[g]);if(v!==0)return v}return Ge(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Ge(Pt(l.latitude),Pt(u.latitude));return f!==0?f:Ge(Pt(l.longitude),Pt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){const f=l.fields||{},p=u.fields||{},g=f[sf]?.arrayValue,v=p[sf]?.arrayValue,_=Ge(g?.values?.length||0,v?.values?.length||0);return _!==0?_:xT(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Td.mapValue&&u===Td.mapValue)return 0;if(l===Td.mapValue)return 1;if(u===Td.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=u.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const w=Gg(p[_],v[_]);if(w!==0)return w;const I=Nl(f[p[_]],g[v[_]]);if(I!==0)return I}return Ge(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function AT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=ya(n),i=ya(e),a=Ge(t.seconds,i.seconds);return a!==0?a:Ge(t.nanos,i.nanos)}function xT(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Nl(t[a],i[a]);if(l)return l}return Ge(t.length,i.length)}function kl(n){return Yg(n)}function Yg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ya(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return va(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Yg(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Yg(t.fields[u])}`;return a+"}"})(n.mapValue):Ce(61005,{value:n})}function Vd(n){switch(ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(n);return e?16+Vd(e):16;case 5:return 2*n.stringValue.length;case 6:return va(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Vd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ra(i.fields,((l,u)=>{a+=l.length+Vd(u)})),a})(n.mapValue);default:throw Ce(13486,{value:n})}}function CT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $g(n){return!!n&&"integerValue"in n}function Q_(n){return!!n&&"arrayValue"in n}function RT(n){return!!n&&"nullValue"in n}function IT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ld(n){return!!n&&"mapValue"in n}function bO(n){return(n?.mapValue?.fields||{})[OA]?.stringValue===MA}function cu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ra(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return{...n}}function EO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vO}class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ld(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=wn.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=cu(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Ld(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Ld(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ra(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Wn(cu(this.value))}}function PA(n){const e=[];return Ra(n.fields,((t,i)=>{const a=new wn([t]);if(Ld(i)){const l=PA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new us(e)}class In{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new In(e,0,Ie.min(),Ie.min(),Ie.min(),Wn.empty(),0)}static newFoundDocument(e,t,i,a){return new In(e,1,t,Ie.min(),i,a,0)}static newNoDocument(e,t){return new In(e,2,t,Ie.min(),Ie.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Ie.min(),Ie.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rf{constructor(e,t){this.position=e,this.inclusive=t}}function NT(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=Nl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function kT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}class af{constructor(e,t="asc"){this.field=e,this.dir=t}}function TO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VA{}class Yt extends VA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new SO(e,t,i):t==="array-contains"?new CO(e,i):t==="in"?new RO(e,i):t==="not-in"?new IO(e,i):t==="array-contains-any"?new NO(e,i):new Yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new AO(e,i):new xO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nl(t,this.value)):t!==null&&ba(this.value)===ba(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends VA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Js(e,t)}matches(e){return LA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LA(n){return n.op==="and"}function UA(n){return wO(n)&&LA(n)}function wO(n){for(const e of n.filters)if(e instanceof Js)return!1;return!0}function Qg(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+kl(n.value);if(UA(n))return n.filters.map((e=>Qg(e))).join(",");{const e=n.filters.map((t=>Qg(t))).join(",");return`${n.op}(${e})`}}function jA(n,e){return n instanceof Yt?(function(i,a){return a instanceof Yt&&i.op===a.op&&i.field.isEqual(a.field)&&Oi(i.value,a.value)})(n,e):n instanceof Js?(function(i,a){return a instanceof Js&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,f)=>l&&jA(u,a.filters[f])),!0):!1})(n,e):void Ce(19439)}function zA(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`})(n):n instanceof Js?(function(t){return t.op.toString()+" {"+t.getFilters().map(zA).join(" ,")+"}"})(n):"Filter"}class SO extends Yt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class AO extends Yt{constructor(e,t){super(e,"in",t),this.keys=BA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xO extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=BA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BA(n,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class CO extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Q_(t)&&Cu(t.arrayValue,this.value)}}class RO extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class IO extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class NO extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Q_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Cu(this.value.arrayValue,i)))}}class kO{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function DT(n,e=null,t=[],i=[],a=null,l=null,u=null){return new kO(n,e,t,i,a,l,u)}function W_(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Qg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>kl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>kl(i))).join(",")),e.Te=t}return e.Te}function X_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kT(n.startAt,e.startAt)&&kT(n.endAt,e.endAt)}function Wg(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class zu{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DO(n,e,t,i,a,l,u,f){return new zu(n,e,t,i,a,l,u,f)}function J_(n){return new zu(n)}function OT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FA(n){return n.collectionGroup!==null}function uu(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Zt(wn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new af(l,i))})),t.has(wn.keyField().canonicalString())||e.Ie.push(new af(wn.keyField(),i))}return e.Ie}function Ri(n){const e=Oe(n);return e.Ee||(e.Ee=OO(e,uu(n))),e.Ee}function OO(n,e){if(n.limitType==="F")return DT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new af(a.field,l)}));const t=n.endAt?new rf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new rf(n.startAt.position,n.startAt.inclusive):null;return DT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Xg(n,e){const t=n.filters.concat([e]);return new zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jg(n,e,t){return new zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return X_(Ri(n),Ri(e))&&n.limitType===e.limitType}function qA(n){return`${W_(Ri(n))}|lt:${n.limitType}`}function pl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>zA(a))).join(", ")}]`),Uf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>kl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>kl(a))).join(",")),`Target(${i})`})(Ri(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of uu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,p){const g=NT(u,f,p);return u.inclusive?g<=0:g<0})(i.startAt,uu(i),a)||i.endAt&&!(function(u,f,p){const g=NT(u,f,p);return u.inclusive?g>=0:g>0})(i.endAt,uu(i),a))})(n,e)}function MO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HA(n){return(e,t)=>{let i=!1;for(const a of uu(n)){const l=PO(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function PO(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(l,u,f){const p=u.data.field(l),g=f.data.field(l);return p!==null&&g!==null?Nl(p,g):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}class Eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}const VO=new Qt(we.comparator);function yr(){return VO}const GA=new Qt(we.comparator);function iu(...n){let e=GA;for(const t of n)e=e.insert(t.key,t);return e}function KA(n){let e=GA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function uo(){return hu()}function YA(){return hu()}function hu(){return new Eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const LO=new Qt(we.comparator),UO=new Zt(we.comparator);function Ke(...n){let e=UO;for(const t of n)e=e.add(t);return e}const jO=new Zt(Ge);function zO(){return jO}function Z_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function $A(n){return{integerValue:""+n}}function BO(n,e){return mO(e)?$A(e):Z_(n,e)}class Ff{constructor(){this._=void 0}}function FO(n,e,t){return n instanceof of?(function(a,l){const u={fields:{[NA]:{stringValue:IA},[DA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$_(l)&&(l=jf(l)),l&&(u.fields[kA]=l),{mapValue:u}})(t,e):n instanceof Ru?WA(n,e):n instanceof Iu?XA(n,e):(function(a,l){const u=QA(a,l),f=MT(u)+MT(a.Ae);return $g(u)&&$g(a.Ae)?$A(f):Z_(a.serializer,f)})(n,e)}function qO(n,e,t){return n instanceof Ru?WA(n,e):n instanceof Iu?XA(n,e):t}function QA(n,e){return n instanceof lf?(function(i){return $g(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class of extends Ff{}class Ru extends Ff{constructor(e){super(),this.elements=e}}function WA(n,e){const t=JA(e);for(const i of n.elements)t.some((a=>Oi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Iu extends Ff{constructor(e){super(),this.elements=e}}function XA(n,e){let t=JA(e);for(const i of n.elements)t=t.filter((a=>!Oi(a,i)));return{arrayValue:{values:t}}}class lf extends Ff{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MT(n){return Pt(n.integerValue||n.doubleValue)}function JA(n){return Q_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function HO(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Ru&&a instanceof Ru||i instanceof Iu&&a instanceof Iu?Il(i.elements,a.elements,Oi):i instanceof lf&&a instanceof lf?Oi(i.Ae,a.Ae):i instanceof of&&a instanceof of})(n.transform,e.transform)}class GO{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ud(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qf{}function ZA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new t1(n.key,Ii.none()):new Bu(n.key,n.data,Ii.none());{const t=n.data,i=Wn.empty();let a=new Zt(wn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ia(n.key,i,new us(a.toArray()),Ii.none())}}function KO(n,e,t){n instanceof Bu?(function(a,l,u){const f=a.value.clone(),p=VT(a.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ia?(function(a,l,u){if(!Ud(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=VT(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(e1(a)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,i){return n instanceof Bu?(function(l,u,f,p){if(!Ud(l.precondition,u))return f;const g=l.value.clone(),v=LT(l.fieldTransforms,p,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ia?(function(l,u,f,p){if(!Ud(l.precondition,u))return f;const g=LT(l.fieldTransforms,p,u),v=u.data;return v.setAll(e1(l)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(l,u,f){return Ud(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function YO(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=QA(i.transform,a||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(i.field,l))}return t||null}function PT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Il(i,a,((l,u)=>HO(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bu extends qf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ia extends qf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function e1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function VT(n,e,t){const i=new Map;ot(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,qO(u,f,t[a]))}return i}function LT(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,FO(l,u,e))}return i}class t1 extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $O extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QO{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&KO(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=YA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const p=ZA(u,f);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((t,i)=>PT(t,i)))&&Il(this.baseMutations,e.baseMutations,((t,i)=>PT(t,i)))}}class ey{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return LO})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new ey(e,t,i,a)}}class WO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kt,Qe;function JO(n){switch(n){case ee.OK:return Ce(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function n1(n){if(n===void 0)return gr("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Kt.OK:return ee.OK;case Kt.CANCELLED:return ee.CANCELLED;case Kt.UNKNOWN:return ee.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ee.INTERNAL;case Kt.UNAVAILABLE:return ee.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ee.NOT_FOUND;case Kt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Kt.ABORTED:return ee.ABORTED;case Kt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Kt.DATA_LOSS:return ee.DATA_LOSS;default:return Ce(39323,{code:n})}}(Qe=Kt||(Kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function ZO(){return new TextEncoder}const eM=new ha([4294967295,4294967295],0);function UT(n){const e=ZO().encode(n),t=new gA;return t.update(e),new Uint8Array(t.digest())}function jT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ha([t,i],0),new ha([a,l],0)]}class ty{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ha.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ha.fromNumber(i)));return a.compare(eM)===1&&(a=new ha([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=UT(e),[i,a]=jT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new ty(l,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=UT(e),[i,a]=jT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hf(Ie.min(),a,new Qt(Ge),yr(),Ke())}}class Fu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Fu(i,t,Ke(),Ke(),Ke())}}class jd{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class s1{constructor(e,t){this.targetId=e,this.Ce=t}}class i1{constructor(e,t,i=Sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zT{constructor(){this.ve=0,this.Fe=BT(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),i=Ke();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ce(38017,{changeType:l})}})),new Fu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=BT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tM{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=wd(),this.He=wd(),this.Ye=new Qt(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Wg(l))if(i===0){const u=new we(l.path);this.et(t,u,In.newNoDocument(u,Ie.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=va(i).toUint8Array()}catch(p){if(p instanceof RA)return Rl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new ty(u,a,l)}catch(p){return Rl(p instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Wg(f.target)){const p=new we(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,In.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Ke();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Hf(e,t,this.Ye,this.je,i);return this.je=yr(),this.Je=wd(),this.He=wd(),this.Ye=new Qt(Ge),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zt(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zt(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wd(){return new Qt(we.comparator)}function BT(){return new Qt(we.comparator)}const nM={asc:"ASCENDING",desc:"DESCENDING"},sM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iM={and:"AND",or:"OR"};class rM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zg(n,e){return n.useProto3Json||Uf(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aM(n,e){return cf(n,e.toTimestamp())}function Ni(n){return ot(!!n,49232),Ie.fromTimestamp((function(t){const i=ya(t);return new pt(i.seconds,i.nanos)})(n))}function ny(n,e){return e_(n,e).canonicalString()}function e_(n,e){const t=(function(a){return new yt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function a1(n){const e=yt.fromString(n);return ot(h1(e),10190,{key:e.toString()}),e}function t_(n,e){return ny(n.databaseId,e.path)}function pg(n,e){const t=a1(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(l1(t))}function o1(n,e){return ny(n.databaseId,e)}function oM(n){const e=a1(n);return e.length===4?yt.emptyPath():l1(e)}function n_(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l1(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FT(n,e,t){return{name:t_(n,e),fields:t.value.mapValue.fields}}function lM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(ot(v===void 0||typeof v=="string",58123),Sn.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Sn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(g){const v=g.code===void 0?ee.UNKNOWN:n1(g.code);return new de(v,g.message||"")})(u);t=new i1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=pg(n,i.document.name),l=Ni(i.document.updateTime),u=i.document.createTime?Ni(i.document.createTime):Ie.min(),f=new Wn({mapValue:{fields:i.document.fields}}),p=In.newFoundDocument(a,l,u,f),g=i.targetIds||[],v=i.removedTargetIds||[];t=new jd(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=pg(n,i.document),l=i.readTime?Ni(i.readTime):Ie.min(),u=In.newNoDocument(a,l),f=i.removedTargetIds||[];t=new jd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=pg(n,i.document),l=i.removedTargetIds||[];t=new jd([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new XO(a,l),f=i.targetId;t=new s1(f,u)}}return t}function cM(n,e){let t;if(e instanceof Bu)t={update:FT(n,e.key,e.value)};else if(e instanceof t1)t={delete:t_(n,e.key)};else if(e instanceof Ia)t={update:FT(n,e.key,e.data),updateMask:yM(e.fieldMask)};else{if(!(e instanceof $O))return Ce(16599,{Vt:e.type});t={verify:t_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof of)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ru)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof lf)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ce(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:aM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function uM(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Ni(a.updateTime):Ni(l);return u.isEqual(Ie.min())&&(u=Ni(l)),new GO(u,a.transformResults||[])})(t,e)))):[]}function hM(n,e){return{documents:[o1(n,e.path)]}}function dM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=o1(n,a);const l=(function(g){if(g.length!==0)return u1(Js.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((v=>(function(w){return{field:gl(w.field),direction:pM(w.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Zg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function fM(n){let e=oM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ot(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const w=c1(_);return w instanceof Js&&UA(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((w=>(function(P){return new af(_l(P.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let w;return w=typeof _=="object"?_.value:_,Uf(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(_){const w=!!_.before,I=_.values||[];return new rf(I,w)})(t.startAt));let g=null;return t.endAt&&(g=(function(_){const w=!_.before,I=_.values||[];return new rf(I,w)})(t.endAt)),DO(e,a,u,l,f,"F",p,g)}function mM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_l(t.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=_l(t.unaryFilter.field);return Yt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_l(t.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(_l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Js.create(t.compositeFilter.filters.map((i=>c1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function pM(n){return nM[n]}function gM(n){return sM[n]}function _M(n){return iM[n]}function gl(n){return{fieldPath:n.canonicalString()}}function _l(n){return wn.fromServerFormat(n.fieldPath)}function u1(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(IT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NAN"}};if(RT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NAN"}};if(RT(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(t.field),op:gM(t.op),value:t.value}}})(n):n instanceof Js?(function(t){const i=t.getFilters().map((a=>u1(a)));return i.length===1?i[0]:{compositeFilter:{op:_M(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function yM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class la{constructor(e,t,i,a,l=Ie.min(),u=Ie.min(),f=Sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vM{constructor(e){this.yt=e}}function bM(n){const e=fM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jg(e,e.limit,"L"):e}class EM{constructor(){this.Cn=new TM}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(_a.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class TM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Zt(yt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(yt.comparator)).toArray()}}const qT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d1=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(d1,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}const HT="LruGarbageCollector",wM=1048576;function GT([n,e],[t,i]){const a=Ge(n,t);return a===0?Ge(e,i):a}class SM{constructor(e){this.Ir=e,this.buffer=new Zt(GT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();GT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(HT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bl(t)?fe(HT,"Ignoring IndexedDB error during garbage collection: ",t):await zl(t)}await this.Vr(3e5)}))}}class xM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Lf.ce);const i=new SM(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(qT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,f,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(i=_,f=Date.now(),this.removeTargets(e,i,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(g=Date.now(),ml()<=Be.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${_} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function CM(n,e){return new xM(n,e)}class RM{constructor(){this.changes=new Eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class NM{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&du(i.mutation,a,us.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ke()){const a=uo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=iu();return l.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=uo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ke())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let l=yr();const u=hu(),f=(function(){return hu()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ia)?l=l.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),du(v.mutation,g,v.mutation.getFieldMask(),pt.now())):u.set(g.key,us.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>u.set(g,v))),t.forEach(((g,v)=>f.set(g,new IM(v,u.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=hu();let a=new Qt(((u,f)=>u-f)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||us.empty();v=f.applyToLocalView(g,v),i.set(p,v);const _=(a.get(f.batchId)||Ke()).add(p);a=a.insert(f.batchId,_)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,v=p.value,_=YA();v.forEach((w=>{if(!l.has(w)){const I=ZA(t.get(w),i.get(w));I!==null&&_.set(w,I),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,_))}return te.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):te.resolve(uo());let f=Su,p=l;return u.next((g=>te.forEach(g,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(v)?te.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ke()))).next((v=>({batchId:f,changes:KA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let a=iu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,l).next((f=>te.forEach(f,(p=>{const g=(function(_,w){return new zu(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((p,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,In.newInvalidDocument(v)))}));let f=iu();return u.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&du(v.mutation,g,us.empty(),pt.now()),Bf(t,g)&&(f=f.insert(p,g))})),f}))}}class kM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ni(a.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:bM(a.bundledQuery),readTime:Ni(a.readTime)}})(t)),te.resolve()}}class DM{constructor(){this.overlays=new Qt(we.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=uo();return te.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const a=uo(),l=t.length+1,u=new we(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return te.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Qt(((g,v)=>g-v));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=uo(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=uo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>f.set(g,v))),!(f.size()>=a)););return te.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new WO(t,i));let l=this.qr.get(t);l===void 0&&(l=Ke(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class OM{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}class sy{constructor(){this.Qr=new Zt(ln.$r),this.Ur=new Zt(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new ln(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new ln(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new yt([])),i=new ln(t,e),a=new ln(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new yt([])),i=new ln(t,e),a=new ln(t,e+1);let l=Ke();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new ln(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class MM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(ln.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new QO(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Zr=this.Zr.add(new ln(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Y_:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ln(t,0),a=new ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const f=this.Xr(u.Yr);l.push(f)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Zt(Ge);return t.forEach((a=>{const l=new ln(a,0),u=new ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const u=new ln(new we(l),0);let f=new Zt(Ge);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(f=f.add(p.Yr)),!0)}),u),te.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return te.forEach(t.mutations,(a=>{const l=new ln(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new ln(t,0),a=this.Zr.firstAfterOrEqual(i);return te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class PM{constructor(e){this.ri=e,this.docs=(function(){return new Qt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let i=yr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():In.newInvalidDocument(a))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=yr();const u=t.path,f=new we(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||uO(cO(v),i)<=0||(a.has(v.key)||Bf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Ce(9500)}ii(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new VM(this)}getSize(e){return te.resolve(this.size)}}class VM extends RM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class LM{constructor(e){this.persistence=e,this.si=new Eo((t=>W_(t)),X_),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new sy,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),te.waitFor(l).next((()=>a))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}class f1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lf(0),this.li=!1,this.li=!0,this.hi=new OM,this.referenceDelegate=e(this),this.Pi=new LM(this),this.indexManager=new EM,this.remoteDocumentCache=(function(a){return new PM(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new vM(t),this.Ii=new kM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new MM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const a=new UM(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class UM extends dO{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new sy,this.Vi=null}static mi(e){return new iy(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(i=>{const a=we.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.pi=new Eo((i=>pO(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=CM(this,t)}static mi(e,t){return new uf(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?te.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Ie.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vd(e.data.value)),t}br(e,t,i){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return te.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ry{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Ke(),a=Ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ry(e,t.fromCache,i,a)}}class jM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hN()?8:fO(On())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new jM;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(ml()<=Be.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(ml()<=Be.DEBUG&&fe("QueryEngine","Query:",pl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(ml()<=Be.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):te.resolve())}ys(e,t){if(OT(t))return te.resolve(null);let i=Ri(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Jg(t,null,"F"),i=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Ke(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,f);return this.Cs(t,g,u,p.readTime)?this.ys(e,Jg(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return OT(t)||a.isEqual(Ie.min())?te.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?te.resolve(null):(ml()<=Be.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),pl(t)),this.vs(e,u,t,lO(a,Su)).next((f=>f)))}))}Ds(e,t){let i=new Zt(HA(e));return t.forEach(((a,l)=>{Bf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return ml()<=Be.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",pl(t)),this.ps.getDocumentsMatchingQuery(e,t,_a.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const ay="LocalStore",BM=3e8;class FM{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Qt(Ge),this.xs=new Eo((l=>W_(l)),X_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function qM(n,e,t,i){return new FM(n,e,t,i)}async function m1(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let p=Ke();for(const g of a){u.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){f.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:f})))}))}))}function HM(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,v){const _=g.batch,w=_.keys();let I=te.resolve();return w.forEach((P=>{I=I.next((()=>v.getEntry(p,P))).next((q=>{const G=g.docVersions.get(P);ot(G!==null,48541),q.version.compareTo(G)<0&&(_.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(p,_)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Ke();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function p1(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GM(n,e){const t=Oe(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const w=a.get(_);if(!w)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let I=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Sn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),a=a.insert(_,I),(function(q,G,$){return q.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=BM?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(w,I,v)&&f.push(t.Pi.updateTargetData(l,I))}));let p=yr(),g=Ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(KM(l,u,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!i.isEqual(Ie.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return te.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function KM(n,e,t){let i=Ke(),a=Ke();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=yr();return t.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):fe(ay,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function YM(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Y_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function $M(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,te.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new la(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function s_(n,e,t){const i=Oe(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Bl(u))throw u;fe(ay,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function KT(n,e,t){const i=Oe(n);let a=Ie.min(),l=Ke();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,g,v){const _=Oe(p),w=_.xs.get(v);return w!==void 0?te.resolve(_.Ms.get(w)):_.Pi.getTargetData(g,v)})(i,u,Ri(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Ie.min(),t?l:Ke()))).next((f=>(QM(i,MO(e),f),{documents:f,Qs:l})))))}function QM(n,e,t){let i=n.Os.get(e)||Ie.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class YT{constructor(){this.activeTargetIds=zO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WM{constructor(){this.Mo=new YT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XM{Oo(e){}shutdown(){}}const $T="ConnectivityMonitor";class QT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe($T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sd=null;function i_(){return Sd===null?Sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sd++,"0x"+Sd.toString(16)}const gg="RestConnection",JM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===nf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=i_(),f=this.zo(e,t.toUriEncodedString());fe(gg,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(f),v=br(g);return this.Jo(e,f,p,i,v).then((_=>(fe(gg,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Rl(gg,`RPC '${e}' ${u} failed with error: `,_,"url: ",f,"request:",i),_}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=JM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class e4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Cn="WebChannelConnection";class t4 extends ZM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=i_();return new Promise(((f,p)=>{const g=new _A;g.setWithCredentials(!0),g.listenOnce(yA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Pd.NO_ERROR:const _=g.getResponseJson();fe(Cn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),f(_);break;case Pd.TIMEOUT:fe(Cn,`RPC '${e}' ${u} timed out`),p(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:const w=g.getStatus();if(fe(Cn,`RPC '${e}' ${u} failed with status:`,w,"response text:",g.getResponseText()),w>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I?.error;if(P&&P.status&&P.message){const q=(function($){const ce=$.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ce)>=0?ce:ee.UNKNOWN})(P.status);p(new de(q,P.message))}else p(new de(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(Cn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);fe(Cn,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=i_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=EA(),f=bA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");fe(Cn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let w=!1,I=!1;const P=new e4({Yo:G=>{I?fe(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,G):(w||(fe(Cn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),fe(Cn,`RPC '${e}' stream ${a} sending:`,G),_.send(G))},Zo:()=>_.close()}),q=(G,$,ce)=>{G.listen($,(re=>{try{ce(re)}catch(me){setTimeout((()=>{throw me}),0)}}))};return q(_,su.EventType.OPEN,(()=>{I||(fe(Cn,`RPC '${e}' stream ${a} transport opened.`),P.o_())})),q(_,su.EventType.CLOSE,(()=>{I||(I=!0,fe(Cn,`RPC '${e}' stream ${a} transport closed`),P.a_(),this.E_(_))})),q(_,su.EventType.ERROR,(G=>{I||(I=!0,Rl(Cn,`RPC '${e}' stream ${a} transport errored. Name:`,G.name,"Message:",G.message),P.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),q(_,su.EventType.MESSAGE,(G=>{if(!I){const $=G.data[0];ot(!!$,16349);const ce=$,re=ce?.error||ce[0]?.error;if(re){fe(Cn,`RPC '${e}' stream ${a} received error:`,re);const me=re.status;let Me=(function(x){const R=Kt[x];if(R!==void 0)return n1(R)})(me),Ee=re.message;Me===void 0&&(Me=ee.INTERNAL,Ee="Unknown error status: "+me+" with message "+re.message),I=!0,P.a_(new de(Me,Ee)),_.close()}else fe(Cn,`RPC '${e}' stream ${a} received:`,$),P.u_($)}})),q(f,vA.STAT_EVENT,(G=>{G.stat===Hg.PROXY?fe(Cn,`RPC '${e}' stream ${a} detected buffering proxy`):G.stat===Hg.NOPROXY&&fe(Cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _g(){return typeof document<"u"?document:null}function Gf(n){return new rM(n,!0)}class g1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const WT="PersistentStream";class _1{constructor(e,t,i,a,l,u,f,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(WT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(WT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class n4 extends _1{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ie.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?Ni(u.readTime):Ie.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=n_(this.serializer),t.addTarget=(function(l,u){let f;const p=u.target;if(f=Wg(p)?{documents:hM(l,p)}:{query:dM(l,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=r1(l,u.resumeToken);const g=Zg(l,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ie.min())>0){f.readTime=cf(l,u.snapshotVersion.toTimestamp());const g=Zg(l,u.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const i=mM(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=n_(this.serializer),t.removeTarget=e,this.q_(t)}}class s4 extends _1{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uM(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=n_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>cM(this.serializer,i)))};this.q_(t)}}class i4{}class r4 extends i4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,e_(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ee.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,e_(t,i),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class a4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _o="RemoteStore";class o4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{To(this)&&(fe(_o,"Restarting streams for network reachability change."),await(async function(p){const g=Oe(p);g.Ea.add(4),await qu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Kf(g)})(this))}))})),this.Ra=new a4(i,a)}}async function Kf(n){if(To(n))for(const e of n.da)await e(!0)}async function qu(n){for(const e of n.da)await e(!1)}function y1(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uy(t)?cy(t):Fl(t).O_()&&ly(t,e))}function oy(n,e){const t=Oe(n),i=Fl(t);t.Ia.delete(e),i.O_()&&v1(t,e),t.Ia.size===0&&(i.O_()?i.L_():To(t)&&t.Ra.set("Unknown"))}function ly(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fl(n).Y_(e)}function v1(n,e){n.Va.Ue(e),Fl(n).Z_(e)}function cy(n){n.Va=new tM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fl(n).start(),n.Ra.ua()}function uy(n){return To(n)&&!Fl(n).x_()&&n.Ia.size>0}function To(n){return Oe(n).Ea.size===0}function b1(n){n.Va=void 0}async function l4(n){n.Ra.set("Online")}async function c4(n){n.Ia.forEach(((e,t)=>{ly(n,e)}))}async function u4(n,e){b1(n),uy(n)?(n.Ra.ha(e),cy(n)):n.Ra.set("Unknown")}async function h4(n,e,t){if(n.Ra.set("Online"),e instanceof i1&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(i){fe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hf(n,i)}else if(e instanceof jd?n.Va.Ze(e):e instanceof s1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const i=await p1(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Sn.EMPTY_BYTE_STRING,v.snapshotVersion)),v1(l,p);const _=new la(v.target,p,g,v.sequenceNumber);ly(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){fe(_o,"Failed to raise snapshot:",i),await hf(n,i)}}async function hf(n,e,t){if(!Bl(e))throw e;n.Ea.add(1),await qu(n),n.Ra.set("Offline"),t||(t=()=>p1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(_o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kf(n)}))}function E1(n,e){return e().catch((t=>hf(n,t,e)))}async function Yf(n){const e=Oe(n),t=Ea(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Y_;for(;d4(e);)try{const a=await YM(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,f4(e,a)}catch(a){await hf(e,a)}T1(e)&&w1(e)}function d4(n){return To(n)&&n.Ta.length<10}function f4(n,e){n.Ta.push(e);const t=Ea(n);t.O_()&&t.X_&&t.ea(e.mutations)}function T1(n){return To(n)&&!Ea(n).x_()&&n.Ta.length>0}function w1(n){Ea(n).start()}async function m4(n){Ea(n).ra()}async function p4(n){const e=Ea(n);for(const t of n.Ta)e.ea(t.mutations)}async function g4(n,e,t){const i=n.Ta.shift(),a=ey.from(i,e,t);await E1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Yf(n)}async function _4(n,e){e&&Ea(n).X_&&await(async function(i,a){if((function(u){return JO(u)&&u!==ee.ABORTED})(a.code)){const l=i.Ta.shift();Ea(i).B_(),await E1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Yf(i)}})(n,e),T1(n)&&w1(n)}async function XT(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),fe(_o,"RemoteStore received new credentials");const i=To(t);t.Ea.add(3),await qu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kf(t)}async function y4(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Kf(t)):e||(t.Ea.add(2),await qu(t),t.Ra.set("Unknown"))}function Fl(n){return n.ma||(n.ma=(function(t,i,a){const l=Oe(t);return l.sa(),new n4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:l4.bind(null,n),t_:c4.bind(null,n),r_:u4.bind(null,n),H_:h4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),uy(n)?cy(n):n.Ra.set("Unknown")):(await n.ma.stop(),b1(n))}))),n.ma}function Ea(n){return n.fa||(n.fa=(function(t,i,a){const l=Oe(t);return l.sa(),new s4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:m4.bind(null,n),r_:_4.bind(null,n),ta:p4.bind(null,n),na:g4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Yf(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(_o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class hy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new hy(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(n,e){if(gr("AsyncQueue",`${e}: ${n}`),Bl(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=iu(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class JT{constructor(){this.ga=new Qt(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ol{constructor(e,t,i,a,l,u,f,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Ol(e,t,wl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class v4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class b4{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Oe(t),l=a.queries;a.queries=ZT(),l.forEach(((u,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function ZT(){return new Eo((n=>qA(n)),zf)}async function S1(n,e){const t=Oe(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new v4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=dy(u,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&fy(t)}async function A1(n,e){const t=Oe(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function E4(n,e){const t=Oe(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(a)&&(i=!0);u.wa=a}}i&&fy(t)}function T4(n,e,t){const i=Oe(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function fy(n){n.Ca.forEach((e=>{e.next()}))}var r_,ew;(ew=r_||(r_={})).Ma="default",ew.Cache="cache";class x1{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Ol(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==r_.Cache}}class C1{constructor(e){this.key=e}}class R1{constructor(e){this.key=e}}class w4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=HA(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new JT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const w=a.get(v),I=Bf(this.query,_)?_:null,P=!!w&&this.mutatedKeys.has(w.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let G=!1;w&&I?w.data.isEqual(I.data)?P!==q&&(i.track({type:3,doc:I}),G=!0):this.su(w,I)||(i.track({type:2,doc:I}),G=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(f=!0)):!w&&I?(i.track({type:0,doc:I}),G=!0):w&&!I&&(i.track({type:1,doc:w}),G=!0,(p||g)&&(f=!0)),G&&(I?(u=u.add(I),l=q?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(I,P){const q=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:G})}};return q(I)-q(P)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,u.length!==0||g?{snapshot:new Ol(this.query,e.tu,l,u,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new R1(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new C1(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const my="SyncEngine";class S4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class A4{constructor(e){this.key=e,this.hu=!1}}class x4{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Eo((f=>qA(f)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new Qt(we.comparator),this.Au=new Map,this.Ru=new sy,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C4(n,e,t=!0){const i=M1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await I1(i,e,t,!0),a}async function R4(n,e){const t=M1(n);await I1(t,e,!0,!1)}async function I1(n,e,t,i){const a=await $M(n.localStore,Ri(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await I4(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&y1(n.remoteStore,a),f}async function I4(n,e,t,i,a){n.pu=(_,w,I)=>(async function(q,G,$,ce){let re=G.view.ru($);re.Cs&&(re=await KT(q.localStore,G.query,!1).then((({documents:N})=>G.view.ru(N,re))));const me=ce&&ce.targetChanges.get(G.targetId),Me=ce&&ce.targetMismatches.get(G.targetId)!=null,Ee=G.view.applyChanges(re,q.isPrimaryClient,me,Me);return nw(q,G.targetId,Ee.au),Ee.snapshot})(n,_,w,I);const l=await KT(n.localStore,e,!0),u=new w4(e,l.Qs),f=u.ru(l.documents),p=Fu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=u.applyChanges(f,n.isPrimaryClient,p);nw(n,t,g.au);const v=new S4(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function N4(n,e,t){const i=Oe(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!zf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await s_(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&oy(i.remoteStore,a.targetId),a_(i,a.targetId)})).catch(zl)):(a_(i,a.targetId),await s_(i.localStore,a.targetId,!0))}async function k4(n,e){const t=Oe(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),oy(t.remoteStore,i.targetId))}async function D4(n,e,t){const i=j4(n);try{const a=await(function(u,f){const p=Oe(u),g=pt.now(),v=f.reduce(((I,P)=>I.add(P.key)),Ke());let _,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=yr(),q=Ke();return p.Ns.getEntries(I,v).next((G=>{P=G,P.forEach((($,ce)=>{ce.isValidDocument()||(q=q.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,P))).next((G=>{_=G;const $=[];for(const ce of f){const re=YO(ce,_.get(ce.key).overlayedDocument);re!=null&&$.push(new Ia(ce.key,re,PA(re.value.mapValue),Ii.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,$,f)})).next((G=>{w=G;const $=G.applyToLocalDocumentSet(_,q);return p.documentOverlayCache.saveOverlays(I,G.batchId,$)}))})).then((()=>({batchId:w.batchId,changes:KA(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,p){let g=u.Vu[u.currentUser.toKey()];g||(g=new Qt(Ge)),g=g.insert(f,p),u.Vu[u.currentUser.toKey()]=g})(i,a.batchId,t),await Hu(i,a.changes),await Yf(i.remoteStore)}catch(a){const l=dy(a,"Failed to persist write");t.reject(l)}}async function N1(n,e){const t=Oe(n);try{const i=await GM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ot(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ot(u.hu,14607):a.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await Hu(t,i,e)}catch(i){await zl(i)}}function tw(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const p=Oe(u);p.onlineState=f;let g=!1;p.queries.forEach(((v,_)=>{for(const w of _.Sa)w.va(f)&&(g=!0)})),g&&fy(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function O4(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Qt(we.comparator);u=u.insert(l,In.newNoDocument(l,Ie.min()));const f=Ke().add(l),p=new Hf(Ie.min(),new Map,new Qt(Ge),u,f);await N1(i,p),i.du=i.du.remove(l),i.Au.delete(e),py(i)}else await s_(i.localStore,e,!1).then((()=>a_(i,e,t))).catch(zl)}async function M4(n,e){const t=Oe(n),i=e.batch.batchId;try{const a=await HM(t.localStore,e);D1(t,i,null),k1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hu(t,a)}catch(a){await zl(a)}}async function P4(n,e,t){const i=Oe(n);try{const a=await(function(u,f){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,f).next((_=>(ot(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(g,_)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);D1(i,e,t),k1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hu(i,a)}catch(a){await zl(a)}}function k1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function D1(n,e,t){const i=Oe(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function a_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||O1(n,i)}))}function O1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(oy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),py(n))}function nw(n,e,t){for(const i of t)i instanceof C1?(n.Ru.addReference(i.key,e),V4(n,i)):i instanceof R1?(fe(my,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||O1(n,i.key)):Ce(19791,{wu:i})}function V4(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(fe(my,"New document in limbo: "+t),n.Eu.add(i),py(n))}function py(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(yt.fromString(e)),i=n.fu.next();n.Au.set(i,new A4(t)),n.du=n.du.insert(t,i),y1(n.remoteStore,new la(Ri(J_(t.path)),i,"TargetPurposeLimboResolution",Lf.ce))}}async function Hu(n,e,t){const i=Oe(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=ry.As(p.targetId,g);l.push(v)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(p,g){const v=Oe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>te.forEach(g,(w=>te.forEach(w.Es,(I=>v.persistence.referenceDelegate.addReference(_,w.targetId,I))).next((()=>te.forEach(w.ds,(I=>v.persistence.referenceDelegate.removeReference(_,w.targetId,I)))))))))}catch(_){if(!Bl(_))throw _;fe(ay,"Failed to update sequence numbers: "+_)}for(const _ of g){const w=_.targetId;if(!_.fromCache){const I=v.Ms.get(w),P=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(P);v.Ms=v.Ms.insert(w,q)}}})(i.localStore,l))}async function L4(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){fe(my,"User change. New user:",e.toKey());const i=await m1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new de(ee.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hu(t,i.Ls)}}function U4(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return Ke().add(i.key);{let a=Ke();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function M1(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O4.bind(null,e),e.Pu.H_=E4.bind(null,e.eventManager),e.Pu.yu=T4.bind(null,e.eventManager),e}function j4(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P4.bind(null,e),e}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qM(this.persistence,new zM,e.initialUser,this.serializer)}Cu(e){return new f1(iy.mi,this.serializer)}Du(e){return new WM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class z4 extends df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof uf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new AM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new f1((i=>uf.mi(i,t)),this.serializer)}}class o_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=L4.bind(null,this.syncEngine),await y4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new b4})()}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),i=(function(l){return new t4(l)})(e.databaseInfo);return(function(l,u,f,p){return new r4(l,u,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,f){return new o4(i,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>tw(this.syncEngine,t,0)),(function(){return QT.v()?new QT:new XM})())}createSyncEngine(e,t){return(function(a,l,u,f,p,g,v){const _=new x4(a,l,u,f,p,g);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Oe(t);fe(_o,"RemoteStore shutting down."),i.Ea.add(5),await qu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}o_.provider={build:()=>new o_};class P1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ta="FirestoreClient";class B4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Rn.UNAUTHENTICATED,this.clientId=K_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{fe(Ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(fe(Ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=dy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function yg(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await m1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function sw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await F4(n);fe(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>XT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>XT(e.remoteStore,a))),n._onlineComponents=e}async function F4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ta,"Using user provided OfflineComponentProvider");try{await yg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ee.FAILED_PRECONDITION||a.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Rl("Error using user provided cache. Falling back to memory cache: "+t),await yg(n,new df)}}else fe(Ta,"Using default OfflineComponentProvider"),await yg(n,new z4(void 0));return n._offlineComponents}async function V1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ta,"Using user provided OnlineComponentProvider"),await sw(n,n._uninitializedComponentsProvider._online)):(fe(Ta,"Using default OnlineComponentProvider"),await sw(n,new o_))),n._onlineComponents}function q4(n){return V1(n).then((e=>e.syncEngine))}async function L1(n){const e=await V1(n),t=e.eventManager;return t.onListen=C4.bind(null,e.syncEngine),t.onUnlisten=N4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k4.bind(null,e.syncEngine),t}function H4(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,g){const v=new P1({next:w=>{v.Nu(),u.enqueueAndForget((()=>A1(l,_)));const I=w.docs.has(f);!I&&w.fromCache?g.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&p&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),_=new x1(J_(f.path),v,{includeMetadataChanges:!0,qa:!0});return S1(l,_)})(await L1(n),n.asyncQueue,e,t,i))),i.promise}function G4(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,p,g){const v=new P1({next:w=>{v.Nu(),u.enqueueAndForget((()=>A1(l,_))),w.fromCache&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),_=new x1(f,v,{includeMetadataChanges:!0,qa:!0});return S1(l,_)})(await L1(n),n.asyncQueue,e,t,i))),i.promise}function U1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const iw=new Map;const j1="firestore.googleapis.com",rw=!0;class aw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j1,this.ssl=rw}else this.host=e.host,this.ssl=e.ssl??rw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wM)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $f{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new XD;switch(i.type){case"firstParty":return new tO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=iw.get(t);i&&(fe("ComponentProvider","Removing Datastore"),iw.delete(t),i.terminate())})(this),Promise.resolve()}}function K4(n,e,t,i={}){n=_r(n,$f);const a=br(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(Rf(`https://${f}`),If("Firestore",!0)),l.host!==j1&&l.host!==f&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:a,emulatorOptions:i};if(!pa(p,u)&&(n._setSettings(p),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=Rn.MOCK_USER;else{g=D_(i.mockUserToken,n._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Rn(_)}n._authCredentials=new JD(new wA(g,v))}}class ql{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ql(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ju(t,Vt._jsonSchema))return new Vt(e,i||null,new we(yt.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:$t("string",Vt._jsonSchemaVersion),referencePath:$t("string")};class fa extends ql{constructor(e,t,i){super(e,t,J_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new we(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function Y4(n,e,...t){if(n=Lt(n),SA("collection","path",e),n instanceof $f){const i=yt.fromString(e,...t);return vT(i),new fa(n,null,i)}{if(!(n instanceof Vt||n instanceof fa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return vT(i),new fa(n.firestore,null,i)}}function sa(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=K_.newId()),SA("doc","path",e),n instanceof $f){const i=yt.fromString(e,...t);return yT(i),new Vt(n,null,new we(i))}{if(!(n instanceof Vt||n instanceof fa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return yT(i),new Vt(n.firestore,n instanceof fa?n.converter:null,new we(i))}}const ow="AsyncQueue";class lw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g1(this,"async_queue_retry"),this._c=()=>{const i=_g();i&&fe(ow,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=_g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;fe(ow,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",cw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=hy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:cw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Gu extends $f{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new lw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lw(e),this._firestoreClient=void 0,await e}}}function $4(n,e){const t=typeof n=="object"?n:Df(),i=typeof n=="string"?n:nf,a=Mu(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=N_("firestore");l&&K4(a,...l)}return a}function gy(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q4(n),n._firestoreClient}function Q4(n){const e=n._freezeSettings(),t=(function(a,l,u,f){return new yO(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,U1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new B4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(Sn.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xs(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ju(e,xs._jsonSchema))return xs.fromBase64String(e.bytes)}}xs._jsonSchemaVersion="firestore/bytes/1.0",xs._jsonSchema={type:$t("string",xs._jsonSchemaVersion),bytes:$t("string")};class Qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _y{constructor(e){this._methodName=e}}class ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(ju(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:$t("string",ki._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};class Di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ju(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Di(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:$t("string",Di._jsonSchemaVersion),vectorValues:$t("object")};const W4=/^__.*__$/;class X4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class z1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function B1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class yy{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(B1(this.Ac)&&W4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gf(e)}Cc(e,t,i,a=!1){return new yy({Ac:e,methodName:t,Dc:i,path:wn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vy(n){const e=n._freezeSettings(),t=Gf(n._databaseId);return new J4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z4(n,e,t,i,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);by("Data must be an object, but it was:",u,i);const f=F1(i,u);let p,g;if(l.merge)p=new us(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const w=l_(e,_,t);if(!u.contains(w))throw new de(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);H1(v,w)||v.push(w)}p=new us(v),g=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,g=u.fieldTransforms;return new X4(new Wn(f),p,g)}class Wf extends _y{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function eP(n,e,t,i){const a=n.Cc(1,e,t);by("Data must be an object, but it was:",a,i);const l=[],u=Wn.empty();Ra(i,((p,g)=>{const v=Ey(e,p,t);g=Lt(g);const _=a.yc(v);if(g instanceof Wf)l.push(v);else{const w=Ku(g,_);w!=null&&(l.push(v),u.set(v,w))}}));const f=new us(l);return new z1(u,f,a.fieldTransforms)}function tP(n,e,t,i,a,l){const u=n.Cc(1,e,t),f=[l_(e,i,t)],p=[a];if(l.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(l_(e,l[w])),p.push(l[w+1]);const g=[],v=Wn.empty();for(let w=f.length-1;w>=0;--w)if(!H1(g,f[w])){const I=f[w];let P=p[w];P=Lt(P);const q=u.yc(I);if(P instanceof Wf)g.push(I);else{const G=Ku(P,q);G!=null&&(g.push(I),v.set(I,G))}}const _=new us(g);return new z1(v,_,u.fieldTransforms)}function nP(n,e,t,i=!1){return Ku(t,n.Cc(i?4:3,e))}function Ku(n,e){if(q1(n=Lt(n)))return by("Unsupported field value:",e,n),F1(n,e);if(n instanceof _y)return(function(i,a){if(!B1(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const f of i){let p=Ku(f,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BO(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:cf(a.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cf(a.serializer,l)}}if(i instanceof ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xs)return{bytesValue:r1(a.serializer,i._byteString)};if(i instanceof Vt){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ny(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Di)return(function(u,f){return{mapValue:{fields:{[OA]:{stringValue:MA},[sf]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return Z_(f.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Vf(i)}`)})(n,e)}function F1(n,e){const t={};return CA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(n,((i,a)=>{const l=Ku(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function q1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof ki||n instanceof xs||n instanceof Vt||n instanceof _y||n instanceof Di)}function by(n,e,t){if(!q1(t)||!AA(t)){const i=Vf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function l_(n,e,t){if((e=Lt(e))instanceof Qf)return e._internalPath;if(typeof e=="string")return Ey(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const sP=new RegExp("[~\\*/\\[\\]]");function Ey(n,e,t){if(e.search(sP)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qf(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new de(ee.INVALID_ARGUMENT,f+n+p)}function H1(n,e){return n.some((t=>t.isEqual(e)))}class G1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ty("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iP extends G1{data(){return super.data()}}function Ty(n,e){return typeof e=="string"?Ey(n,e):e instanceof Qf?e._internalPath:e._delegate._internalPath}function rP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wy{}class aP extends wy{}function oP(n,e,...t){let i=[];e instanceof wy&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((p=>p instanceof Sy)).length,f=l.filter((p=>p instanceof Xf)).length;if(u>1||u>0&&f>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Xf extends aP{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Xf(e,t,i)}_apply(e){const t=this._parse(e);return K1(e._query,t),new ql(e.firestore,e.converter,Xg(e._query,t))}_parse(e){const t=vy(e.firestore);return(function(l,u,f,p,g,v,_){let w;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){hw(_,v);const P=[];for(const q of _)P.push(uw(p,l,q));w={arrayValue:{values:P}}}else w=uw(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||hw(_,v),w=nP(f,u,_,v==="in"||v==="not-in");return Yt.create(g,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lP(n,e,t){const i=e,a=Ty("where",n);return Xf._create(a,i,t)}class Sy extends wy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Js.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const p of f)K1(u,p),u=Xg(u,p)})(e._query,t),new ql(e.firestore,e.converter,Xg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uw(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FA(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(yt.fromString(t));if(!we.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return CT(n,new we(i))}if(t instanceof Vt)return CT(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vf(t)}.`)}function hw(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K1(n,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cP{convertValue(e,t="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ra(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[sf].arrayValue?.values?.map((i=>Pt(i.doubleValue)));return new Di(t)}convertGeoPoint(e){return new ki(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=jf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=ya(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=yt.fromString(e);ot(h1(i),9688,{name:e});const a=new xu(i.get(1),i.get(3)),l=new we(i.popFirst(5));return a.isEqual(t)||gr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function uP(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends G1{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ty("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:$t("string",fo._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class zd extends fo{data(e={}){return super.data(e)}}class Sl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new au(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new zd(this._firestore,this._userDataWriter,i.key,i,new au(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const p=new zd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new au(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new zd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new au(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:hP(f.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}function vg(n){n=_r(n,Vt);const e=_r(n.firestore,Gu);return H4(gy(e),n._key).then((t=>fP(e,n,t)))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:$t("string",Sl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Y1 extends cP{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function dP(n){n=_r(n,ql);const e=_r(n.firestore,Gu),t=gy(e),i=new Y1(e);return rP(n._query),G4(t,n._query).then((a=>new Sl(e,i,n,a)))}function dw(n,e,t){n=_r(n,Vt);const i=_r(n.firestore,Gu),a=uP(n.converter,e);return $1(i,[Z4(vy(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ii.none())])}function bg(n,e,t,...i){n=_r(n,Vt);const a=_r(n.firestore,Gu),l=vy(a);let u;return u=typeof(e=Lt(e))=="string"||e instanceof Qf?tP(l,"updateDoc",n._key,e,t,i):eP(l,"updateDoc",n._key,e),$1(a,[u.toMutation(n._key,Ii.exists(!0))])}function $1(n,e){return(function(i,a){const l=new hr;return i.asyncQueue.enqueueAndForget((async()=>D4(await q4(i),a,l))),l.promise})(gy(n),e)}function fP(n,e,t){const i=t.docs.get(e._key),a=new Y1(n);return new fo(n,a,e._key,i,new au(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){jl=a})(Sa),ga(new fr("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Gu(new ZD(i.getProvider("auth-internal")),new nO(u,i.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(g.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Rs(mT,pT,e),Rs(mT,pT,"esm2020")})();const Q1="firebasestorage.googleapis.com",mP="storageBucket",pP=120*1e3,gP=600*1e3;class Vi extends Pi{constructor(e,t,i=0){super(Eg(e),`Firebase Storage: ${t} (${Eg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mi||(Mi={}));function Eg(n){return"storage/"+n}function _P(){const n="An unknown error occurred, please check the error payload for server response.";return new Vi(Mi.UNKNOWN,n)}function yP(){return new Vi(Mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vP(){return new Vi(Mi.CANCELED,"User canceled the upload/download.")}function bP(n){return new Vi(Mi.INVALID_URL,"Invalid URL '"+n+"'.")}function EP(n){return new Vi(Mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function fw(n){return new Vi(Mi.INVALID_ARGUMENT,n)}function W1(){return new Vi(Mi.APP_DELETED,"The Firebase app was deleted.")}function TP(n){return new Vi(Mi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class $s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=$s.makeFromUrl(e,t)}catch{return new $s(e,"")}if(i.path==="")return i;throw EP(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+a+u,"i"),p={bucket:1,path:3};function g(me){me.path_=decodeURIComponent(me.path)}const v="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${v}/b/${a}/o${w}`,"i"),P={bucket:1,path:3},q=t===Q1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,G="([^?#]*)",$=new RegExp(`^https?://${q}/${a}/${G}`,"i"),re=[{regex:f,indices:p,postModify:l},{regex:I,indices:P,postModify:g},{regex:$,indices:{bucket:1,path:2},postModify:g}];for(let me=0;me<re.length;me++){const Me=re[me],Ee=Me.regex.exec(e);if(Ee){const N=Ee[Me.indices.bucket];let x=Ee[Me.indices.path];x||(x=""),i=new $s(N,x),Me.postModify(i);break}}if(i==null)throw bP(e);return i}}class wP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SP(n,e,t){let i=1,a=null,l=null,u=!1,f=0;function p(){return f===2}let g=!1;function v(...G){g||(g=!0,e.apply(null,G))}function _(G){a=setTimeout(()=>{a=null,n(I,p())},G)}function w(){l&&clearTimeout(l)}function I(G,...$){if(g){w();return}if(G){w(),v.call(null,G,...$);return}if(p()||u){w(),v.call(null,G,...$);return}i<64&&(i*=2);let re;f===1?(f=2,re=0):re=(i+Math.random())*1e3,_(re)}let P=!1;function q(G){P||(P=!0,w(),!g&&(a!==null?(G||(f=2),clearTimeout(a),_(0)):G||(f=1)))}return _(0),l=setTimeout(()=>{u=!0,q(!0)},t),q}function AP(n){n(!1)}function xP(n){return n!==void 0}function mw(n,e,t,i){if(i<e)throw fw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fw(`Invalid value for '${n}'. Expected ${t} or less.`)}function CP(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var mf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mf||(mf={}));function RP(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class IP{constructor(e,t,i,a,l,u,f,p,g,v,_,w=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=_,this.retry=w,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,q)=>{this.resolve_=P,this.reject_=q,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Ad(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const p=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===mf.NO_ERROR,p=l.getStatus();if(!f||RP(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===mf.ABORT;i(!1,new Ad(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;i(!0,new Ad(g,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());xP(p)?l(p):l()}catch(p){u(p)}else if(f!==null){const p=_P();p.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,p)):u(p)}else if(a.canceled){const p=this.appDelete_?W1():vP();u(p)}else{const p=yP();u(p)}};this.canceled_?t(!1,new Ad(!1,null,!0)):this.backoffId_=SP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ad{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function NP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function kP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function OP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function MP(n,e,t,i,a,l,u=!0,f=!1){const p=CP(n.urlParams),g=n.url+p,v=Object.assign({},n.headers);return DP(v,e),NP(v,t),kP(v,l),OP(v,i),new IP(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u,f)}function PP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function VP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class pf{constructor(e,t){this._service=e,t instanceof $s?this._location=t:this._location=$s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pf(e,t)}get root(){const e=new $s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VP(this._location.path)}get storage(){return this._service}get parent(){const e=PP(this._location.path);if(e===null)return null;const t=new $s(this._location.bucket,e);return new pf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw TP(e)}}function pw(n,e){const t=e?.[mP];return t==null?null:$s.makeFromBucketSpec(t,n)}function LP(n,e,t,i={}){n.host=`${e}:${t}`;const a=br(e);a&&(Rf(`https://${n.host}/b`),If("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:D_(l,n.app.options.projectId))}class UP{constructor(e,t,i,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=Q1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pP,this._maxUploadRetryTime=gP,this._requests=new Set,a!=null?this._bucket=$s.makeFromBucketSpec(a,this._host):this._bucket=pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$s.makeFromBucketSpec(this._url,e):this._bucket=pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pf(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new wP(W1());{const u=MP(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const gw="@firebase/storage",_w="0.14.0";const X1="storage";function jP(n=Df(),e){n=Lt(n);const i=Mu(n,X1).getImmediate({identifier:e}),a=N_("storage");return a&&zP(i,...a),i}function zP(n,e,t,i={}){LP(n,e,t,i)}function BP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new UP(t,i,a,e,Sa)}function FP(){ga(new fr(X1,BP,"PUBLIC").setMultipleInstances(!0)),Rs(gw,_w,""),Rs(gw,_w,"esm2020")}FP();var yw={};const vw="@firebase/database",bw="1.1.0";let J1="";function qP(n){J1=n}class HP{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:bu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class GP{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Er(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Z1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HP(e)}}catch{}return new GP},ho=Z1("localStorage"),KP=Z1("sessionStorage");const Al=new kf("@firebase/database"),YP=(function(){let n=1;return function(){return n++}})(),ex=function(n){const e=SN(n),t=new vN;t.update(e);const i=t.digest();return I_.encodeByteArray(i)},Yu=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Yu.apply(null,i):typeof i=="object"?e+=Tn(i):e+=i,e+=" "}return e};let fu=null,Ew=!0;const $P=function(n,e){ue(!0,"Can't turn on custom loggers persistently."),Al.logLevel=Be.VERBOSE,fu=Al.log.bind(Al)},Nn=function(...n){if(Ew===!0&&(Ew=!1,fu===null&&KP.get("logging_enabled")===!0&&$P()),fu){const e=Yu.apply(null,n);fu(e)}},$u=function(n){return function(...e){Nn(n,...e)}},c_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Yu(...n);Al.error(e)},vr=function(...n){const e=`FIREBASE FATAL ERROR: ${Yu(...n)}`;throw Al.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+Yu(...n);Al.warn(e)},QP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tx=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},WP=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ml="[MIN_NAME]",yo="[MAX_NAME]",Hl=function(n,e){if(n===e)return 0;if(n===Ml||e===yo)return-1;if(e===Ml||n===yo)return 1;{const t=Tw(n),i=Tw(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},XP=function(n,e){return n===e?0:n<e?-1:1},Qc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Tn(e))},Ay=function(n){if(typeof n!="object"||n===null)return Tn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Tn(e[i]),t+=":",t+=Ay(n[e[i]]);return t+="}",t},nx=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function Ns(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sx=function(n){ue(!tx(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,u,f,p;n===0?(l=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,u=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,u=Math.round(n/Math.pow(2,1-i-t))));const g=[];for(p=t;p;p-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(p=e;p;p-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const v=g.join("");let _="";for(p=0;p<64;p+=8){let w=parseInt(v.substr(p,8),2).toString(16);w.length===1&&(w="0"+w),_=_+w}return _.toLowerCase()},JP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},eV=new RegExp("^-?(0*)\\d{1,10}$"),tV=-2147483648,nV=2147483647,Tw=function(n){if(eV.test(n)){const e=Number(n);if(e>=tV&&e<=nV)return e}return null},Qu=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw hs("Exception was thrown by user callback.",t),e},Math.floor(0))}},sV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},mu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class iV{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,jn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class rV{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}class Bd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Bd.OWNER="owner";const xy="5",ix="v",rx="s",ax="r",ox="f",lx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cx="ls",ux="p",u_="ac",hx="websocket",dx="long_polling";class fx{constructor(e,t,i,a,l=!1,u="",f=!1,p=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ho.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ho.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function aV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function mx(n,e,t){ue(typeof e=="string","typeof type must == string"),ue(typeof t=="object","typeof params must == object");let i;if(e===hx)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===dx)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);aV(n)&&(t.ns=n.namespace);const a=[];return Ns(t,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}class oV{constructor(){this.counters_={}}incrementCounter(e,t=1){Er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return JI(this.counters_)}}const Tg={},wg={};function Cy(n){const e=n.toString();return Tg[e]||(Tg[e]=new oV),Tg[e]}function lV(n,e){const t=n.toString();return wg[t]||(wg[t]=e()),wg[t]}class cV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Qu(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ww="start",uV="close",hV="pLPCommand",dV="pRTLPCB",px="id",gx="pw",_x="ser",fV="cb",mV="seg",pV="ts",gV="d",_V="dframe",yx=1870,vx=30,yV=yx-vx,vV=25e3,bV=3e4;class yl{constructor(e,t,i,a,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$u(e),this.stats_=Cy(t),this.urlFn=p=>(this.appCheckToken&&(p[u_]=this.appCheckToken),mx(t,dx,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(bV)),WP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ry((...l)=>{const[u,f,p,g,v]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===ww)this.id=f,this.password=p;else if(u===uV)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[ww]="t",i[_x]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[fV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ix]=xy,this.transportSessionId&&(i[rx]=this.transportSessionId),this.lastSessionId&&(i[cx]=this.lastSessionId),this.applicationId&&(i[ux]=this.applicationId),this.appCheckToken&&(i[u_]=this.appCheckToken),typeof location<"u"&&location.hostname&&lx.test(location.hostname)&&(i[ax]=ox);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yl.forceAllow_=!0}static forceDisallow(){yl.forceDisallow_=!0}static isAvailable(){return yl.forceAllow_?!0:!yl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!JP()&&!ZP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=AS(t),a=nx(i,yV);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[_V]="t",i[px]=e,i[gx]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ry{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=YP(),window[hV+this.uniqueCallbackIdentifier]=e,window[dV+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ry.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Nn("frame writing exception"),f.stack&&Nn(f.stack),Nn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[px]=this.myID,e[gx]=this.myPW,e[_x]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vx+i.length<=yx;){const u=this.pendingSegs.shift();i=i+"&"+mV+a+"="+u.seg+"&"+pV+a+"="+u.ts+"&"+gV+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(vV)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const EV=16384,TV=45e3;let gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);class Ks{constructor(e,t,i,a,l,u,f){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$u(this.connId),this.stats_=Cy(t),this.connURL=Ks.connectionURL_(t,u,f,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const u={};return u[ix]=xy,typeof location<"u"&&location.hostname&&lx.test(location.hostname)&&(u[ax]=ox),t&&(u[rx]=t),i&&(u[cx]=i),a&&(u[u_]=a),l&&(u[ux]=l),mx(e,hx,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ho.set("previous_websocket_failure",!0);try{let i;uN(),this.mySock=new gf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Ks.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&gf!==null&&!Ks.forceDisallow_}static previouslyFailed(){return ho.isInMemoryStorage||ho.get("previous_websocket_failure")===!0}markConnectionHealthy(){ho.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=bu(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=nx(t,EV);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TV))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ks.responsesRequiredToBeHealthy=2;Ks.healthyTimeout=3e4;class Nu{static get ALL_TRANSPORTS(){return[yl,Ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ks&&Ks.isAvailable();let i=t&&!Ks.previouslyFailed();if(e.webSocketOnly&&(t||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ks];else{const a=this.transports_=[];for(const l of Nu.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Nu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nu.globalTransportInitialized_=!1;const wV=6e4,SV=5e3,AV=10*1024,xV=100*1024,Sg="t",Sw="d",CV="s",Aw="r",RV="e",xw="o",Cw="a",Rw="n",Iw="p",IV="h";class NV{constructor(e,t,i,a,l,u,f,p,g,v){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$u("c:"+this.id+":"),this.transportManager_=new Nu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=mu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>AV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sg in e){const t=e[Sg];t===Cw?this.upgradeIfSecondaryHealthy_():t===Aw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===xw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qc("t",e),i=Qc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Iw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Rw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qc("t",e),i=Qc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qc(Sg,e);if(Sw in e){const i=e[Sw];if(t===IV){const a={...i};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===Rw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===CV?this.onConnectionShutdown_(i):t===Aw?this.onReset_(i):t===RV?c_("Server Error: "+i):t===xw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):c_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),xy!==i&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),mu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Iw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ho.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bx{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Ex{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class _f extends Ex{static getInstance(){return new _f}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!O_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Nw=32,kw=768;class St{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function gt(){return new St("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wa(n){return n.pieces_.length-n.pieceNum_}function wt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new St(n.pieces_,e)}function Tx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function wx(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Sx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new St(e,0)}function un(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof St)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new St(t,0)}function $e(n){return n.pieceNum_>=n.pieces_.length}function Cs(n,e){const t=We(n),i=We(e);if(t===null)return e;if(t===i)return Cs(wt(n),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Ax(n,e){if(wa(n)!==wa(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Qs(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(wa(n)>wa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class DV{constructor(e,t){this.errorPrefix_=t,this.parts_=wx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Nf(this.parts_[i]);xx(this)}}function OV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Nf(e),xx(n)}function MV(n){const e=n.parts_.pop();n.byteLength_-=Nf(e),n.parts_.length>0&&(n.byteLength_-=1)}function xx(n){if(n.byteLength_>kw)throw new Error(n.errorPrefix_+"has a key path longer than "+kw+" bytes ("+n.byteLength_+").");if(n.parts_.length>Nw)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Nw+") or object contains a cycle "+lo(n))}function lo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class Iy extends Ex{static getInstance(){return new Iy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}const Wc=1e3,PV=300*1e3,Dw=30*1e3,VV=1.3,LV=3e4,UV="server_kill",Ow=3;class dr extends bx{constructor(e,t,i,a,l,u,f,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=p,this.id=dr.nextPersistentConnectionId_++,this.log_=$u("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wc,this.maxReconnectDelay_=PV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Iy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&_f.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Tn(l)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new k_,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,f=>{const p=f.d,g=f.s;dr.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Er(e,"w")){const i=Cl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Dw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=_N(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):c_("Unrecognized action received from server: "+Tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>LV&&(this.reconnectDelay_=Wc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*VV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+dr.nextConnectionId_++,l=this.lastSessionId;let u=!1,f=null;const p=function(){f?f.close():(u=!0,i())},g=function(_){ue(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(_)};this.realtime_={close:p,sendRequest:g};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,w]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);u?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,f=new NV(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{hs(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(UV)},l))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&hs(_),p())}}}interrupt(e){Nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mg(this.interruptReasons_)&&(this.reconnectDelay_=Wc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>Ay(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new St(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){Nn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ow&&(this.reconnectDelay_=Dw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Nn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ow&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+J1.replace(/\./g,"-")]=1,O_()?e["framework.cordova"]=1:NS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=_f.getInstance().currentlyOnline();return Mg(this.interruptReasons_)&&e}}dr.nextPersistentConnectionId_=0;dr.nextConnectionId_=0;class Xe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xe(e,t)}}class Jf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Xe(Ml,e),a=new Xe(Ml,t);return this.compare(i,a)!==0}minPost(){return Xe.MIN}}let xd;class Cx extends Jf{static get __EMPTY_NODE(){return xd}static set __EMPTY_NODE(e){xd=e}compare(e,t){return Hl(e.name,t.name)}isDefinedOn(e){throw Vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(yo,xd)}makePost(e,t){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,xd)}toString(){return".key"}}const xl=new Cx;class Cd{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class cn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??cn.RED,this.left=a??Xn.EMPTY_NODE,this.right=l??Xn.EMPTY_NODE}copy(e,t,i,a,l){return new cn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}cn.RED=!0;cn.BLACK=!1;class jV{copy(e,t,i,a,l){return this}insert(e,t,i){return new cn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xn{constructor(e,t=Xn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cn.BLACK,null,null))}remove(e){return new Xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Cd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Cd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Cd(this.root_,null,this.comparator_,!0,e)}}Xn.EMPTY_NODE=new jV;function zV(n,e){return Hl(n.name,e.name)}function Ny(n,e){return Hl(n,e)}let h_;function BV(n){h_=n}const Rx=function(n){return typeof n=="number"?"number:"+sx(n):"string:"+n},Ix=function(n){if(n.isLeafNode()){const e=n.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Er(e,".sv"),"Priority must be a string or number.")}else ue(n===h_||n.isEmpty(),"priority of unexpected type.");ue(n===h_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Mw;class on{static set __childrenNodeConstructor(e){Mw=e}static get __childrenNodeConstructor(){return Mw}constructor(e,t=on.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ix(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new on(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:We(e)===".priority"?this.priorityNode_:on.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:on.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=We(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ue(i!==".priority"||wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,on.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Rx(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=sx(this.value_):e+=this.value_,this.lazyHash_=ex(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===on.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof on.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=on.VALUE_TYPE_ORDER.indexOf(t),l=on.VALUE_TYPE_ORDER.indexOf(i);return ue(a>=0,"Unknown leaf type: "+t),ue(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}on.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Nx,kx;function FV(n){Nx=n}function qV(n){kx=n}class HV extends Jf{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?Hl(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(yo,new on("[PRIORITY-POST]",kx))}makePost(e,t){const i=Nx(e);return new Xe(t,new on("[PRIORITY-POST]",i))}toString(){return".priority"}}const Dn=new HV;const GV=Math.log(2);class KV{constructor(e){const t=l=>parseInt(Math.log(l)/GV,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yf=function(n,e,t,i){n.sort(e);const a=function(p,g){const v=g-p;let _,w;if(v===0)return null;if(v===1)return _=n[p],w=t?t(_):_,new cn(w,_.node,cn.BLACK,null,null);{const I=parseInt(v/2,10)+p,P=a(p,I),q=a(I+1,g);return _=n[I],w=t?t(_):_,new cn(w,_.node,cn.BLACK,P,q)}},l=function(p){let g=null,v=null,_=n.length;const w=function(P,q){const G=_-P,$=_;_-=P;const ce=a(G+1,$),re=n[G],me=t?t(re):re;I(new cn(me,re.node,q,null,ce))},I=function(P){g?(g.left=P,g=P):(v=P,g=P)};for(let P=0;P<p.count;++P){const q=p.nextBitIsOne(),G=Math.pow(2,p.count-(P+1));q?w(G,cn.BLACK):(w(G,cn.BLACK),w(G,cn.RED))}return v},u=new KV(n.length),f=l(u);return new Xn(i||e,f)};let Ag;const dl={};class cr{static get Default(){return ue(dl&&Dn,"ChildrenNode.ts has not been loaded"),Ag=Ag||new cr({".priority":dl},{".priority":Dn}),Ag}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Cl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xn?t:null}hasIndex(e){return Er(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(Xe.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let f;a?f=yf(i,e.getCompare()):f=dl;const p=e.toString(),g={...this.indexSet_};g[p]=e;const v={...this.indexes_};return v[p]=f,new cr(v,g)}addToIndexes(e,t){const i=Yd(this.indexes_,(a,l)=>{const u=Cl(this.indexSet_,l);if(ue(u,"Missing index implementation for "+l),a===dl)if(u.isDefinedOn(e.node)){const f=[],p=t.getIterator(Xe.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&f.push(g),g=p.getNext();return f.push(e),yf(f,u.getCompare())}else return dl;else{const f=t.get(e.name);let p=a;return f&&(p=p.remove(new Xe(e.name,f))),p.insert(e,e.node)}});return new cr(i,this.indexSet_)}removeFromIndexes(e,t){const i=Yd(this.indexes_,a=>{if(a===dl)return a;{const l=t.get(e.name);return l?a.remove(new Xe(e.name,l)):a}});return new cr(i,this.indexSet_)}}let Xc;class at{static get EMPTY_NODE(){return Xc||(Xc=new at(new Xn(Ny),null,cr.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ix(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xc}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Xc:t}}getChild(e){const t=We(e);return t===null?this:this.getImmediateChild(t).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ue(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Xe(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Xc:this.priorityNode_;return new at(a,u,l)}}updateChild(e,t){const i=We(e);if(i===null)return t;{ue(We(e)!==".priority"||wa(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(wt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Dn,(u,f)=>{t[u]=f.val(e),i++,l&&at.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*i){const u=[];for(const f in t)u[f]=t[f];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Rx(this.getPriority().val())+":"),this.forEachChild(Dn,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":ex(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Xe(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Xe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Xe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wu?-1:0}withIndex(e){if(e===xl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===xl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Dn),a=t.getIterator(Dn);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===xl?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class YV extends at{constructor(){super(new Xn(Ny),at.EMPTY_NODE,cr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const Wu=new YV;Object.defineProperties(Xe,{MIN:{value:new Xe(Ml,at.EMPTY_NODE)},MAX:{value:new Xe(yo,Wu)}});Cx.__EMPTY_NODE=at.EMPTY_NODE;on.__childrenNodeConstructor=at;BV(Wu);qV(Wu);const $V=!0;function kn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new on(t,kn(e))}if(!(n instanceof Array)&&$V){const t=[];let i=!1;if(Ns(n,(u,f)=>{if(u.substring(0,1)!=="."){const p=kn(f);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new Xe(u,p)))}}),t.length===0)return at.EMPTY_NODE;const l=yf(t,zV,u=>u.name,Ny);if(i){const u=yf(t,Dn.getCompare());return new at(l,kn(e),new cr({".priority":u},{".priority":Dn}))}else return new at(l,kn(e),cr.Default)}else{let t=at.EMPTY_NODE;return Ns(n,(i,a)=>{if(Er(n,i)&&i.substring(0,1)!=="."){const l=kn(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(kn(e))}}FV(kn);class QV extends Jf{constructor(e){super(),this.indexPath_=e,ue(!$e(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?Hl(e.name,t.name):l}makePost(e,t){const i=kn(e),a=at.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xe(t,a)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,Wu);return new Xe(yo,e)}toString(){return wx(this.indexPath_,0).join("/")}}class WV extends Jf{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Hl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,t){const i=kn(e);return new Xe(t,i)}toString(){return".value"}}const XV=new WV;function JV(n){return{type:"value",snapshotNode:n}}function ZV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function eL(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Pw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function tL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class ky{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ml}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new ky;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Vw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Dn?t="$priority":n.index_===XV?t="$value":n.index_===xl?t="$key":(ue(n.index_ instanceof QV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Tn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Tn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Tn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Tn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Tn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Lw(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Dn&&(e.i=n.index_.toString()),e}class vf extends bx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=$u("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=vf.getListenId_(e,i),f={};this.listens_[u]=f;const p=Vw(e._queryParams);this.restRequest_(l+".json",p,(g,v)=>{let _=v;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(l,_,!1,i),Cl(this.listens_,u)===f){let w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",a(w,null)}})}unlisten(e,t){const i=vf.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Vw(e._queryParams),i=e._path.toString(),a=new k_;return this.restRequest_(i+".json",t,(l,u)=>{let f=u;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),a.resolve(f)):a.reject(new Error(f))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ll(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let p=null;if(f.status>=200&&f.status<300){try{p=bu(f.responseText)}catch{hs("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,p)}else f.status!==401&&f.status!==404&&hs("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}class nL{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bf(){return{value:null,children:new Map}}function Dx(n,e,t){if($e(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=We(e);n.children.has(i)||n.children.set(i,bf());const a=n.children.get(i);e=wt(e),Dx(a,e,t)}}function d_(n,e,t){n.value!==null?t(e,n.value):sL(n,(i,a)=>{const l=new St(e.toString()+"/"+i);d_(a,l,t)})}function sL(n,e){n.children.forEach((t,i)=>{e(i,t)})}class iL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Ns(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}const Uw=10*1e3,rL=30*1e3,aL=300*1e3;class oL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new iL(e);const i=Uw+(rL-Uw)*Math.random();mu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Ns(e,(a,l)=>{l>0&&Er(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),mu(this.reportStats_.bind(this),Math.floor(Math.random()*2*aL))}}var xi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xi||(xi={}));function Ox(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Mx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Px(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ef{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=xi.ACK_USER_WRITE,this.source=Ox()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new St(e));return new Ef(gt(),t,this.revert)}}else return ue(We(this.path)===e,"operationForChild called for unrelated child."),new Ef(wt(this.path),this.affectedTree,this.revert)}}class vo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=xi.OVERWRITE}operationForChild(e){return $e(this.path)?new vo(this.source,gt(),this.snap.getImmediateChild(e)):new vo(this.source,wt(this.path),this.snap)}}class ku{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=xi.MERGE}operationForChild(e){if($e(this.path)){const t=this.children.subtree(new St(e));return t.isEmpty()?null:t.value?new vo(this.source,gt(),t.value):new ku(this.source,gt(),t)}else return ue(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ku(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dy{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function lL(n,e,t,i){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(tL(u.childName,u.snapshotNode))}),Jc(n,a,"child_removed",e,i,t),Jc(n,a,"child_added",e,i,t),Jc(n,a,"child_moved",l,i,t),Jc(n,a,"child_changed",e,i,t),Jc(n,a,"value",e,i,t),a}function Jc(n,e,t,i,a,l){const u=i.filter(f=>f.type===t);u.sort((f,p)=>uL(n,f,p)),u.forEach(f=>{const p=cL(n,f,l);a.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(p,n.query_))})})}function cL(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function uL(n,e,t){if(e.childName==null||t.childName==null)throw Vl("Should only compare child_ events.");const i=new Xe(e.childName,e.snapshotNode),a=new Xe(t.childName,t.snapshotNode);return n.index_.compare(i,a)}function Vx(n,e){return{eventCache:n,serverCache:e}}function pu(n,e,t,i){return Vx(new Dy(e,t,i),n.serverCache)}function Lx(n,e,t,i){return Vx(n.eventCache,new Dy(e,t,i))}function f_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xg;const hL=()=>(xg||(xg=new Xn(XP)),xg);class Tt{static fromObject(e){let t=new Tt(null);return Ns(e,(i,a)=>{t=t.set(new St(i),a)}),t}constructor(e,t=hL()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:gt(),value:this.value};if($e(e))return null;{const i=We(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(wt(e),t);return l!=null?{path:un(new St(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const t=We(e),i=this.children.get(t);return i!==null?i.subtree(wt(e)):new Tt(null)}}set(e,t){if($e(e))return new Tt(t,this.children);{const i=We(e),l=(this.children.get(i)||new Tt(null)).set(wt(e),t),u=this.children.insert(i,l);return new Tt(this.value,u)}}remove(e){if($e(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const t=We(e),i=this.children.get(t);if(i){const a=i.remove(wt(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new Tt(null):new Tt(this.value,l)}else return this}}get(e){if($e(e))return this.value;{const t=We(e),i=this.children.get(t);return i?i.get(wt(e)):null}}setTree(e,t){if($e(e))return t;{const i=We(e),l=(this.children.get(i)||new Tt(null)).setTree(wt(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new Tt(this.value,u)}}fold(e){return this.fold_(gt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(un(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,gt(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if($e(e))return null;{const l=We(e),u=this.children.get(l);return u?u.findOnPath_(wt(e),un(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gt(),t)}foreachOnPath_(e,t,i){if($e(e))return this;{this.value&&i(t,this.value);const a=We(e),l=this.children.get(a);return l?l.foreachOnPath_(wt(e),un(t,a),i):new Tt(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(un(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Xs{constructor(e){this.writeTree_=e}static empty(){return new Xs(new Tt(null))}}function gu(n,e,t){if($e(e))return new Xs(new Tt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const u=Cs(a,e);return l=l.updateChild(u,t),new Xs(n.writeTree_.set(a,l))}else{const a=new Tt(t),l=n.writeTree_.setTree(e,a);return new Xs(l)}}}function jw(n,e,t){let i=n;return Ns(t,(a,l)=>{i=gu(i,un(e,a),l)}),i}function zw(n,e){if($e(e))return Xs.empty();{const t=n.writeTree_.setTree(e,new Tt(null));return new Xs(t)}}function m_(n,e){return wo(n,e)!=null}function wo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Cs(t.path,e)):null}function Bw(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Dn,(i,a)=>{e.push(new Xe(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Xe(i,a.value))}),e}function ma(n,e){if($e(e))return n;{const t=wo(n,e);return t!=null?new Xs(new Tt(t)):new Xs(n.writeTree_.subtree(e))}}function p_(n){return n.writeTree_.isEmpty()}function Pl(n,e){return Ux(gt(),n.writeTree_,e)}function Ux(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(ue(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=Ux(un(n,a),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(un(n,".priority"),i)),t}}function jx(n,e){return Hx(e,n)}function dL(n,e,t,i,a){ue(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=gu(n.visibleWrites,e,t)),n.lastWriteId=i}function fL(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function mL(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,l=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&pL(f,i.path)?a=!1:Qs(i.path,f.path)&&(l=!0)),u--}if(a){if(l)return gL(n),!0;if(i.snap)n.visibleWrites=zw(n.visibleWrites,i.path);else{const f=i.children;Ns(f,p=>{n.visibleWrites=zw(n.visibleWrites,un(i.path,p))})}return!0}else return!1}function pL(n,e){if(n.snap)return Qs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qs(un(n.path,t),e))return!0;return!1}function gL(n){n.visibleWrites=zx(n.allWrites,_L,gt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function _L(n){return n.visible}function zx(n,e,t){let i=Xs.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const u=l.path;let f;if(l.snap)Qs(t,u)?(f=Cs(t,u),i=gu(i,f,l.snap)):Qs(u,t)&&(f=Cs(u,t),i=gu(i,gt(),l.snap.getChild(f)));else if(l.children){if(Qs(t,u))f=Cs(t,u),i=jw(i,f,l.children);else if(Qs(u,t))if(f=Cs(u,t),$e(f))i=jw(i,gt(),l.children);else{const p=Cl(l.children,We(f));if(p){const g=p.getChild(wt(f));i=gu(i,gt(),g)}}}else throw Vl("WriteRecord should have .snap or .children")}}return i}function Bx(n,e,t,i,a){if(!i&&!a){const l=wo(n.visibleWrites,e);if(l!=null)return l;{const u=ma(n.visibleWrites,e);if(p_(u))return t;if(t==null&&!m_(u,gt()))return null;{const f=t||at.EMPTY_NODE;return Pl(u,f)}}}else{const l=ma(n.visibleWrites,e);if(!a&&p_(l))return t;if(!a&&t==null&&!m_(l,gt()))return null;{const u=function(g){return(g.visible||a)&&(!i||!~i.indexOf(g.writeId))&&(Qs(g.path,e)||Qs(e,g.path))},f=zx(n.allWrites,u,e),p=t||at.EMPTY_NODE;return Pl(f,p)}}}function yL(n,e,t){let i=at.EMPTY_NODE;const a=wo(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Dn,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=ma(n.visibleWrites,e);return t.forEachChild(Dn,(u,f)=>{const p=Pl(ma(l,new St(u)),f);i=i.updateImmediateChild(u,p)}),Bw(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=ma(n.visibleWrites,e);return Bw(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function vL(n,e,t,i,a){ue(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=un(e,t);if(m_(n.visibleWrites,l))return null;{const u=ma(n.visibleWrites,l);return p_(u)?a.getChild(t):Pl(u,a.getChild(t))}}function bL(n,e,t,i){const a=un(e,t),l=wo(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=ma(n.visibleWrites,a);return Pl(u,i.getNode().getImmediateChild(t))}else return null}function EL(n,e){return wo(n.visibleWrites,e)}function TL(n,e,t,i,a,l,u){let f;const p=ma(n.visibleWrites,e),g=wo(p,gt());if(g!=null)f=g;else if(t!=null)f=Pl(p,t);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const v=[],_=u.getCompare(),w=l?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let I=w.getNext();for(;I&&v.length<a;)_(I,i)!==0&&v.push(I),I=w.getNext();return v}else return[]}function wL(){return{visibleWrites:Xs.empty(),allWrites:[],lastWriteId:-1}}function g_(n,e,t,i){return Bx(n.writeTree,n.treePath,e,t,i)}function Fx(n,e){return yL(n.writeTree,n.treePath,e)}function Fw(n,e,t,i){return vL(n.writeTree,n.treePath,e,t,i)}function Tf(n,e){return EL(n.writeTree,un(n.treePath,e))}function SL(n,e,t,i,a,l){return TL(n.writeTree,n.treePath,e,t,i,a,l)}function Oy(n,e,t){return bL(n.writeTree,n.treePath,e,t)}function qx(n,e){return Hx(un(n.treePath,e),n.writeTree)}function Hx(n,e){return{treePath:n,writeTree:e}}class AL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ue(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ue(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,Pw(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,eL(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,ZV(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,Pw(i,e.snapshotNode,a.oldSnap));else throw Vl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class xL{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const Gx=new xL;class My{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Dy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oy(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bo(this.viewCache_),l=SL(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}function CL(n,e){ue(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function RL(n,e,t,i,a){const l=new AL;let u,f;if(t.type===xi.OVERWRITE){const g=t;g.source.fromUser?u=__(n,e,g.path,g.snap,i,a,l):(ue(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!$e(g.path),u=wf(n,e,g.path,g.snap,i,a,f,l))}else if(t.type===xi.MERGE){const g=t;g.source.fromUser?u=NL(n,e,g.path,g.children,i,a,l):(ue(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),u=y_(n,e,g.path,g.children,i,a,f,l))}else if(t.type===xi.ACK_USER_WRITE){const g=t;g.revert?u=OL(n,e,g.path,i,a,l):u=kL(n,e,g.path,g.affectedTree,i,a,l)}else if(t.type===xi.LISTEN_COMPLETE)u=DL(n,e,t.path,i,l);else throw Vl("Unknown operation type: "+t.type);const p=l.getChanges();return IL(e,u,p),{viewCache:u,changes:p}}function IL(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=f_(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(JV(f_(e)))}}function Kx(n,e,t,i,a,l){const u=e.eventCache;if(Tf(i,t)!=null)return e;{let f,p;if($e(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=bo(e),v=g instanceof at?g:at.EMPTY_NODE,_=Fx(i,v);f=n.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const g=g_(i,bo(e));f=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=We(t);if(g===".priority"){ue(wa(t)===1,"Can't have a priority with additional path components");const v=u.getNode();p=e.serverCache.getNode();const _=Fw(i,t,v,p);_!=null?f=n.filter.updatePriority(v,_):f=u.getNode()}else{const v=wt(t);let _;if(u.isCompleteForChild(g)){p=e.serverCache.getNode();const w=Fw(i,t,u.getNode(),p);w!=null?_=u.getNode().getImmediateChild(g).updateChild(v,w):_=u.getNode().getImmediateChild(g)}else _=Oy(i,g,e.serverCache);_!=null?f=n.filter.updateChild(u.getNode(),g,_,v,a,l):f=u.getNode()}}return pu(e,f,u.isFullyInitialized()||$e(t),n.filter.filtersNodes())}}function wf(n,e,t,i,a,l,u,f){const p=e.serverCache;let g;const v=u?n.filter:n.filter.getIndexedFilter();if($e(t))g=v.updateFullNode(p.getNode(),i,null);else if(v.filtersNodes()&&!p.isFiltered()){const I=p.getNode().updateChild(t,i);g=v.updateFullNode(p.getNode(),I,null)}else{const I=We(t);if(!p.isCompleteForPath(t)&&wa(t)>1)return e;const P=wt(t),G=p.getNode().getImmediateChild(I).updateChild(P,i);I===".priority"?g=v.updatePriority(p.getNode(),G):g=v.updateChild(p.getNode(),I,G,P,Gx,null)}const _=Lx(e,g,p.isFullyInitialized()||$e(t),v.filtersNodes()),w=new My(a,_,l);return Kx(n,_,t,a,w,f)}function __(n,e,t,i,a,l,u){const f=e.eventCache;let p,g;const v=new My(a,e,l);if($e(t))g=n.filter.updateFullNode(e.eventCache.getNode(),i,u),p=pu(e,g,!0,n.filter.filtersNodes());else{const _=We(t);if(_===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),i),p=pu(e,g,f.isFullyInitialized(),f.isFiltered());else{const w=wt(t),I=f.getNode().getImmediateChild(_);let P;if($e(w))P=i;else{const q=v.getCompleteChild(_);q!=null?Tx(w)===".priority"&&q.getChild(Sx(w)).isEmpty()?P=q:P=q.updateChild(w,i):P=at.EMPTY_NODE}if(I.equals(P))p=e;else{const q=n.filter.updateChild(f.getNode(),_,P,w,v,u);p=pu(e,q,f.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function qw(n,e){return n.eventCache.isCompleteForChild(e)}function NL(n,e,t,i,a,l,u){let f=e;return i.foreach((p,g)=>{const v=un(t,p);qw(e,We(v))&&(f=__(n,f,v,g,a,l,u))}),i.foreach((p,g)=>{const v=un(t,p);qw(e,We(v))||(f=__(n,f,v,g,a,l,u))}),f}function Hw(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function y_(n,e,t,i,a,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;$e(t)?g=i:g=new Tt(null).setTree(t,i);const v=e.serverCache.getNode();return g.children.inorderTraversal((_,w)=>{if(v.hasChild(_)){const I=e.serverCache.getNode().getImmediateChild(_),P=Hw(n,I,w);p=wf(n,p,new St(_),P,a,l,u,f)}}),g.children.inorderTraversal((_,w)=>{const I=!e.serverCache.isCompleteForChild(_)&&w.value===null;if(!v.hasChild(_)&&!I){const P=e.serverCache.getNode().getImmediateChild(_),q=Hw(n,P,w);p=wf(n,p,new St(_),q,a,l,u,f)}}),p}function kL(n,e,t,i,a,l,u){if(Tf(a,t)!=null)return e;const f=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if($e(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return wf(n,e,t,p.getNode().getChild(t),a,l,f,u);if($e(t)){let g=new Tt(null);return p.getNode().forEachChild(xl,(v,_)=>{g=g.set(new St(v),_)}),y_(n,e,t,g,a,l,f,u)}else return e}else{let g=new Tt(null);return i.foreach((v,_)=>{const w=un(t,v);p.isCompleteForPath(w)&&(g=g.set(v,p.getNode().getChild(w)))}),y_(n,e,t,g,a,l,f,u)}}function DL(n,e,t,i,a){const l=e.serverCache,u=Lx(e,l.getNode(),l.isFullyInitialized()||$e(t),l.isFiltered());return Kx(n,u,t,i,Gx,a)}function OL(n,e,t,i,a,l){let u;if(Tf(i,t)!=null)return e;{const f=new My(i,e,a),p=e.eventCache.getNode();let g;if($e(t)||We(t)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=g_(i,bo(e));else{const _=e.serverCache.getNode();ue(_ instanceof at,"serverChildren would be complete if leaf node"),v=Fx(i,_)}v=v,g=n.filter.updateFullNode(p,v,l)}else{const v=We(t);let _=Oy(i,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=p.getImmediateChild(v)),_!=null?g=n.filter.updateChild(p,v,_,wt(t),f,l):e.eventCache.getNode().hasChild(v)?g=n.filter.updateChild(p,v,at.EMPTY_NODE,wt(t),f,l):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=g_(i,bo(e)),u.isLeafNode()&&(g=n.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||Tf(i,gt())!=null,pu(e,g,u,n.filter.filtersNodes())}}function ML(n,e){const t=bo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$e(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function Gw(n,e,t,i){e.type===xi.MERGE&&e.source.queryId!==null&&(ue(bo(n.viewCache_),"We should always have a full cache before handling merges"),ue(f_(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=RL(n.processor_,a,e,t,i);return CL(n.processor_,l.viewCache),ue(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,PL(n,l.changes,l.viewCache.eventCache.getNode())}function PL(n,e,t,i){const a=n.eventRegistrations_;return lL(n.eventGenerator_,e,t,a)}let Kw;function VL(n){ue(!Kw,"__referenceConstructor has already been defined"),Kw=n}function Py(n,e,t,i){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return ue(l!=null,"SyncTree gave us an op for an invalid query."),Gw(l,e,t,i)}else{let l=[];for(const u of n.views.values())l=l.concat(Gw(u,e,t,i));return l}}function Vy(n,e){let t=null;for(const i of n.views.values())t=t||ML(i,e);return t}let Yw;function LL(n){ue(!Yw,"__referenceConstructor has already been defined"),Yw=n}class $w{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=wL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UL(n,e,t,i,a){return dL(n.pendingWriteTree_,e,t,i,a),a?em(n,new vo(Ox(),e,t)):[]}function vl(n,e,t=!1){const i=fL(n.pendingWriteTree_,e);if(mL(n.pendingWriteTree_,e)){let l=new Tt(null);return i.snap!=null?l=l.set(gt(),!0):Ns(i.children,u=>{l=l.set(new St(u),!0)}),em(n,new Ef(i.path,l,t))}else return[]}function Zf(n,e,t){return em(n,new vo(Mx(),e,t))}function jL(n,e,t){const i=Tt.fromObject(t);return em(n,new ku(Mx(),e,i))}function zL(n,e,t,i){const a=Wx(n,i);if(a!=null){const l=Xx(a),u=l.path,f=l.queryId,p=Cs(u,e),g=new vo(Px(f),p,t);return Jx(n,u,g)}else return[]}function BL(n,e,t,i){const a=Wx(n,i);if(a){const l=Xx(a),u=l.path,f=l.queryId,p=Cs(u,e),g=Tt.fromObject(t),v=new ku(Px(f),p,g);return Jx(n,u,v)}else return[]}function Yx(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,f)=>{const p=Cs(u,e),g=Vy(f,p);if(g)return g});return Bx(a,e,l,t,!0)}function em(n,e){return $x(e,n.syncPointTree_,null,jx(n.pendingWriteTree_,gt()))}function $x(n,e,t,i){if($e(n.path))return Qx(n,e,t,i);{const a=e.get(gt());t==null&&a!=null&&(t=Vy(a,gt()));let l=[];const u=We(n.path),f=n.operationForChild(u),p=e.children.get(u);if(p&&f){const g=t?t.getImmediateChild(u):null,v=qx(i,u);l=l.concat($x(f,p,g,v))}return a&&(l=l.concat(Py(a,n,i,t))),l}}function Qx(n,e,t,i){const a=e.get(gt());t==null&&a!=null&&(t=Vy(a,gt()));let l=[];return e.children.inorderTraversal((u,f)=>{const p=t?t.getImmediateChild(u):null,g=qx(i,u),v=n.operationForChild(u);v&&(l=l.concat(Qx(v,f,p,g)))}),a&&(l=l.concat(Py(a,n,i,t))),l}function Wx(n,e){return n.tagToQueryMap.get(e)}function Xx(n){const e=n.indexOf("$");return ue(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new St(n.substr(0,e))}}function Jx(n,e,t){const i=n.syncPointTree_.get(e);ue(i,"Missing sync point for query tag that we're tracking");const a=jx(n.pendingWriteTree_,e);return Py(i,t,a,null)}class Ly{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ly(t)}node(){return this.node_}}class Uy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=un(this.path_,e);return new Uy(this.syncTree_,t)}node(){return Yx(this.syncTree_,this.path_)}}const FL=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Qw=function(n,e,t){if(!n||typeof n!="object")return n;if(ue(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return qL(n[".sv"],e,t);if(typeof n[".sv"]=="object")return HL(n[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},qL=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ue(!1,"Unexpected server value: "+n)}},HL=function(n,e,t){n.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ue(!1,"Unexpected increment value: "+i);const a=e.node();if(ue(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},GL=function(n,e,t,i){return jy(e,new Uy(t,n),i)},KL=function(n,e,t){return jy(n,new Ly(e),t)};function jy(n,e,t){const i=n.getPriority().val(),a=Qw(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,f=Qw(u.getValue(),e,t);return f!==u.getValue()||a!==u.getPriority().val()?new on(f,kn(a)):n}else{const u=n;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new on(a))),u.forEachChild(Dn,(f,p)=>{const g=jy(p,e.getImmediateChild(f),t);g!==p&&(l=l.updateImmediateChild(f,g))}),l}}class zy{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function By(n,e){let t=e instanceof St?e:new St(e),i=n,a=We(t);for(;a!==null;){const l=Cl(i.node.children,a)||{children:{},childCount:0};i=new zy(a,i,l),t=wt(t),a=We(t)}return i}function Gl(n){return n.node.value}function Zx(n,e){n.node.value=e,v_(n)}function eC(n){return n.node.childCount>0}function YL(n){return Gl(n)===void 0&&!eC(n)}function tm(n,e){Ns(n.node.children,(t,i)=>{e(new zy(t,n,i))})}function tC(n,e,t,i){t&&e(n),tm(n,a=>{tC(a,e,!0)})}function $L(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Xu(n){return new St(n.parent===null?n.name:Xu(n.parent)+"/"+n.name)}function v_(n){n.parent!==null&&QL(n.parent,n.name,n)}function QL(n,e,t){const i=YL(t),a=Er(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,v_(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,v_(n))}const WL=/[\[\].#$\/\u0000-\u001F\u007F]/,XL=/[\[\].#$\u0000-\u001F\u007F]/,Cg=10*1024*1024,nC=function(n){return typeof n=="string"&&n.length!==0&&!WL.test(n)},JL=function(n){return typeof n=="string"&&n.length!==0&&!XL.test(n)},ZL=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),JL(n)},sC=function(n,e,t){const i=t instanceof St?new DV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+lo(i));if(typeof e=="function")throw new Error(n+"contains a function "+lo(i)+" with contents = "+e.toString());if(tx(e))throw new Error(n+"contains "+e.toString()+" "+lo(i));if(typeof e=="string"&&e.length>Cg/3&&Nf(e)>Cg)throw new Error(n+"contains a string greater than "+Cg+" utf8 bytes "+lo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(Ns(e,(u,f)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!nC(u)))throw new Error(n+" contains an invalid key ("+u+") "+lo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OV(i,u),sC(n,f,i),MV(i)}),a&&l)throw new Error(n+' contains ".value" child '+lo(i)+" in addition to actual children.")}},e6=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!ZL(t))throw new Error(wN(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class t6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function n6(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!Ax(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function So(n,e,t){n6(n,t),s6(n,i=>Qs(i,e)||Qs(e,i))}function s6(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;e(l)?(i6(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function i6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();fu&&Nn("event: "+t.toString()),Qu(i)}}}const r6="repo_interrupt",a6=25;class o6{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new t6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bf(),this.transactionQueueTree_=new zy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function l6(n,e,t){if(n.stats_=Cy(n.repoInfo_),n.forceRestClient_||sV())n.server_=new vf(n.repoInfo_,(i,a,l,u)=>{Ww(n,i,a,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Xw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new dr(n.repoInfo_,e,(i,a,l,u)=>{Ww(n,i,a,l,u)},i=>{Xw(n,i)},i=>{u6(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=lV(n.repoInfo_,()=>new oL(n.stats_,n.server_)),n.infoData_=new nL,n.infoSyncTree_=new $w({startListening:(i,a,l,u)=>{let f=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(f=Zf(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),Fy(n,"connected",!1),n.serverSyncTree_=new $w({startListening:(i,a,l,u)=>(n.server_.listen(i,l,a,(f,p)=>{const g=u(f,p);So(n.eventQueue_,i._path,g)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function c6(n){const t=n.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function iC(n){return FL({timestamp:c6(n)})}function Ww(n,e,t,i,a){n.dataUpdateCount++;const l=new St(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const p=Yd(t,g=>kn(g));u=BL(n.serverSyncTree_,l,p,a)}else{const p=kn(t);u=zL(n.serverSyncTree_,l,p,a)}else if(i){const p=Yd(t,g=>kn(g));u=jL(n.serverSyncTree_,l,p)}else{const p=kn(t);u=Zf(n.serverSyncTree_,l,p)}let f=l;u.length>0&&(f=Hy(n,l)),So(n.eventQueue_,f,u)}function Xw(n,e){Fy(n,"connected",e),e===!1&&d6(n)}function u6(n,e){Ns(e,(t,i)=>{Fy(n,t,i)})}function Fy(n,e,t){const i=new St("/.info/"+e),a=kn(t);n.infoData_.updateSnapshot(i,a);const l=Zf(n.infoSyncTree_,i,a);So(n.eventQueue_,i,l)}function h6(n){return n.nextWriteId_++}function d6(n){rC(n,"onDisconnectEvents");const e=iC(n),t=bf();d_(n.onDisconnect_,gt(),(a,l)=>{const u=GL(a,l,n.serverSyncTree_,e);Dx(t,a,u)});let i=[];d_(t,gt(),(a,l)=>{i=i.concat(Zf(n.serverSyncTree_,a,l));const u=g6(n,a);Hy(n,u)}),n.onDisconnect_=bf(),So(n.eventQueue_,gt(),i)}function f6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(r6)}function rC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Nn(t,...e)}function aC(n,e,t){return Yx(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function qy(n,e=n.transactionQueueTree_){if(e||nm(n,e),Gl(e)){const t=lC(n,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&m6(n,Xu(e),t)}else eC(e)&&tm(e,t=>{qy(n,t)})}function m6(n,e,t){const i=t.map(g=>g.currentWriteId),a=aC(n,e,i);let l=a;const u=a.hash();for(let g=0;g<t.length;g++){const v=t[g];ue(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=Cs(e,v.path);l=l.updateChild(_,v.currentOutputSnapshotRaw)}const f=l.val(!0),p=e;n.server_.put(p.toString(),f,g=>{rC(n,"transaction put response",{path:p.toString(),status:g});let v=[];if(g==="ok"){const _=[];for(let w=0;w<t.length;w++)t[w].status=2,v=v.concat(vl(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&_.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();nm(n,By(n.transactionQueueTree_,e)),qy(n,n.transactionQueueTree_),So(n.eventQueue_,e,v);for(let w=0;w<_.length;w++)Qu(_[w])}else{if(g==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{hs("transaction at "+p.toString()+" failed: "+g);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=g}Hy(n,e)}},u)}function Hy(n,e){const t=oC(n,e),i=Xu(t),a=lC(n,t);return p6(n,a,i),i}function p6(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const p=e[f],g=Cs(t,p.path);let v=!1,_;if(ue(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)v=!0,_=p.abortReason,a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=a6)v=!0,_="maxretry",a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0));else{const w=aC(n,p.path,u);p.currentInputSnapshot=w;const I=e[f].update(w.val());if(I!==void 0){sC("transaction failed: Data returned ",I,p.path);let P=kn(I);typeof I=="object"&&I!=null&&Er(I,".priority")||(P=P.updatePriority(w.getPriority()));const G=p.currentWriteId,$=iC(n),ce=KL(P,w,$);p.currentOutputSnapshotRaw=P,p.currentOutputSnapshotResolved=ce,p.currentWriteId=h6(n),u.splice(u.indexOf(G),1),a=a.concat(UL(n.serverSyncTree_,p.path,ce,p.currentWriteId,p.applyLocally)),a=a.concat(vl(n.serverSyncTree_,G,!0))}else v=!0,_="nodata",a=a.concat(vl(n.serverSyncTree_,p.currentWriteId,!0))}So(n.eventQueue_,t,a),a=[],v&&(e[f].status=2,(function(w){setTimeout(w,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(_==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(_),!1,null))))}nm(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)Qu(i[f]);qy(n,n.transactionQueueTree_)}function oC(n,e){let t,i=n.transactionQueueTree_;for(t=We(e);t!==null&&Gl(i)===void 0;)i=By(i,t),e=wt(e),t=We(e);return i}function lC(n,e){const t=[];return cC(n,e,t),t.sort((i,a)=>i.order-a.order),t}function cC(n,e,t){const i=Gl(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);tm(e,a=>{cC(n,a,t)})}function nm(n,e){const t=Gl(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,Zx(e,t.length>0?t:void 0)}tm(e,i=>{nm(n,i)})}function g6(n,e){const t=Xu(oC(n,e)),i=By(n.transactionQueueTree_,e);return $L(i,a=>{Rg(n,a)}),Rg(n,i),tC(i,a=>{Rg(n,a)}),t}function Rg(n,e){const t=Gl(e);if(t){const i=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(ue(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(ue(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(vl(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?Zx(e,void 0):t.length=l+1,So(n.eventQueue_,Xu(e),a);for(let u=0;u<i.length;u++)Qu(i[u])}}function _6(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function y6(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}const Jw=function(n,e){const t=v6(n),i=t.namespace;t.domain==="firebase.com"&&vr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||QP();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new fx(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new St(t.pathString)}},v6=function(n){let e="",t="",i="",a="",l="",u=!0,f="https",p=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let v=n.indexOf("/");v===-1&&(v=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(v,_)),v<_&&(a=_6(n.substring(v,_)));const w=y6(n.substring(Math.min(n.length,_)));g=e.indexOf(":"),g>=0?(u=f==="https"||f==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const I=e.slice(0,g);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),t=e.substring(P+1),l=i}"ns"in w&&(l=w.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:u,scheme:f,pathString:a,namespace:l}};class Gy{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return $e(this._path)?null:Tx(this._path)}get ref(){return new Kl(this._repo,this._path)}get _queryIdentifier(){const e=Lw(this._queryParams),t=Ay(e);return t==="{}"?"default":t}get _queryObject(){return Lw(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof Gy))return!1;const t=this._repo===e._repo,i=Ax(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+kV(this._path)}}class Kl extends Gy{constructor(e,t){super(e,t,new ky,!1)}get parent(){const e=Sx(this._path);return e===null?null:new Kl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}VL(Kl);LL(Kl);const b6="FIREBASE_DATABASE_EMULATOR_HOST",b_={};let E6=!1;function T6(n,e,t,i){const a=e.lastIndexOf(":"),l=e.substring(0,a),u=br(l);n.repoInfo_=new fx(e,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function w6(n,e,t,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=Jw(l,a),f=u.repoInfo,p;typeof process<"u"&&yw&&(p=yw[b6]),p?(l=`http://${p}?ns=${f.namespace}`,u=Jw(l,a),f=u.repoInfo):u.repoInfo.secure;const g=new rV(n.name,n.options,e);e6("Invalid Firebase Database URL",u),$e(u.path)||vr("Database URL must point to the root of a Firebase Database (not including a child path).");const v=A6(f,n,g,new iV(n,t));return new x6(v,n)}function S6(n,e){const t=b_[e];(!t||t[n.key]!==n)&&vr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),f6(n),delete t[n.key]}function A6(n,e,t,i){let a=b_[e.name];a||(a={},b_[e.name]=a);let l=a[n.toURLString()];return l&&vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new o6(n,E6,t,i),a[n.toURLString()]=l,l}class x6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(l6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Kl(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(S6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vr("Cannot call "+e+" on a deleted database.")}}function C6(n=Df(),e){const t=Mu(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=N_("database");i&&R6(t,...i)}return t}function R6(n,e,t,i={}){n=Lt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&pa(i,l.repoInfo_.emulatorOptions))return;vr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Bd(Bd.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:D_(i.mockUserToken,n.app.options.projectId);u=new Bd(f)}br(e)&&(Rf(e),If("Database",!0)),T6(l,a,i,u)}function I6(n){qP(Sa),ga(new fr("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return w6(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),Rs(vw,bw,n),Rs(vw,bw,"esm2020")}dr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};dr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};I6();const N6={apiKey:"AIzaSyAYc4hqiWsrzIYvoybXUK_2HglHj_Ut1Mo",authDomain:"chatapp-d92e7.firebaseapp.com",projectId:"chatapp-d92e7",storageBucket:"chatapp-d92e7.firebasestorage.app",messagingSenderId:"312092844552",appId:"1:312092844552:web:c916c4839833d6c0e867bd",databaseURL:"https://chatapp-d92e7-default-rtdb.firebaseio.com"},sm=MS(N6),Zc=QD(sm),sr=$4(sm);C6(sm);jP(sm);const _u={DARK_MODE:"instaclone_dark_mode",BOOKMARKED_POSTS:"instaclone_bookmarked_posts"},k6=()=>{try{const n=localStorage.getItem(_u.DARK_MODE)==="true",e=JSON.parse(localStorage.getItem(_u.BOOKMARKED_POSTS)||"[]");return{darkMode:n,bookmarkedPosts:e}}catch{return{darkMode:!1,bookmarkedPosts:[]}}},Ig=(n,e)=>{try{localStorage.setItem(n,typeof e=="string"?e:JSON.stringify(e))}catch(t){console.warn("Failed to save to localStorage:",t)}},ei=$I((n,e)=>{const{darkMode:t,bookmarkedPosts:i}=k6();return{currentUser:null,pendingGoogleUser:null,isAuthenticated:!1,darkMode:t,bookmarkedPosts:i,initializeAuth:()=>{Lk(Zc,async a=>{if(a)try{const l=await vg(sa(sr,"users",a.uid));if(l.exists()){const u=l.data();try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.uid,username:u.username||a.displayName?.split(" ")[0].toLowerCase()||"user",email:a.email||u.email,fullName:u.fullName||a.displayName,avatar:u.avatar||a.photoURL||""})})}catch(f){console.warn("Database sync failed:",f)}n({currentUser:{id:a.uid,...u},isAuthenticated:!0})}else n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})}catch(l){console.error("Error loading user data:",l),n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})}else n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})})},loginWithGoogle:async()=>{const a=new ar,u=(await iD(Zc,a)).user,f=sa(sr,"users",u.uid),p=await vg(f);if(p.exists()){const g=p.data();n({currentUser:{id:u.uid,...g},isAuthenticated:!0,pendingGoogleUser:null})}else throw n({pendingGoogleUser:{uid:u.uid,displayName:u.displayName||"User",email:u.email||"",photoURL:u.photoURL||""}}),new Error("USERNAME_SETUP_REQUIRED")},checkUsernameAvailable:async a=>{try{const l=oP(Y4(sr,"users"),lP("username","==",a.toLowerCase()));return(await dP(l)).empty}catch(l){return console.error("Error checking username:",l),!1}},completeGoogleSignup:async a=>{const l=e().pendingGoogleUser;if(!l)throw new Error("No pending user");if(!await e().checkUsernameAvailable(a))throw new Error("Username already taken");const f={username:a.toLowerCase(),fullName:l.displayName,email:l.email,avatar:l.photoURL,createdAt:pt.now()};await dw(sa(sr,"users",l.uid),f);try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l.uid,username:a.toLowerCase(),email:l.email,fullName:l.displayName,avatar:l.photoURL})})}catch(p){console.warn("Database sync failed:",p)}n({currentUser:{id:l.uid,...f},isAuthenticated:!0,pendingGoogleUser:null})},loginWithEmail:async(a,l)=>{const f=(await Mk(Zc,a,l)).user,p=await vg(sa(sr,"users",f.uid));if(p.exists()){const g=p.data();n({currentUser:{id:f.uid,...g},isAuthenticated:!0})}},signupWithEmail:async(a,l,u)=>{const p=(await Ok(Zc,a,l)).user;let g=a.split("@")[0].toLowerCase(),v=g,_=1;for(;!await e().checkUsernameAvailable(v);)v=`${g}${_}`,_++;const w={username:v,fullName:u,email:a,avatar:"",createdAt:pt.now()};await dw(sa(sr,"users",p.uid),w);try{await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:p.uid,username:v,email:a,fullName:u,avatar:""})})}catch(I){console.warn("Database sync failed:",I)}n({currentUser:{id:p.uid,...w},isAuthenticated:!0})},logout:async()=>{try{await Uk(Zc)}catch(a){console.error("Error signing out:",a)}n({currentUser:null,isAuthenticated:!1,pendingGoogleUser:null})},updateProfile:async a=>{const l=e().currentUser;if(!l)throw new Error("No current user");try{const u=await fetch(`/api/users/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!u.ok)throw new Error("Failed to update profile");const f=await u.json();n({currentUser:{...l,...f}})}catch(u){throw console.error("Error updating profile:",u),u}},addInstagramAccount:async(a,l)=>{const u=e().currentUser;if(!u)throw new Error("No current user");try{const{getUserProfile:f}=await HI(async()=>{const{getUserProfile:q}=await Promise.resolve().then(()=>BU);return{getUserProfile:q}},void 0),p=await f("me",a),g={token:a,accountName:l||`Account ${(u.instagramAccounts?.length||0)+1}`,instagramUsername:p?.username,createdAt:pt.now()},v=sa(sr,"users",u.id),_=u.instagramAccounts||[],w=_.length===0,I={...g,id:_.length};await bg(v,{instagramAccounts:[..._,I],...w&&{activeInstagramAccountId:0}});try{await fetch("/api/instagram-accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:u.id,token:a,accountName:l||`Account ${_.length+1}`,instagramUsername:p?.username})})}catch(q){console.warn("Database sync failed:",q)}const P=[..._,I];n(q=>({currentUser:q.currentUser?{...q.currentUser,instagramAccounts:P,activeInstagramAccountId:w?0:q.currentUser.activeInstagramAccountId}:null}))}catch(f){throw console.error("Error adding Instagram account:",f),f}},switchInstagramAccount:async a=>{const l=e().currentUser;if(!l)throw new Error("No current user");try{const u=sa(sr,"users",l.id);await bg(u,{activeInstagramAccountId:a}),n(f=>({currentUser:f.currentUser?{...f.currentUser,activeInstagramAccountId:a}:null}))}catch(u){throw console.error("Error switching Instagram account:",u),u}},removeInstagramAccount:async a=>{const l=e().currentUser;if(!l)throw new Error("No current user");try{const u=sa(sr,"users",l.id),f=(l.instagramAccounts||[]).filter((p,g)=>g!==a);await bg(u,{instagramAccounts:f,activeInstagramAccountId:l.activeInstagramAccountId===a?f.length>0?0:void 0:l.activeInstagramAccountId});try{await fetch(`/api/instagram-accounts/${a}`,{method:"DELETE"})}catch(p){console.warn("Database sync failed:",p)}n(p=>({currentUser:p.currentUser?{...p.currentUser,instagramAccounts:f,activeInstagramAccountId:p.currentUser.activeInstagramAccountId===a?0:p.currentUser.activeInstagramAccountId}:null}))}catch(u){throw console.error("Error removing Instagram account:",u),u}},getActiveInstagramToken:()=>{const a=e().currentUser;if(!a||!a.instagramAccounts||a.instagramAccounts.length===0)return;const l=a.activeInstagramAccountId||0;return a.instagramAccounts[l]?.token},toggleDarkMode:()=>{n(a=>{const l=!a.darkMode;return Ig(_u.DARK_MODE,l),{darkMode:l}})},bookmarkPost:a=>{n(l=>{const u=[...l.bookmarkedPosts,a];return Ig(_u.BOOKMARKED_POSTS,u),{bookmarkedPosts:u}})},removeBookmark:a=>{n(l=>{const u=l.bookmarkedPosts.filter(f=>f!==a);return Ig(_u.BOOKMARKED_POSTS,u),{bookmarkedPosts:u}})}}});var D6=dS();const O6=hS(D6);function M6(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const P6=n=>{switch(n){case"success":return U6;case"info":return z6;case"warning":return j6;case"error":return B6;default:return null}},V6=Array(12).fill(0),L6=({visible:n,className:e})=>ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ae.createElement("div",{className:"sonner-spinner"},V6.map((t,i)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),U6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),j6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),z6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),F6=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),q6=()=>{const[n,e]=ae.useState(document.hidden);return ae.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let E_=1;class H6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...a}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:E_++,u=this.toasts.find(p=>p.id===l),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(p=>p.id===l?(this.publish({...p,...e,id:l,title:i}),{...p,...e,id:l,dismissible:f,title:i}):p):this.addToast({title:i,...a,dismissible:f,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let l=i!==void 0,u;const f=a.then(async g=>{if(u=["resolve",g],ae.isValidElement(g))l=!1,this.create({id:i,type:"default",message:g});else if(K6(g)&&!g.ok){l=!1;const _=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,P=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:w,...P})}else if(g instanceof Error){l=!1;const _=typeof t.error=="function"?await t.error(g):t.error,w=typeof t.description=="function"?await t.description(g):t.description,P=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:w,...P})}else if(t.success!==void 0){l=!1;const _=typeof t.success=="function"?await t.success(g):t.success,w=typeof t.description=="function"?await t.description(g):t.description,P=typeof _=="object"&&!ae.isValidElement(_)?_:{message:_};this.create({id:i,type:"success",description:w,...P})}}).catch(async g=>{if(u=["reject",g],t.error!==void 0){l=!1;const v=typeof t.error=="function"?await t.error(g):t.error,_=typeof t.description=="function"?await t.description(g):t.description,I=typeof v=="object"&&!ae.isValidElement(v)?v:{message:v};this.create({id:i,type:"error",description:_,...I})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),p=()=>new Promise((g,v)=>f.then(()=>u[0]==="reject"?v(u[1]):g(u[1])).catch(v));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(e,t)=>{const i=t?.id||E_++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const $n=new H6,G6=(n,e)=>{const t=e?.id||E_++;return $n.addToast({title:n,...e,id:t}),t},K6=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Y6=G6,$6=()=>$n.toasts,Q6=()=>$n.getActiveToasts(),yu=Object.assign(Y6,{success:$n.success,info:$n.info,warning:$n.warning,error:$n.error,custom:$n.custom,message:$n.message,promise:$n.promise,dismiss:$n.dismiss,loading:$n.loading},{getHistory:$6,getToasts:Q6});M6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Rd(n){return n.label!==void 0}const W6=3,X6="24px",J6="16px",Zw=4e3,Z6=356,e3=14,t3=45,n3=200;function Si(...n){return n.filter(Boolean).join(" ")}function s3(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const i3=n=>{var e,t,i,a,l,u,f,p,g;const{invert:v,toast:_,unstyled:w,interacting:I,setHeights:P,visibleToasts:q,heights:G,index:$,toasts:ce,expanded:re,removeToast:me,defaultRichColors:Me,closeButton:Ee,style:N,cancelButtonStyle:x,actionButtonStyle:R,className:V="",descriptionClassName:O="",duration:L,position:C,gap:Je,expandByDefault:Ze,classNames:z,icons:ie,closeButtonAriaLabel:ne="Close toast"}=n,[Ne,ke]=ae.useState(null),[D,X]=ae.useState(null),[Q,se]=ae.useState(!1),[he,be]=ae.useState(!1),[ve,Re]=ae.useState(!1),[Fe,hn]=ae.useState(!1),[Mn,tn]=ae.useState(!1),[wr,zn]=ae.useState(0),[Da,ti]=ae.useState(0),ks=ae.useRef(_.duration||L||Zw),Sr=ae.useRef(null),it=ae.useRef(null),kt=$===0,ni=$+1<=q,dn=_.type,Ds=_.dismissible!==!1,fn=_.className||"",Li=_.descriptionClassName||"",si=ae.useMemo(()=>G.findIndex(Se=>Se.toastId===_.id)||0,[G,_.id]),Oa=ae.useMemo(()=>{var Se;return(Se=_.closeButton)!=null?Se:Ee},[_.closeButton,Ee]),Os=ae.useMemo(()=>_.duration||L||Zw,[_.duration,L]),Ma=ae.useRef(0),Ms=ae.useRef(0),Pa=ae.useRef(0),Ps=ae.useRef(null),[Jn,Wt]=C.split("-"),Pn=ae.useMemo(()=>G.reduce((Se,rt,Ut)=>Ut>=si?Se:Se+rt.height,0),[G,si]),At=q6(),Ao=_.invert||v,ii=dn==="loading";Ms.current=ae.useMemo(()=>si*Je+Pn,[si,Pn]),ae.useEffect(()=>{ks.current=Os},[Os]),ae.useEffect(()=>{se(!0)},[]),ae.useEffect(()=>{const Se=it.current;if(Se){const rt=Se.getBoundingClientRect().height;return ti(rt),P(Ut=>[{toastId:_.id,height:rt,position:_.position},...Ut]),()=>P(Ut=>Ut.filter(nn=>nn.toastId!==_.id))}},[P,_.id]),ae.useLayoutEffect(()=>{if(!Q)return;const Se=it.current,rt=Se.style.height;Se.style.height="auto";const Ut=Se.getBoundingClientRect().height;Se.style.height=rt,ti(Ut),P(nn=>nn.find(vt=>vt.toastId===_.id)?nn.map(vt=>vt.toastId===_.id?{...vt,height:Ut}:vt):[{toastId:_.id,height:Ut,position:_.position},...nn])},[Q,_.title,_.description,P,_.id,_.jsx,_.action,_.cancel]);const Zn=ae.useCallback(()=>{be(!0),zn(Ms.current),P(Se=>Se.filter(rt=>rt.toastId!==_.id)),setTimeout(()=>{me(_)},n3)},[_,me,P,Ms]);ae.useEffect(()=>{if(_.promise&&dn==="loading"||_.duration===1/0||_.type==="loading")return;let Se;return re||I||At?(()=>{if(Pa.current<Ma.current){const nn=new Date().getTime()-Ma.current;ks.current=ks.current-nn}Pa.current=new Date().getTime()})():(()=>{ks.current!==1/0&&(Ma.current=new Date().getTime(),Se=setTimeout(()=>{_.onAutoClose==null||_.onAutoClose.call(_,_),Zn()},ks.current))})(),()=>clearTimeout(Se)},[re,I,_,dn,At,Zn]),ae.useEffect(()=>{_.delete&&(Zn(),_.onDismiss==null||_.onDismiss.call(_,_))},[Zn,_.delete]);function ds(){var Se;if(ie?.loading){var rt;return ae.createElement("div",{className:Si(z?.loader,_==null||(rt=_.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":dn==="loading"},ie.loading)}return ae.createElement(L6,{className:Si(z?.loader,_==null||(Se=_.classNames)==null?void 0:Se.loader),visible:dn==="loading"})}const Ui=_.icon||ie?.[dn]||P6(dn);var Rt,es;return ae.createElement("li",{tabIndex:0,ref:it,className:Si(V,fn,z?.toast,_==null||(e=_.classNames)==null?void 0:e.toast,z?.default,z?.[dn],_==null||(t=_.classNames)==null?void 0:t[dn]),"data-sonner-toast":"","data-rich-colors":(Rt=_.richColors)!=null?Rt:Me,"data-styled":!(_.jsx||_.unstyled||w),"data-mounted":Q,"data-promise":!!_.promise,"data-swiped":Mn,"data-removed":he,"data-visible":ni,"data-y-position":Jn,"data-x-position":Wt,"data-index":$,"data-front":kt,"data-swiping":ve,"data-dismissible":Ds,"data-type":dn,"data-invert":Ao,"data-swipe-out":Fe,"data-swipe-direction":D,"data-expanded":!!(re||Ze&&Q),"data-testid":_.testId,style:{"--index":$,"--toasts-before":$,"--z-index":ce.length-$,"--offset":`${he?wr:Ms.current}px`,"--initial-height":Ze?"auto":`${Da}px`,...N,..._.style},onDragEnd:()=>{Re(!1),ke(null),Ps.current=null},onPointerDown:Se=>{Se.button!==2&&(ii||!Ds||(Sr.current=new Date,zn(Ms.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(Re(!0),Ps.current={x:Se.clientX,y:Se.clientY})))},onPointerUp:()=>{var Se,rt,Ut;if(Fe||!Ds)return;Ps.current=null;const nn=Number(((Se=it.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Vn=Number(((rt=it.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vt=new Date().getTime()-((Ut=Sr.current)==null?void 0:Ut.getTime()),An=Ne==="x"?nn:Vn,fs=Math.abs(An)/vt;if(Math.abs(An)>=t3||fs>.11){zn(Ms.current),_.onDismiss==null||_.onDismiss.call(_,_),X(Ne==="x"?nn>0?"right":"left":Vn>0?"down":"up"),Zn(),hn(!0);return}else{var mn,pn;(mn=it.current)==null||mn.style.setProperty("--swipe-amount-x","0px"),(pn=it.current)==null||pn.style.setProperty("--swipe-amount-y","0px")}tn(!1),Re(!1),ke(null)},onPointerMove:Se=>{var rt,Ut,nn;if(!Ps.current||!Ds||((rt=window.getSelection())==null?void 0:rt.toString().length)>0)return;const vt=Se.clientY-Ps.current.y,An=Se.clientX-Ps.current.x;var fs;const mn=(fs=n.swipeDirections)!=null?fs:s3(C);!Ne&&(Math.abs(An)>1||Math.abs(vt)>1)&&ke(Math.abs(An)>Math.abs(vt)?"x":"y");let pn={x:0,y:0};const ri=gn=>1/(1.5+Math.abs(gn)/20);if(Ne==="y"){if(mn.includes("top")||mn.includes("bottom"))if(mn.includes("top")&&vt<0||mn.includes("bottom")&&vt>0)pn.y=vt;else{const gn=vt*ri(vt);pn.y=Math.abs(gn)<Math.abs(vt)?gn:vt}}else if(Ne==="x"&&(mn.includes("left")||mn.includes("right")))if(mn.includes("left")&&An<0||mn.includes("right")&&An>0)pn.x=An;else{const gn=An*ri(An);pn.x=Math.abs(gn)<Math.abs(An)?gn:An}(Math.abs(pn.x)>0||Math.abs(pn.y)>0)&&tn(!0),(Ut=it.current)==null||Ut.style.setProperty("--swipe-amount-x",`${pn.x}px`),(nn=it.current)==null||nn.style.setProperty("--swipe-amount-y",`${pn.y}px`)}},Oa&&!_.jsx&&dn!=="loading"?ae.createElement("button",{"aria-label":ne,"data-disabled":ii,"data-close-button":!0,onClick:ii||!Ds?()=>{}:()=>{Zn(),_.onDismiss==null||_.onDismiss.call(_,_)},className:Si(z?.closeButton,_==null||(i=_.classNames)==null?void 0:i.closeButton)},(es=ie?.close)!=null?es:F6):null,(dn||_.icon||_.promise)&&_.icon!==null&&(ie?.[dn]!==null||_.icon)?ae.createElement("div",{"data-icon":"",className:Si(z?.icon,_==null||(a=_.classNames)==null?void 0:a.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||ds():null,_.type!=="loading"?Ui:null):null,ae.createElement("div",{"data-content":"",className:Si(z?.content,_==null||(l=_.classNames)==null?void 0:l.content)},ae.createElement("div",{"data-title":"",className:Si(z?.title,_==null||(u=_.classNames)==null?void 0:u.title)},_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title),_.description?ae.createElement("div",{"data-description":"",className:Si(O,Li,z?.description,_==null||(f=_.classNames)==null?void 0:f.description)},typeof _.description=="function"?_.description():_.description):null),ae.isValidElement(_.cancel)?_.cancel:_.cancel&&Rd(_.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||x,onClick:Se=>{Rd(_.cancel)&&Ds&&(_.cancel.onClick==null||_.cancel.onClick.call(_.cancel,Se),Zn())},className:Si(z?.cancelButton,_==null||(p=_.classNames)==null?void 0:p.cancelButton)},_.cancel.label):null,ae.isValidElement(_.action)?_.action:_.action&&Rd(_.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||R,onClick:Se=>{Rd(_.action)&&(_.action.onClick==null||_.action.onClick.call(_.action,Se),!Se.defaultPrevented&&Zn())},className:Si(z?.actionButton,_==null||(g=_.classNames)==null?void 0:g.actionButton)},_.action.label):null)};function eS(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function r3(n,e){const t={};return[n,e].forEach((i,a)=>{const l=a===1,u=l?"--mobile-offset":"--offset",f=l?J6:X6;function p(g){["top","right","bottom","left"].forEach(v=>{t[`${u}-${v}`]=typeof g=="number"?`${g}px`:g})}typeof i=="number"||typeof i=="string"?p(i):typeof i=="object"?["top","right","bottom","left"].forEach(g=>{i[g]===void 0?t[`${u}-${g}`]=f:t[`${u}-${g}`]=typeof i[g]=="number"?`${i[g]}px`:i[g]}):p(f)}),t}const a3=ae.forwardRef(function(e,t){const{id:i,invert:a,position:l="bottom-right",hotkey:u=["altKey","KeyT"],expand:f,closeButton:p,className:g,offset:v,mobileOffset:_,theme:w="light",richColors:I,duration:P,style:q,visibleToasts:G=W6,toastOptions:$,dir:ce=eS(),gap:re=e3,icons:me,containerAriaLabel:Me="Notifications"}=e,[Ee,N]=ae.useState([]),x=ae.useMemo(()=>i?Ee.filter(Q=>Q.toasterId===i):Ee.filter(Q=>!Q.toasterId),[Ee,i]),R=ae.useMemo(()=>Array.from(new Set([l].concat(x.filter(Q=>Q.position).map(Q=>Q.position)))),[x,l]),[V,O]=ae.useState([]),[L,C]=ae.useState(!1),[Je,Ze]=ae.useState(!1),[z,ie]=ae.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=ae.useRef(null),Ne=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),ke=ae.useRef(null),D=ae.useRef(!1),X=ae.useCallback(Q=>{N(se=>{var he;return(he=se.find(be=>be.id===Q.id))!=null&&he.delete||$n.dismiss(Q.id),se.filter(({id:be})=>be!==Q.id)})},[]);return ae.useEffect(()=>$n.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{N(se=>se.map(he=>he.id===Q.id?{...he,delete:!0}:he))});return}setTimeout(()=>{O6.flushSync(()=>{N(se=>{const he=se.findIndex(be=>be.id===Q.id);return he!==-1?[...se.slice(0,he),{...se[he],...Q},...se.slice(he+1)]:[Q,...se]})})})}),[Ee]),ae.useEffect(()=>{if(w!=="system"){ie(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:se})=>{ie(se?"dark":"light")})}catch{Q.addListener(({matches:he})=>{try{ie(he?"dark":"light")}catch(be){console.error(be)}})}},[w]),ae.useEffect(()=>{Ee.length<=1&&C(!1)},[Ee]),ae.useEffect(()=>{const Q=se=>{var he;if(u.every(Re=>se[Re]||se.code===Re)){var ve;C(!0),(ve=ne.current)==null||ve.focus()}se.code==="Escape"&&(document.activeElement===ne.current||(he=ne.current)!=null&&he.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[u]),ae.useEffect(()=>{if(ne.current)return()=>{ke.current&&(ke.current.focus({preventScroll:!0}),ke.current=null,D.current=!1)}},[ne.current]),ae.createElement("section",{ref:t,"aria-label":`${Me} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((Q,se)=>{var he;const[be,ve]=Q.split("-");return x.length?ae.createElement("ol",{key:Q,dir:ce==="auto"?eS():ce,tabIndex:-1,ref:ne,className:g,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":be,"data-x-position":ve,style:{"--front-toast-height":`${((he=V[0])==null?void 0:he.height)||0}px`,"--width":`${Z6}px`,"--gap":`${re}px`,...q,...r3(v,_)},onBlur:Re=>{D.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(D.current=!1,ke.current&&(ke.current.focus({preventScroll:!0}),ke.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||D.current||(D.current=!0,ke.current=Re.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{Je||C(!1)},onDragEnd:()=>C(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Ze(!0)},onPointerUp:()=>Ze(!1)},x.filter(Re=>!Re.position&&se===0||Re.position===Q).map((Re,Fe)=>{var hn,Mn;return ae.createElement(i3,{key:Re.id,icons:me,index:Fe,toast:Re,defaultRichColors:I,duration:(hn=$?.duration)!=null?hn:P,className:$?.className,descriptionClassName:$?.descriptionClassName,invert:a,visibleToasts:G,closeButton:(Mn=$?.closeButton)!=null?Mn:p,interacting:Je,position:Q,style:$?.style,unstyled:$?.unstyled,classNames:$?.classNames,cancelButtonStyle:$?.cancelButtonStyle,actionButtonStyle:$?.actionButtonStyle,closeButtonAriaLabel:$?.closeButtonAriaLabel,removeToast:X,toasts:x.filter(tn=>tn.position==Re.position),heights:V.filter(tn=>tn.position==Re.position),setHeights:O,expandByDefault:f,gap:re,expanded:L,swipeDirections:e.swipeDirections})})):null}))});function tS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function o3(...n){return e=>{let t=!1;const i=n.map(a=>{const l=tS(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():tS(n[a],null)}}}}var l3=Symbol.for("react.lazy"),Sf=fS[" use ".trim().toString()];function c3(n){return typeof n=="object"&&n!==null&&"then"in n}function uC(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===l3&&"_payload"in n&&c3(n._payload)}function u3(n){const e=d3(n),t=oe.forwardRef((i,a)=>{let{children:l,...u}=i;uC(l)&&typeof Sf=="function"&&(l=Sf(l._payload));const f=oe.Children.toArray(l),p=f.find(m3);if(p){const g=p.props.children,v=f.map(_=>_===p?oe.Children.count(g)>1?oe.Children.only(null):oe.isValidElement(g)?g.props.children:null:_);return T.jsx(e,{...u,ref:a,children:oe.isValidElement(g)?oe.cloneElement(g,void 0,v):null})}return T.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${n}.Slot`,t}var h3=u3("Slot");function d3(n){const e=oe.forwardRef((t,i)=>{let{children:a,...l}=t;if(uC(a)&&typeof Sf=="function"&&(a=Sf(a._payload)),oe.isValidElement(a)){const u=g3(a),f=p3(l,a.props);return a.type!==oe.Fragment&&(f.ref=i?o3(i,u):u),oe.cloneElement(a,f)}return oe.Children.count(a)>1?oe.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var f3=Symbol("radix.slottable");function m3(n){return oe.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===f3}function p3(n,e){const t={...e};for(const i in e){const a=n[i],l=e[i];/^on[A-Z]/.test(i)?a&&l?t[i]=(...f)=>{const p=l(...f);return a(...f),p}:a&&(t[i]=a):i==="style"?t[i]={...a,...l}:i==="className"&&(t[i]=[a,l].filter(Boolean).join(" "))}return{...n,...t}}function g3(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function hC(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=hC(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function dC(){for(var n,e,t=0,i="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=hC(n))&&(i&&(i+=" "),i+=e);return i}const nS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,sS=dC,_3=(n,e)=>t=>{var i;if(e?.variants==null)return sS(n,t?.class,t?.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(g=>{const v=t?.[g],_=l?.[g];if(v===null)return null;const w=nS(v)||nS(_);return a[g][w]}),f=t&&Object.entries(t).reduce((g,v)=>{let[_,w]=v;return w===void 0||(g[_]=w),g},{}),p=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((g,v)=>{let{class:_,className:w,...I}=v;return Object.entries(I).every(P=>{let[q,G]=P;return Array.isArray(G)?G.includes({...l,...f}[q]):{...l,...f}[q]===G})?[...g,_,w]:g},[]);return sS(n,u,p,t?.class,t?.className)},Ky="-",y3=n=>{const e=b3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:u=>{const f=u.split(Ky);return f[0]===""&&f.length!==1&&f.shift(),fC(f,e)||v3(u)},getConflictingClassGroupIds:(u,f)=>{const p=t[u]||[];return f&&i[u]?[...p,...i[u]]:p}}},fC=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),a=i?fC(n.slice(1),i):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join(Ky);return e.validators.find(({validator:u})=>u(l))?.classGroupId},iS=/^\[(.+)\]$/,v3=n=>{if(iS.test(n)){const e=iS.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},b3=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const a in t)T_(t[a],i,a,e);return i},T_=(n,e,t,i)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:rS(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(E3(a)){T_(a(i),e,t,i);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{T_(u,rS(e,l),t,i)})})},rS=(n,e)=>{let t=n;return e.split(Ky).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},E3=n=>n.isThemeGetter,T3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const a=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,i=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=i.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},w_="!",S_=":",w3=S_.length,S3=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=a=>{const l=[];let u=0,f=0,p=0,g;for(let P=0;P<a.length;P++){let q=a[P];if(u===0&&f===0){if(q===S_){l.push(a.slice(p,P)),p=P+w3;continue}if(q==="/"){g=P;continue}}q==="["?u++:q==="]"?u--:q==="("?f++:q===")"&&f--}const v=l.length===0?a:a.substring(p),_=A3(v),w=_!==v,I=g&&g>p?g-p:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:I}};if(e){const a=e+S_,l=i;i=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=i;i=l=>t({className:l,parseClassName:a})}return i},A3=n=>n.endsWith(w_)?n.substring(0,n.length-1):n.startsWith(w_)?n.substring(1):n,x3=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let l=[];return i.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},C3=n=>({cache:T3(n.cacheSize),parseClassName:S3(n),sortModifiers:x3(n),...y3(n)}),R3=/\s+/,I3=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],f=n.trim().split(R3);let p="";for(let g=f.length-1;g>=0;g-=1){const v=f[g],{isExternal:_,modifiers:w,hasImportantModifier:I,baseClassName:P,maybePostfixModifierPosition:q}=t(v);if(_){p=v+(p.length>0?" "+p:p);continue}let G=!!q,$=i(G?P.substring(0,q):P);if(!$){if(!G){p=v+(p.length>0?" "+p:p);continue}if($=i(P),!$){p=v+(p.length>0?" "+p:p);continue}G=!1}const ce=l(w).join(":"),re=I?ce+w_:ce,me=re+$;if(u.includes(me))continue;u.push(me);const Me=a($,G);for(let Ee=0;Ee<Me.length;++Ee){const N=Me[Ee];u.push(re+N)}p=v+(p.length>0?" "+p:p)}return p};function N3(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=mC(e))&&(i&&(i+=" "),i+=t);return i}const mC=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=mC(n[i]))&&(t&&(t+=" "),t+=e);return t};function k3(n,...e){let t,i,a,l=u;function u(p){const g=e.reduce((v,_)=>_(v),n());return t=C3(g),i=t.cache.get,a=t.cache.set,l=f,f(p)}function f(p){const g=i(p);if(g)return g;const v=I3(p,t);return a(p,v),v}return function(){return l(N3.apply(null,arguments))}}const Jt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},pC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,D3=/^\d+\/\d+$/,O3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,V3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,L3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=n=>D3.test(n),Ue=n=>!!n&&!Number.isNaN(Number(n)),ia=n=>!!n&&Number.isInteger(Number(n)),Ng=n=>n.endsWith("%")&&Ue(n.slice(0,-1)),ir=n=>O3.test(n),U3=()=>!0,j3=n=>M3.test(n)&&!P3.test(n),_C=()=>!1,z3=n=>V3.test(n),B3=n=>L3.test(n),F3=n=>!ge(n)&&!_e(n),q3=n=>Yl(n,bC,_C),ge=n=>pC.test(n),ao=n=>Yl(n,EC,j3),kg=n=>Yl(n,$3,Ue),aS=n=>Yl(n,yC,_C),H3=n=>Yl(n,vC,B3),Id=n=>Yl(n,TC,z3),_e=n=>gC.test(n),eu=n=>$l(n,EC),G3=n=>$l(n,Q3),oS=n=>$l(n,yC),K3=n=>$l(n,bC),Y3=n=>$l(n,vC),Nd=n=>$l(n,TC,!0),Yl=(n,e,t)=>{const i=pC.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},$l=(n,e,t=!1)=>{const i=gC.exec(n);return i?i[1]?e(i[1]):t:!1},yC=n=>n==="position"||n==="percentage",vC=n=>n==="image"||n==="url",bC=n=>n==="length"||n==="size"||n==="bg-size",EC=n=>n==="length",$3=n=>n==="number",Q3=n=>n==="family-name",TC=n=>n==="shadow",W3=()=>{const n=Jt("color"),e=Jt("font"),t=Jt("text"),i=Jt("font-weight"),a=Jt("tracking"),l=Jt("leading"),u=Jt("breakpoint"),f=Jt("container"),p=Jt("spacing"),g=Jt("radius"),v=Jt("shadow"),_=Jt("inset-shadow"),w=Jt("text-shadow"),I=Jt("drop-shadow"),P=Jt("blur"),q=Jt("perspective"),G=Jt("aspect"),$=Jt("ease"),ce=Jt("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Me=()=>[...me(),_e,ge],Ee=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],x=()=>[_e,ge,p],R=()=>[fl,"full","auto",...x()],V=()=>[ia,"none","subgrid",_e,ge],O=()=>["auto",{span:["full",ia,_e,ge]},ia,_e,ge],L=()=>[ia,"auto",_e,ge],C=()=>["auto","min","max","fr",_e,ge],Je=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ze=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...x()],ie=()=>[fl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],ne=()=>[n,_e,ge],Ne=()=>[...me(),oS,aS,{position:[_e,ge]}],ke=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",K3,q3,{size:[_e,ge]}],X=()=>[Ng,eu,ao],Q=()=>["","none","full",g,_e,ge],se=()=>["",Ue,eu,ao],he=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[Ue,Ng,oS,aS],Re=()=>["","none",P,_e,ge],Fe=()=>["none",Ue,_e,ge],hn=()=>["none",Ue,_e,ge],Mn=()=>[Ue,_e,ge],tn=()=>[fl,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ir],breakpoint:[ir],color:[U3],container:[ir],"drop-shadow":[ir],ease:["in","out","in-out"],font:[F3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ir],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ir],shadow:[ir],spacing:["px",Ue],text:[ir],"text-shadow":[ir],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fl,ge,_e,G]}],container:["container"],columns:[{columns:[Ue,ge,_e,f]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Me()}],overflow:[{overflow:Ee()}],"overflow-x":[{"overflow-x":Ee()}],"overflow-y":[{"overflow-y":Ee()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[ia,"auto",_e,ge]}],basis:[{basis:[fl,"full","auto",f,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ue,fl,"auto","initial","none",ge]}],grow:[{grow:["",Ue,_e,ge]}],shrink:[{shrink:["",Ue,_e,ge]}],order:[{order:[ia,"first","last","none",_e,ge]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...Je(),"normal"]}],"justify-items":[{"justify-items":[...Ze(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ze()]}],"align-content":[{content:["normal",...Je()]}],"align-items":[{items:[...Ze(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ze(),{baseline:["","last"]}]}],"place-content":[{"place-content":Je()}],"place-items":[{"place-items":[...Ze(),"baseline"]}],"place-self":[{"place-self":["auto",...Ze()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[f,"screen",...ie()]}],"min-w":[{"min-w":[f,"screen","none",...ie()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,eu,ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,_e,kg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ng,ge]}],"font-family":[{font:[G3,ge,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,_e,ge]}],"line-clamp":[{"line-clamp":[Ue,"none",_e,kg]}],leading:[{leading:[l,...x()]}],"list-image":[{"list-image":["none",_e,ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ue,"from-font","auto",_e,ao]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[Ue,"auto",_e,ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ne()}],"bg-repeat":[{bg:ke()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ia,_e,ge],radial:["",_e,ge],conic:[ia,_e,ge]},Y3,H3]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ue,_e,ge]}],"outline-w":[{outline:["",Ue,eu,ao]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",v,Nd,Id]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",_,Nd,Id]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[Ue,ao]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",w,Nd,Id]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[Ue,_e,ge]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ue]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[_e,ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":me()}],"mask-image-conic-pos":[{"mask-conic":[Ue]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ne()}],"mask-repeat":[{mask:ke()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ge]}],filter:[{filter:["","none",_e,ge]}],blur:[{blur:Re()}],brightness:[{brightness:[Ue,_e,ge]}],contrast:[{contrast:[Ue,_e,ge]}],"drop-shadow":[{"drop-shadow":["","none",I,Nd,Id]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",Ue,_e,ge]}],"hue-rotate":[{"hue-rotate":[Ue,_e,ge]}],invert:[{invert:["",Ue,_e,ge]}],saturate:[{saturate:[Ue,_e,ge]}],sepia:[{sepia:["",Ue,_e,ge]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ge]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Ue,_e,ge]}],"backdrop-contrast":[{"backdrop-contrast":[Ue,_e,ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ue,_e,ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ue,_e,ge]}],"backdrop-invert":[{"backdrop-invert":["",Ue,_e,ge]}],"backdrop-opacity":[{"backdrop-opacity":[Ue,_e,ge]}],"backdrop-saturate":[{"backdrop-saturate":[Ue,_e,ge]}],"backdrop-sepia":[{"backdrop-sepia":["",Ue,_e,ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ue,"initial",_e,ge]}],ease:[{ease:["linear","initial",$,_e,ge]}],delay:[{delay:[Ue,_e,ge]}],animate:[{animate:["none",ce,_e,ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[q,_e,ge]}],"perspective-origin":[{"perspective-origin":Me()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:hn()}],"scale-x":[{"scale-x":hn()}],"scale-y":[{"scale-y":hn()}],"scale-z":[{"scale-z":hn()}],"scale-3d":["scale-3d"],skew:[{skew:Mn()}],"skew-x":[{"skew-x":Mn()}],"skew-y":[{"skew-y":Mn()}],transform:[{transform:[_e,ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:Me()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tn()}],"translate-x":[{"translate-x":tn()}],"translate-y":[{"translate-y":tn()}],"translate-z":[{"translate-z":tn()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ge]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[Ue,eu,ao,kg]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},X3=k3(W3);function wC(...n){return X3(dC(n))}const J3=_3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),A_=oe.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...a},l)=>{const u=i?h3:"button";return T.jsx(u,{className:wC(J3({variant:e,size:t,className:n})),ref:l,...a})});A_.displayName="Button";const Fd=oe.forwardRef(({className:n,type:e,...t},i)=>T.jsx("input",{type:e,className:wC("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));Fd.displayName="Input";const Z3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),lS=n=>{const e=eU(n);return e.charAt(0).toUpperCase()+e.slice(1)},SC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),tU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sU=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...f},p)=>oe.createElement("svg",{ref:p,...nU,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:SC("lucide",a),...!l&&!tU(f)&&{"aria-hidden":"true"},...f},[...u.map(([g,v])=>oe.createElement(g,v)),...Array.isArray(l)?l:[l]]));const en=(n,e)=>{const t=oe.forwardRef(({className:i,...a},l)=>oe.createElement(sU,{ref:l,iconNode:e,className:SC(`lucide-${Z3(lS(n))}`,`lucide-${n}`,i),...a}));return t.displayName=lS(n),t};const iU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Na=en("arrow-left",iU);const rU=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],AC=en("bookmark",rU);const aU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oU=en("check",aU);const lU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],cU=en("grid-3x3",lU);const uU=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],hU=en("hash",uU);const dU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yy=en("heart",dU);const fU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tr=en("loader-circle",fU);const mU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xC=en("log-out",mU);const pU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],$y=en("message-circle",pU);const gU=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_U=en("moon",gU);const yU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vU=en("pen",yU);const bU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],EU=en("plus",bU);const TU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],CC=en("search",TU);const wU=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],SU=en("share-2",wU);const AU=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],xU=en("sun",AU);const CU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],RU=en("trash-2",CU);const IU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],NU=en("users",IU);const kU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],DU=en("user",kU);const OU=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],MU=en("zap",OU),PU=1,VU=1e6;let Dg=0;function LU(){return Dg=(Dg+1)%Number.MAX_SAFE_INTEGER,Dg.toString()}const Og=new Map,cS=n=>{if(Og.has(n))return;const e=setTimeout(()=>{Og.delete(n),vu({type:"REMOVE_TOAST",toastId:n})},VU);Og.set(n,e)},UU=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,PU)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?cS(t):n.toasts.forEach(i=>{cS(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},qd=[];let Hd={toasts:[]};function vu(n){Hd=UU(Hd,n),qd.forEach(e=>{e(Hd)})}function jU({...n}){const e=LU(),t=a=>vu({type:"UPDATE_TOAST",toast:{...a,id:e}}),i=()=>vu({type:"DISMISS_TOAST",toastId:e});return vu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:a=>{a||i()}}}),{id:e,dismiss:i,update:t}}function zU(){const[n,e]=oe.useState(Hd);return oe.useEffect(()=>(qd.push(e),()=>{const t=qd.indexOf(e);t>-1&&qd.splice(t,1)}),[n]),{...n,toast:jU,dismiss:t=>vu({type:"DISMISS_TOAST",toastId:t})}}function uS(){const{loginWithGoogle:n,loginWithEmail:e,signupWithEmail:t,pendingGoogleUser:i}=ei(),[,a]=Zs(),{toast:l}=zU(),[u,f]=oe.useState(!1),[p,g]=oe.useState(!1),[v,_]=oe.useState(""),[w,I]=oe.useState(""),[P,q]=oe.useState(""),G=async()=>{f(!0);try{await n(),a("/")}catch(ce){ce.message==="USERNAME_SETUP_REQUIRED"?a("/setup"):l({variant:"destructive",title:"Error",description:ce.message||"Login failed"})}finally{f(!1)}},$=async ce=>{if(ce.preventDefault(),!(!v||!w)&&!(p&&!P)){f(!0);try{p?await t(v,w,P):await e(v,w),a("/")}catch(re){l({variant:"destructive",title:"Error",description:re.message})}finally{f(!1)}}};return T.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 max-w-md mx-auto bg-background",children:[T.jsxs("div",{className:"w-full max-w-xs space-y-6",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-6xl mb-4 text-primary",style:{fontFamily:"'Grand Hotel', cursive"},children:"InstaClone"}),T.jsx("p",{className:"text-muted-foreground",children:p?"Share your moments with the world.":"Log in to your account."})]}),T.jsxs("form",{onSubmit:$,className:"space-y-3",children:[p&&T.jsx(Fd,{placeholder:"Full Name",className:"bg-muted/50",type:"text",value:P,onChange:ce=>q(ce.target.value)}),T.jsx(Fd,{placeholder:"Email",className:"bg-muted/50",type:"email",value:v,onChange:ce=>_(ce.target.value)}),T.jsx(Fd,{type:"password",placeholder:"Password",className:"bg-muted/50",value:w,onChange:ce=>I(ce.target.value)}),T.jsx(A_,{type:"submit",className:"w-full font-semibold mt-2 bg-primary hover:bg-primary/90 text-white",disabled:u,children:u?T.jsx(Tr,{className:"w-4 h-4 animate-spin"}):p?"Sign Up":"Log In"})]}),T.jsxs("div",{className:"relative my-6",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("span",{className:"w-full border-t border-border"})}),T.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:T.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),T.jsxs(A_,{className:"w-full bg-white hover:bg-gray-50 text-black border border-border font-semibold flex items-center gap-2",onClick:G,disabled:u,children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5"}),"Log in with Google"]}),!p&&T.jsx("div",{className:"text-center mt-4",children:T.jsx("a",{href:"#",className:"text-xs text-blue-900 dark:text-blue-400",children:"Forgot password?"})})]}),T.jsx("div",{className:"mt-auto py-6 w-full border-t border-border text-center",children:T.jsxs("p",{className:"text-sm",children:[p?"Have an account?":"Don't have an account?",T.jsx("span",{className:"font-semibold text-blue-600 cursor-pointer ml-1",onClick:()=>g(!p),children:p?"Log in":"Sign up"})]})})]})}const Af={accessToken:"IGAAPnvrImaZAJBZAFE0cXBWWmxuaF93V0o3eGJoUC1va2w4UmVreTJPT2JVUW4xbW93T1lBR3AyRTVYWHhLZA3pzdHlzNWNLU25MS3N0ZA1RMdnZAZASUF4T0NrUVA0MDlqRXlPb0dsZAHBfdDMyaXVHeXU2S1ZAPQ0NVYkVVLWlieDdqcwZDZD",businessAccountId:"",apiVersion:"v18.0",apiBaseUrl:"https://graph.instagram.com"};function RC(){return Af.accessToken}function IC(){return console.warn("Instagram business account ID not configured"),""}async function ka(n,e="GET",t,i){const a=i||RC();if(!a)throw new Error("Instagram API token not configured. Please connect your Instagram account.");const l=new URL(`${Af.apiBaseUrl}/${Af.apiVersion}/${n}`);l.searchParams.append("access_token",a);const u={method:e,headers:{"Content-Type":"application/json"}};try{const f=await fetch(l.toString(),u);if(!f.ok){const p=await f.json();throw new Error(`Instagram API Error: ${p.error?.message||f.statusText}`)}return await f.json()}catch(f){throw console.error("Instagram API request failed:",f),f}}async function im(n,e){try{const t=n||Af.businessAccountId||"me",i=await ka(`${t}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`,"GET",void 0,e);return i.data&&Array.isArray(i.data)?i.data:Array.isArray(i)?i:[]}catch(t){return console.error("Error fetching user media:",t),[]}}async function Qy(n="me",e){try{return await ka(`${n}?fields=id,name,biography,website,profile_picture_url,followers_count,follows_count,media_count,username`,"GET",void 0,e)}catch(t){return console.error("Error fetching user profile:",t),null}}async function NC(n="me"){try{const e=await ka(`${n}/ig_followed_users?fields=id,name,username,profile_picture_url,biography,website`);if(e.data&&Array.isArray(e.data))return e.data;if(e.error)throw console.error("Instagram API error:",e.error),new Error(e.error.message||"Failed to fetch following list");return[]}catch(e){throw console.error("Error fetching following list:",e),e}}async function kC(n){try{const e=await ka(`${n}/media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error(`Error fetching media for user ${n}:`,e),[]}}async function DC(n){try{const e=IC();if(!e)return console.warn("Business account ID not configured for hashtag search"),[];const t=await ka(`ig_hashtag_search?user_id=${e}&fields=id,name&search_string=${encodeURIComponent(n)}`);return t.data&&Array.isArray(t.data)?t.data:[]}catch(e){return console.error("Error searching hashtags:",e),[]}}async function OC(n){try{const e=await ka(`${n}/recent_media?fields=id,caption,media_type,media_url,thumbnail_url,timestamp,like_count,comments_count,username`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error("Error fetching hashtag media:",e),[]}}async function Wy(n="me"){try{const e=await ka(`${n}/stories?fields=id,media_type,media_url,timestamp,like_count`);return e.data&&Array.isArray(e.data)?e.data:[]}catch(e){return console.error("Error fetching user stories:",e),[]}}const BU=Object.freeze(Object.defineProperty({__proto__:null,getHashtagMedia:OC,getInstagramAccessToken:RC,getInstagramBusinessAccountId:IC,getUserFollowing:NC,getUserMedia:im,getUserMediaById:kC,getUserProfile:Qy,getUserStories:Wy,makeInstagramRequest:ka,searchHashtags:DC},Symbol.toStringTag,{value:"Module"}));function FU(){const{currentUser:n,logout:e,darkMode:t,toggleDarkMode:i,bookmarkedPosts:a,bookmarkPost:l,removeBookmark:u,getActiveInstagramToken:f}=ei(),[,p]=Zs(),[g,v]=oe.useState([]),[_,w]=oe.useState([]),[I,P]=oe.useState(!0),q=f();oe.useEffect(()=>{(async()=>{P(!0);try{const[ce,re]=await Promise.all([im(void 0,q),Wy("me")]);v(ce),w(re)}catch(ce){console.error("Failed to load media:",ce)}finally{P(!1)}})()},[q]);const G=async()=>{await e(),p("/login")};return T.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-white"}`,children:[T.jsx("header",{className:`sticky top-0 z-50 ${t?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b`,children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-black"}`,style:{fontFamily:"'Grand Hotel', cursive"},children:"InstaClone"}),T.jsxs("div",{className:"flex items-center gap-4",children:[q&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>p("/search"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-search",title:"Search",children:T.jsx(CC,{className:"w-5 h-5"})}),T.jsx("button",{onClick:()=>p("/bookmarks"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-bookmarks",title:"Saved posts",children:T.jsx(AC,{className:"w-5 h-5"})}),T.jsx("button",{onClick:i,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-dark-mode",children:t?T.jsx(xU,{className:"w-5 h-5"}):T.jsx(_U,{className:"w-5 h-5"})}),T.jsx("button",{onClick:()=>p("/following"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-following",title:"View people you follow",children:T.jsx(NU,{className:"w-5 h-5"})})]}),T.jsx("button",{onClick:()=>p("/profile"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-profile",title:"Go to profile",children:T.jsx(DU,{className:"w-5 h-5"})}),T.jsx("button",{onClick:G,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-logout",children:T.jsx(xC,{className:"w-5 h-5"})})]})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:I?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):q?g.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No media found"})}):T.jsxs("div",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:[_&&_.length>0&&T.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} px-4 py-4 border-b ${t?"border-gray-700":"border-gray-200"} sticky top-[60px] z-40`,children:T.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 snap-x snap-mandatory",children:_.map(($,ce)=>T.jsxs("button",{onClick:()=>p("/stories"),className:"flex-shrink-0 relative group focus:outline-none","data-testid":`story-thumbnail-${ce}`,children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 via-purple-500 to-pink-500 p-[2px] group-hover:shadow-lg transition-all",children:T.jsx("div",{className:`w-full h-full rounded-full overflow-hidden ${t?"bg-gray-700":"bg-gray-200"} border-2 ${t?"border-gray-800":"border-white"}`,children:$.media_url&&($.media_type==="VIDEO"?T.jsx("video",{src:$.media_url,className:"w-full h-full object-cover"}):T.jsx("img",{src:$.media_url,alt:"Story",className:"w-full h-full object-cover"}))})}),T.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold text-white ${t?"bg-blue-600":"bg-blue-500"}`,children:ce+1})]},`story-${ce}`))})}),g.map($=>T.jsxs("article",{className:t?"bg-gray-800":"bg-white","data-testid":`post-${$.id}`,children:[T.jsxs("div",{className:`px-4 py-3 flex items-center justify-between ${t?"border-gray-700":"border-gray-200"}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),T.jsx("span",{className:`text-sm font-semibold ${t?"text-white":"text-black"}`,children:n?.username})]}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-more-${$.id}`,children:""})]}),T.jsx("div",{className:"bg-black w-full aspect-square overflow-hidden",children:$.media_type==="VIDEO"?T.jsx("video",{src:$.media_url,className:"w-full h-full object-cover",controls:!0,"data-testid":`video-${$.id}`}):T.jsx("img",{src:$.media_url,alt:$.caption||"Instagram post",className:"w-full h-full object-cover","data-testid":`image-${$.id}`})}),T.jsxs("div",{className:"px-4 py-3 flex gap-4",children:[T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-like-${$.id}`,children:T.jsx(Yy,{className:"w-6 h-6"})}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-comment-${$.id}`,children:T.jsx($y,{className:"w-6 h-6"})}),T.jsx("button",{className:t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black","data-testid":`button-share-${$.id}`,children:T.jsx(SU,{className:"w-6 h-6"})})]}),T.jsx("div",{className:"px-4 py-2 border-t border-gray-200",children:T.jsxs("p",{className:"text-sm font-semibold","data-testid":`likes-${$.id}`,children:[$.like_count||0," likes"]})}),$.caption&&T.jsx("div",{className:"px-4 py-2",children:T.jsxs("p",{className:"text-sm",children:[T.jsx("span",{className:"font-semibold",children:n?.username})," ",T.jsx("span",{"data-testid":`caption-${$.id}`,children:$.caption})]})}),$.comments_count>0&&T.jsx("div",{className:"px-4 py-2",children:T.jsxs("p",{className:"text-sm text-gray-600 cursor-pointer hover:text-black","data-testid":`comments-${$.id}`,children:["View all ",$.comments_count," comments"]})}),$.timestamp&&T.jsx("div",{className:"px-4 pb-3",children:T.jsx("p",{className:"text-xs text-gray-400",children:new Date($.timestamp).toLocaleDateString()})})]},$.id))]}):T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:`font-semibold mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Instagram Account Not Connected"}),T.jsx("p",{className:`text-sm mb-6 ${t?"text-gray-400":"text-gray-500"}`,children:"Connect your Instagram account to see your feed and posts."}),T.jsx("button",{onClick:()=>p("/profile/connect-instagram"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors","data-testid":"button-connect-instagram-home",children:"Connect Instagram"})]})})]})}function qU(){const{currentUser:n,logout:e,darkMode:t,getActiveInstagramToken:i,switchInstagramAccount:a,removeInstagramAccount:l}=ei(),[,u]=Zs(),[f,p]=oe.useState(null),[g,v]=oe.useState([]),[_,w]=oe.useState(!0),[I,P]=oe.useState("posts"),[q,G]=oe.useState(!1),$=i();oe.useEffect(()=>{(async()=>{w(!0);try{const me=await Qy("me",$);p(me);const Me=await im(void 0,$);v(Me)}catch(me){console.error("Failed to load profile:",me)}finally{w(!1)}})()},[$]);const ce=async()=>{await e(),u("/login")};return T.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-white"}`,children:[T.jsx("header",{className:`sticky top-0 z-50 ${t?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b`,children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("button",{onClick:()=>u("/"),className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:`text-lg font-semibold ${t?"text-white":"text-black"}`,"data-testid":"text-profile-title",children:n?.username}),T.jsx("button",{onClick:ce,className:`${t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-black"} transition-colors`,"data-testid":"button-logout",children:T.jsx(xC,{className:"w-5 h-5"})})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:_?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):$?f?T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex gap-8 items-start",children:[T.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden flex-shrink-0",children:f.profile_picture_url&&T.jsx("img",{src:f.profile_picture_url,alt:f.name,className:"w-full h-full object-cover","data-testid":"img-avatar"})}),T.jsxs("div",{className:"flex-1 space-y-4",children:[T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h2",{className:`text-2xl font-semibold ${t?"text-white":"text-black"}`,"data-testid":"text-username",children:f.name||n?.username}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("button",{onClick:()=>u("/stories"),className:"bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors","data-testid":"button-view-stories",title:"View your stories",children:[T.jsx(MU,{className:"w-4 h-4"}),"Stories"]}),T.jsxs("button",{onClick:()=>u("/profile/edit"),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors","data-testid":"button-edit-profile",children:[T.jsx(vU,{className:"w-4 h-4"}),"Edit"]})]})]}),T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsxs("button",{onClick:()=>G(!q),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors w-fit text-sm","data-testid":"button-accounts-menu",children:[T.jsx(EU,{className:"w-4 h-4"}),n?.instagramAccounts?.length?"Manage Accounts":"Connect Instagram"]}),q&&n?.instagramAccounts&&n.instagramAccounts.length>0&&T.jsxs("div",{className:`border rounded-lg p-3 space-y-2 ${t?"border-gray-600 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:[n.instagramAccounts.map((re,me)=>T.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${me===(n.activeInstagramAccountId||0)?t?"bg-gray-700":"bg-blue-100":""}`,children:[T.jsxs("button",{onClick:()=>a(me),className:`flex-1 text-left flex items-center gap-2 text-sm ${me===(n.activeInstagramAccountId||0)?"font-semibold":""}`,"data-testid":`button-account-${me}`,children:[me===(n.activeInstagramAccountId||0)&&T.jsx(oU,{className:"w-4 h-4 text-blue-500"}),re.accountName]}),T.jsx("button",{onClick:()=>l(me),className:`text-red-500 hover:text-red-700 p-1 ${n.instagramAccounts.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:n.instagramAccounts.length===1,"data-testid":`button-delete-account-${me}`,children:T.jsx(RU,{className:"w-4 h-4"})})]},me)),T.jsx("button",{onClick:()=>u("/profile/connect-instagram"),className:"w-full text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 py-1","data-testid":"button-add-another-account",children:"+ Add Another Account"})]})]})]}),T.jsxs("div",{className:"flex gap-8 text-sm",children:[T.jsxs("div",{"data-testid":"stat-posts",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.media_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"posts"})]}),T.jsxs("div",{"data-testid":"stat-followers",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.followers_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"followers"})]}),T.jsxs("div",{"data-testid":"stat-following",children:[T.jsx("span",{className:`font-semibold ${t?"text-white":"text-black"}`,children:f.follows_count||0}),T.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"following"})]})]})]})]}),T.jsxs("div",{className:`border-t ${t?"border-gray-700":"border-gray-200"} pt-6 space-y-3`,children:[f.biography&&T.jsxs("div",{"data-testid":"text-bio",children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Bio"}),T.jsx("p",{className:`text-sm whitespace-pre-wrap ${t?"text-gray-400":"text-gray-600"}`,children:f.biography})]}),n?.bio&&T.jsxs("div",{"data-testid":"text-user-bio",children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Personal Bio"}),T.jsx("p",{className:`text-sm whitespace-pre-wrap ${t?"text-gray-400":"text-gray-600"}`,children:n.bio})]})]}),T.jsxs("div",{className:"space-y-3",children:[f.website&&T.jsxs("div",{children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Website"}),T.jsx("a",{href:f.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm break-all","data-testid":"link-instagram-website",children:f.website})]}),n?.website&&T.jsxs("div",{children:[T.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Personal Website"}),T.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm break-all","data-testid":"link-personal-website",children:n.website})]})]}),T.jsx("div",{className:`border-t ${t?"border-gray-700":"border-gray-200"} mt-8`,children:T.jsxs("div",{className:"flex items-center justify-center gap-8",children:[T.jsxs("button",{onClick:()=>P("posts"),className:`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${I==="posts"?t?"border-white text-white":"border-gray-900 text-gray-900":t?"border-transparent text-gray-400 hover:text-white":"border-transparent text-gray-600 hover:text-gray-800"}`,"data-testid":"tab-posts",children:[T.jsx(cU,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Posts"})]}),T.jsxs("button",{onClick:()=>P("saved"),className:`py-4 px-4 flex items-center gap-2 transition-colors border-t-2 ${I==="saved"?t?"border-white text-white":"border-gray-900 text-gray-900":t?"border-transparent text-gray-400 hover:text-white":"border-transparent text-gray-600 hover:text-gray-800"}`,"data-testid":"tab-saved",children:[T.jsx(AC,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Saved"})]})]})}),I==="posts"&&T.jsx("div",{className:"mt-6",children:g.length===0?T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"No posts yet"})}):T.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:g.map(re=>T.jsxs("div",{className:`aspect-square ${t?"bg-gray-800":"bg-gray-100"} overflow-hidden hover:opacity-80 transition-opacity cursor-pointer group relative`,"data-testid":`media-grid-${re.id}`,children:[re.media_type==="VIDEO"?T.jsx("video",{src:re.media_url,className:"w-full h-full object-cover","data-testid":`grid-video-${re.id}`}):T.jsx("img",{src:re.media_url,alt:re.caption||"Instagram post",className:"w-full h-full object-cover","data-testid":`grid-image-${re.id}`}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsxs("div",{className:"flex items-center gap-4 text-white",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:re.like_count||0}),T.jsx("span",{className:"text-xs",children:""})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:re.comments_count||0}),T.jsx("span",{className:"text-xs",children:""})]})]})})]},re.id))})}),I==="saved"&&T.jsx("div",{className:"mt-6",children:T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"No saved posts yet"})})})]}):f?null:T.jsx("div",{className:`flex justify-center items-center h-96 ${t?"text-gray-500":"text-gray-400"}`,children:T.jsx("p",{children:"Failed to load profile"})}):T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:`font-semibold mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:"Instagram Account Not Connected"}),T.jsx("p",{className:`text-sm mb-6 ${t?"text-gray-400":"text-gray-500"}`,children:"Connect your Instagram account to view your profile and manage accounts."}),T.jsx("button",{onClick:()=>u("/profile/connect-instagram"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-colors","data-testid":"button-connect-instagram-profile",children:"Connect Instagram"})]})})]})}function HU(){const{currentUser:n,updateProfile:e}=ei(),[,t]=Zs(),[i,a]=oe.useState(!1),[l,u]=oe.useState(""),[f,p]=oe.useState(!1),[g,v]=oe.useState({fullName:n?.fullName||"",bio:n?.bio||"",website:n?.website||""}),_=I=>{const{name:P,value:q}=I.target;v(G=>({...G,[P]:q})),u(""),p(!1)},w=async I=>{I.preventDefault(),a(!0),u(""),p(!1);try{await e({fullName:g.fullName||void 0,bio:g.bio||void 0,website:g.website||void 0}),p(!0),setTimeout(()=>t("/profile"),1500)}catch(P){u(P instanceof Error?P.message:"Failed to update profile")}finally{a(!1)}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsx("button",{onClick:()=>t("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Edit Profile"}),T.jsx("div",{className:"w-6"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:T.jsxs("form",{onSubmit:w,className:"space-y-6 max-w-md",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),T.jsx("input",{type:"text",name:"fullName",value:g.fullName,onChange:_,placeholder:"Your full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-fullname"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),T.jsx("textarea",{name:"bio",value:g.bio,onChange:_,placeholder:"Tell us about yourself",maxLength:500,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none","data-testid":"textarea-bio"}),T.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.bio.length,"/500"]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),T.jsx("input",{type:"url",name:"website",value:g.website,onChange:_,placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-website"})]}),l&&T.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:T.jsx("p",{className:"text-sm text-red-600","data-testid":"error-message",children:l})}),f&&T.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:T.jsx("p",{className:"text-sm text-green-600","data-testid":"success-message",children:"Profile updated successfully!"})}),T.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-medium py-2 rounded-lg transition-colors flex items-center justify-center gap-2","data-testid":"button-save",children:i?T.jsxs(T.Fragment,{children:[T.jsx(Tr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"}),T.jsx("button",{type:"button",onClick:()=>t("/profile"),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 rounded-lg transition-colors","data-testid":"button-cancel",children:"Cancel"})]})})]})}function GU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState([]),[a,l]=oe.useState({}),[u,f]=oe.useState(!0),[p,g]=oe.useState("");return oe.useEffect(()=>{(async()=>{f(!0),g("");try{console.log("Starting to load following list...");const _=await NC();console.log("Following list loaded:",_),i(_);const w={};for(const I of _.slice(0,5)){const P=await kC(I.id);w[I.id]=P.slice(0,6)}l(w)}catch(_){console.error("Failed to load following:",_),g(_?.message||"Instagram Graph API doesn't support listing followed users with your current token. This is a limitation of Instagram's API - only certain account types and permissions can access this feature.")}finally{f(!1)}})()},[]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-4",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Following"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-6",children:u?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):p?T.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center px-4",children:[T.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"API Limitation"}),T.jsx("p",{className:"text-gray-600 text-sm",children:p}),n&&T.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"The API doesn't support listing who you follow. Go to Instagram to see your following list."})]}):t.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"You're not following anyone yet"})}):T.jsx("div",{className:"space-y-12",children:t.map(v=>T.jsxs("div",{className:"border-b border-gray-200 pb-8 last:border-b-0",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden flex-shrink-0",children:v.profile_picture_url&&T.jsx("img",{src:v.profile_picture_url,alt:v.name,className:"w-full h-full object-cover","data-testid":`avatar-${v.id}`})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h2",{className:"font-semibold text-lg","data-testid":`name-${v.id}`,children:v.name||v.username}),T.jsxs("p",{className:"text-sm text-gray-600","data-testid":`username-${v.id}`,children:["@",v.username]}),v.biography&&T.jsx("p",{className:"text-sm text-gray-700 mt-1 line-clamp-2",children:v.biography})]})]}),a[v.id]&&a[v.id].length>0?T.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:a[v.id].map(_=>T.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden rounded-lg hover:opacity-80 transition-opacity cursor-pointer group relative","data-testid":`media-${_.id}`,children:[_.media_type==="VIDEO"?T.jsx("video",{src:_.media_url,className:"w-full h-full object-cover","data-testid":`video-${_.id}`}):T.jsx("img",{src:_.media_url,alt:_.caption||"Post",className:"w-full h-full object-cover","data-testid":`image-${_.id}`}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsxs("div",{className:"flex items-center gap-4 text-white",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:_.like_count||0}),T.jsx("span",{className:"text-xs",children:""})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("span",{className:"text-sm font-semibold",children:_.comments_count||0}),T.jsx("span",{className:"text-xs",children:""})]})]})})]},_.id))}):T.jsx("p",{className:"text-sm text-gray-400",children:"No posts yet"})]},v.id))})})]})}function KU(){const{currentUser:n,addInstagramAccount:e}=ei(),[,t]=Zs(),[i,a]=oe.useState(""),[l,u]=oe.useState(""),[f,p]=oe.useState(!1),[g,v]=oe.useState(null),_=async I=>{const P=I.target.value;if(a(P),P.trim()&&P.length>50)try{const q=await Qy("me",P);v(q)}catch{v(null)}else v(null)},w=async I=>{if(I.preventDefault(),!i.trim()){yu.error("Please enter your Instagram access token");return}p(!0);try{await e(i,l||void 0),yu.success("Instagram account connected!"),t("/profile")}catch(P){console.error("Failed to connect Instagram:",P),yu.error("Failed to connect Instagram account")}finally{p(!1)}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>t("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Connect Instagram"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto px-4 py-8",children:T.jsxs("div",{className:"space-y-6 max-w-md",children:[T.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:[T.jsx("p",{className:"font-semibold mb-2",children:"How to get your Instagram access token:"}),T.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[T.jsxs("li",{children:["Go to ",T.jsx("a",{href:"https://developers.instagram.com",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Instagram for Developers"})]}),T.jsx("li",{children:"Create an app or use existing one"}),T.jsx("li",{children:"Go to Roles  Testers and add your account"}),T.jsx("li",{children:"Generate an access token with instagram_basic, instagram_graph_user_media permissions"}),T.jsx("li",{children:"Copy and paste the token below"})]})]}),T.jsxs("form",{onSubmit:w,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"accountName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name (Optional)"}),T.jsx("input",{id:"accountName",type:"text",value:l,onChange:I=>u(I.target.value),placeholder:"e.g., My Main Account, Business Account...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:f,"data-testid":"input-account-name"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Access Token"}),T.jsx("textarea",{id:"token",value:i,onChange:_,placeholder:"Paste your Instagram access token here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,disabled:f,"data-testid":"input-token"})]}),g&&T.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[T.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:" Account Preview:"}),T.jsxs("div",{className:"text-sm space-y-1 text-gray-600",children:[g.username&&T.jsxs("p",{children:[" Username: ",T.jsxs("strong",{children:["@",g.username]})]}),g.name&&T.jsxs("p",{children:[" Name: ",T.jsx("strong",{children:g.name})]})]})]}),T.jsxs("button",{type:"submit",disabled:f||!i.trim(),className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2","data-testid":"button-connect",children:[f&&T.jsx(Tr,{className:"w-4 h-4 animate-spin"}),f?"Connecting...":"Connect Instagram"]})]}),n?.instagramAccounts&&n.instagramAccounts.length>0&&T.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-sm text-green-800",children:[T.jsxs("p",{className:"font-semibold",children:[" ",n.instagramAccounts.length," account(s) connected"]}),T.jsx("p",{className:"text-xs mt-1",children:"You can manage all your accounts from your profile."})]}),T.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-xs text-gray-600 space-y-2",children:[T.jsx("p",{className:"font-semibold text-gray-700",children:"Why do we need this?"}),T.jsx("p",{children:"Each user needs to connect their own Instagram account to see their personal Instagram profile, posts, followers, and engagement metrics."}),T.jsx("p",{children:"Your token is securely stored and only used to fetch YOUR Instagram data."})]})]})})]})}function YU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState(""),[a,l]=oe.useState([]),[u,f]=oe.useState(!1),p=async g=>{if(g.preventDefault(),!!t.trim()){f(!0);try{const v=await DC(t);l(v),v.length===0&&yu.info("No hashtags found")}catch(v){console.error("Search failed:",v),yu.error("Search failed")}finally{f(!1)}}};return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Search"})]})}),T.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-6 space-y-6",children:[T.jsx("form",{onSubmit:p,className:"relative",children:T.jsxs("div",{className:"relative",children:[T.jsx(CC,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",value:t,onChange:g=>i(g.target.value),placeholder:"Search hashtags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-search"})]})}),u&&T.jsx("div",{className:"flex justify-center",children:T.jsx(Tr,{className:"w-6 h-6 animate-spin text-gray-400"})}),T.jsx("div",{className:"space-y-2",children:a.map(g=>T.jsxs("button",{onClick:()=>e(`/hashtag/${g.id}?name=${g.name}`),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left border border-gray-200","data-testid":`hashtag-${g.name}`,children:[T.jsx(hU,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),T.jsx("div",{children:T.jsxs("p",{className:"font-semibold text-gray-900",children:["#",g.name]})})]},g.id))}),t&&!u&&a.length===0&&T.jsx("div",{className:"text-center py-8 text-gray-500",children:T.jsxs("p",{children:['No hashtags found for "',t,'"']})})]})]})}function $U(){const{currentUser:n,bookmarkedPosts:e,bookmarkPost:t,removeBookmark:i}=ei(),[,a]=Zs(),[,l]=zI("/hashtag/:id"),[u,f]=oe.useState([]),[p,g]=oe.useState(!0),v=l?.id,_=new URLSearchParams(window.location.search).get("name");return oe.useEffect(()=>{(async()=>{if(!(!v||!n?.instagramToken)){g(!0);try{const I=await OC(v);f(I)}catch(I){console.error("Failed to load hashtag media:",I)}finally{g(!1)}}})()},[v,n?.instagramToken]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>a("/search"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsxs("h1",{className:"text-lg font-semibold",children:["#",_]})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:p?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-gray-400"})}):u.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No posts found"})}):T.jsx("div",{className:"space-y-6 p-4",children:u.map(w=>{const I=e.includes(w.id);return T.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow","data-testid":`post-${w.id}`,children:[w.media_url&&T.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:w.media_type==="VIDEO"?T.jsx("video",{src:w.media_url,className:"w-full h-full object-cover",controls:!0}):T.jsx("img",{src:w.media_url,alt:w.caption,className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"p-4 space-y-3",children:[w.caption&&T.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:w.caption}),T.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(Yy,{className:"w-4 h-4"}),T.jsx("span",{children:w.like_count||0})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx($y,{className:"w-4 h-4"}),T.jsx("span",{children:w.comments_count||0})]})]}),T.jsx("button",{onClick:()=>I?i(w.id):t(w.id),className:`w-full py-2 rounded-lg font-medium transition-colors ${I?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,"data-testid":`button-bookmark-${w.id}`,children:I?"Saved":"Save"})]})]},w.id)})})})]})}function QU(){const{currentUser:n,bookmarkedPosts:e,removeBookmark:t}=ei(),[,i]=Zs(),[a,l]=oe.useState([]),[u,f]=oe.useState(!0);return oe.useEffect(()=>{(async()=>{if(n?.instagramToken){f(!0);try{const v=(await im(void 0,n.instagramToken)).filter(_=>e.includes(_.id));l(v)}catch(g){console.error("Failed to load bookmarks:",g)}finally{f(!1)}}})()},[n?.instagramToken,e]),T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>i("/profile"),className:"text-gray-600 hover:text-black transition-colors","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Saved Posts"})]})}),T.jsx("main",{className:"max-w-2xl mx-auto",children:u?T.jsx("div",{className:"flex justify-center items-center h-96",children:T.jsx("p",{className:"text-gray-400",children:"Loading..."})}):a.length===0?T.jsx("div",{className:"flex justify-center items-center h-96 text-gray-400",children:T.jsx("p",{children:"No saved posts yet"})}):T.jsx("div",{className:"grid grid-cols-3 gap-1 p-1",children:a.map(p=>T.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer group relative",onClick:()=>i(`/post/${p.id}`),"data-testid":`bookmark-${p.id}`,children:[p.media_type==="VIDEO"?T.jsx("video",{src:p.media_url,className:"w-full h-full object-cover group-hover:opacity-75 transition-opacity"}):T.jsx("img",{src:p.media_url,alt:p.caption,className:"w-full h-full object-cover group-hover:opacity-75 transition-opacity"}),T.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100",children:[T.jsxs("div",{className:"flex items-center gap-1 text-white",children:[T.jsx(Yy,{className:"w-5 h-5"}),T.jsx("span",{children:p.like_count||0})]}),T.jsxs("div",{className:"flex items-center gap-1 text-white",children:[T.jsx($y,{className:"w-5 h-5"}),T.jsx("span",{children:p.comments_count||0})]})]})]},p.id))})})]})}function WU(){const{currentUser:n}=ei(),[,e]=Zs(),[t,i]=oe.useState([]),[a,l]=oe.useState(0),[u,f]=oe.useState(!0);if(oe.useEffect(()=>{(async()=>{if(!n?.instagramAccounts?.length){f(!1);return}try{if(n.instagramAccounts[n.activeInstagramAccountId??0]?.token){const I=await Wy("me");i(I)}}catch(w){console.error("Error loading stories:",w)}finally{f(!1)}})()},[n]),!n?.instagramAccounts?.length)return T.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-gray-600",children:"Connect your Instagram account to view stories."}),T.jsx("button",{onClick:()=>e("/profile/connect-instagram"),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"Connect Instagram"})]})});if(u)return T.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:T.jsx(Tr,{className:"w-8 h-8 animate-spin text-white"})});if(t.length===0)return T.jsxs("div",{className:"min-h-screen bg-white",children:[T.jsx("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:T.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center gap-3",children:[T.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-black","data-testid":"button-back",children:T.jsx(Na,{className:"w-6 h-6"})}),T.jsx("h1",{className:"text-lg font-semibold",children:"Stories"})]})}),T.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-60px)]",children:T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-gray-600",children:"No stories yet"}),T.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Post a story on Instagram to see it here"})]})})]});const p=t[a],g=a<t.length-1,v=a>0;return T.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:T.jsxs("div",{className:"relative w-full h-full max-w-md mx-auto flex flex-col bg-black",children:[T.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-800 z-10",children:T.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${(a+1)/t.length*100}%`}})}),T.jsx("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden",children:p?.media_url?p.media_type==="VIDEO"?T.jsx("video",{src:p.media_url,className:"w-full h-full object-cover",autoPlay:!0,"data-testid":"story-video"}):T.jsx("img",{src:p.media_url,alt:"Story",className:"w-full h-full object-cover","data-testid":"story-image"}):null}),T.jsxs("div",{className:"absolute inset-y-0 left-0 right-0 flex items-center justify-between px-4 pointer-events-none",children:[v&&T.jsx("button",{onClick:()=>l(a-1),className:"pointer-events-auto w-12 h-12 flex items-center justify-center text-white hover:bg-black/30 rounded-full transition-colors","data-testid":"button-prev-story",children:""}),!v&&T.jsx("div",{className:"w-12"}),g&&T.jsx("button",{onClick:()=>l(a+1),className:"pointer-events-auto w-12 h-12 flex items-center justify-center text-white hover:bg-black/30 rounded-full transition-colors","data-testid":"button-next-story",children:""}),!g&&T.jsx("div",{className:"w-12"})]}),T.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 right-4 z-20 text-white hover:bg-white/20 rounded-full p-2 transition-colors","data-testid":"button-close-stories",children:""}),T.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between z-10 text-white text-sm",children:[T.jsxs("span",{children:[a+1," of ",t.length]}),p?.timestamp&&T.jsx("span",{className:"text-xs text-gray-300",children:new Date(p.timestamp).toLocaleDateString()})]})]})})}function XU(){const{isAuthenticated:n,initializeAuth:e}=ei();return oe.useEffect(()=>{e()},[]),n?T.jsxs(T.Fragment,{children:[T.jsxs(TS,{base:"/",children:[T.jsx(wi,{path:"/login",component:uS}),T.jsx(wi,{path:"/",component:FU}),T.jsx(wi,{path:"/profile",component:qU}),T.jsx(wi,{path:"/profile/edit",component:HU}),T.jsx(wi,{path:"/profile/connect-instagram",component:KU}),T.jsx(wi,{path:"/following",component:GU}),T.jsx(wi,{path:"/search",component:YU}),T.jsx(wi,{path:"/hashtag/:id",component:$U}),T.jsx(wi,{path:"/bookmarks",component:QU}),T.jsx(wi,{path:"/stories",component:WU})]}),T.jsx(a3,{})]}):T.jsx(uS,{})}vI.createRoot(document.getElementById("root")).render(T.jsx(XU,{}));
